<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ç³»åˆ—â€”â€”å·¥åŽ‚æ¨¡å¼]]></title>
    <url>%2F2018%2F07%2F16%2Ffactory-pattern%2F</url>
    <content type="text"><![CDATA[å‰è¨€å·¥åŽ‚æ¨¡å¼ï¼Œæ˜¯æ ¹æ®â€œéœ€æ±‚â€ç”Ÿäº§â€œäº§å“â€ï¼Œè¯´ç‚¹ç™½å°±æ˜¯â€œä½ è¦ä»€ä¹ˆå¯¹è±¡ï¼Œä»Žå·¥åŽ‚æ‹¿å°±å¥½äº†â€ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è‡ªå·±åœ¨ä»£ç ä¸­åˆ›å»ºå¯¹è±¡ä¸å°±å¥½äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦åŽ»ä½¿ç”¨å·¥åŽ‚æ¨¡å¼ï¼Ÿ å·¥åŽ‚æ¨¡å¼çš„ä½œç”¨å…¶å®žï¼Œå·¥åŽ‚æ¨¡å¼æ˜¯ä¸ºäº†è§£è€¦ï¼šæŠŠå¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨è¿‡ç¨‹åˆ†å¼€ã€‚è¿™æ ·ä½¿å¾—ç³»ç»Ÿæ›´åŠ ç¬¦åˆâ€œå•ä¸€èŒè´£åŽŸåˆ™â€ï¼Œæœ‰åˆ©äºŽåŠŸèƒ½çš„å¤ç”¨å’Œå¯¹è±¡åˆ›å»ºè¿‡ç¨‹çš„ä¿®æ”¹ç»´æŠ¤ã€‚è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œé˜²æ­¢ç”¨æ¥å®žä¾‹åŒ–ä¸€ä¸ªç±»çš„æ•°æ®å’Œä»£ç åœ¨å¤šä¸ªç±»ä¸­é‡å¤å‡ºçŽ°ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯é™ä½Žä»£ç é‡å¤çŽ‡ã€‚ å¦å¤–ï¼Œä½¿ç”¨å·¥åŽ‚ç±»å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªç±»å¯èƒ½æœ‰å¤šä¸ªæž„é€ å‡½æ•°ï¼Œç”¨æˆ·ä¼ å…¥ä¸åŒçš„å‚æ•°æ¥è°ƒç”¨ç›¸åº”çš„æž„é€ å‡½æ•°ï¼Œä»Žè€Œåˆ›å»ºå¯¹è±¡ã€‚è€Œæˆ‘ä»¬ä»Žæž„é€ å‡½æ•°å’Œå‚æ•°ä¹Ÿè®¸çœ‹ä¸å‡ºå·®å¼‚ï¼Œå¦‚æžœå°†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å°è£…åœ¨å·¥åŽ‚ç±»ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥æä¾›ä¸€ç³»åˆ—åå­—å®Œå…¨ä¸åŒçš„å·¥åŽ‚æ–¹æ³•ï¼Œæ¯ä¸ªå·¥åŽ‚æ–¹æ³•å¯¹åº”ä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œè¿™æ ·å¯è¯»æ€§æ›´é«˜ã€‚ å·¥åŽ‚æ¨¡å¼çš„åˆ†ç±»æ ¹æ®ä¸šåŠ¡åœºæ™¯çš„ä¸åŒä¼šæœ‰ä¸åŒçš„å®žçŽ°æ–¹å¼ã€‚ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š ç®€å•å·¥åŽ‚ å·¥åŽ‚æ–¹æ³• æŠ½è±¡å·¥åŽ‚ è¿™ä¸‰ç§æ–¹å¼ä»Žç®€å•åˆ°æŠ½è±¡ï¼Œå®žçŽ°æ–¹å¼ä¹Ÿæ˜¯è¶Šæ¥è¶Šå¤æ‚ã€‚ ç®€å•å·¥åŽ‚ç®€å•å·¥åŽ‚æ¨¡å¼åŠŸèƒ½ç±»çš„ç¼–å†™æ­¥éª¤å¦‚ä¸‹ï¼š ç¼–å†™æŠ½è±¡äº§å“æŽ¥å£ ç¼–å†™æŽ¥å£å®žçŽ°ç±»ï¼Œå³å…·ä½“äº§å“å­ç±» ç¼–å†™ç®€å•å·¥åŽ‚ç±»ç®€å•å·¥åŽ‚ç±»æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»ï¼Œä¸æ˜¯æŽ¥å£æˆ–æŠ½è±¡ç±»ã€‚å…¶ä¸­æœ‰ä¸€ä¸ª create() æ–¹æ³•ï¼Œåˆ©ç”¨ if..else æˆ– switch å¼€å…³åˆ›å»ºæ‰€éœ€äº§å“å¹¶è¿”å›žã€‚ ä½¿ç”¨ç®€å•å·¥åŽ‚æ—¶ï¼Œé€šå¸¸ä¸ç”¨åˆ›å»ºç®€å•å·¥åŽ‚ç±»çš„å®žä¾‹ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦ï¼Œå› æ­¤å¯ä»¥æŠŠç®€å•å·¥åŽ‚ç±»å®žçŽ°æˆä¸€ä¸ªå·¥å…·ç±»ï¼Œcreate() ä½œä¸ºé™æ€æ–¹æ³•å°±å¯ä»¥äº†ã€‚å› æ­¤ï¼Œç®€å•å·¥åŽ‚é€šå¸¸ä¹Ÿå«é™æ€å·¥åŽ‚ã€‚å¦‚æžœä¸æƒ³è®©å®¢æˆ·ç«¯åˆ›å»ºç®€å•å·¥åŽ‚ç±»ï¼Œå¯ä»¥æŠŠç®€å•å·¥åŽ‚çš„æž„é€ æ–¹æ³•ç§æœ‰åŒ–ã€‚æ¥çœ‹ä¸€ä¸‹ç¤ºä¾‹ä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334public interface Car &#123; // ...&#125;public class BigCar implements Car &#123; // ...&#125;public class MidCar implements Car &#123; // ...&#125;public class SmallCar implements Car &#123; // ...&#125;public class CarSimpleFactory &#123; public static final String BIGTYPE = "bigtype"; public static final String MIDTYPE = "midtype"; public static final String SmallType = "smalltype"; // ç§æœ‰åŒ–æž„é€ æ–¹æ³• private CarSimpleFactory() &#123;&#125; public static Car create(String type) &#123; if (type.equals(BIGTYPE)) &#123; return new BigCar(); &#125; else if (type.equals(MIDTYPE)) &#123; return new MidCar(); &#125; else &#123; return new SmallCar(); &#125; &#125;&#125; ä»¥ä¸Šè¿™æ®µä»£ç ï¼Œå…¶å®žå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚å¦‚æžœä¸€ä¸ªéœ€æ±‚æ¥äº†ï¼Œéœ€è¦å¢žåŠ ä¸€ä¸ª Car ç±»åž‹ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç®€å•å·¥åŽ‚ä¸­å†æ·»åŠ  switch / if åˆ¤æ–­ï¼Œè¿™æ ·ä¼šå¯¼è‡´è¿™ä¸ªå·¥åŽ‚ç±»å¯èƒ½éžå¸¸é•¿ï¼Œå„ç§åˆ¤æ–­å…¨éƒ½æŒ¤åœ¨ä¸€èµ·ï¼Œç»™æ‰©å±•è·Ÿç»´æŠ¤å¸¦æ¥å¾ˆå¤šéº»çƒ¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº§å“å’Œå·¥åŽ‚ç»‘å®šåœ¨äº†ä¸€èµ·ï¼Œæ²¡æœ‰å®Œå…¨è§£è€¦ã€‚ æœ‰è§£å†³æ–¹æ¡ˆå—ï¼Ÿå½“ç„¶æœ‰ï¼Œç»§ç»­å¾€ä¸‹è¯»å°±çŸ¥é“äº†ã€‚ å·¥åŽ‚æ–¹æ³•å·¥åŽ‚æ¨¡å¼åŠŸèƒ½ç±»çš„ç¼–å†™æ­¥éª¤å¦‚ä¸‹ï¼š ç¼–å†™æŠ½è±¡äº§å“æŽ¥å£ ç¼–å†™æŽ¥å£å®žçŽ°ç±»ï¼Œå³å…·ä½“äº§å“å­ç±» ç¼–å†™æŠ½è±¡å·¥åŽ‚ç±»ï¼ˆæˆ–æŽ¥å£ï¼‰ ç¼–å†™å…·ä½“å·¥åŽ‚å­ç±» å·¥åŽ‚æ¨¡å¼æŠŠç®€å•å·¥åŽ‚ä¸­å…·ä½“çš„å·¥åŽ‚ç±»åˆ’åˆ†æˆä¸¤å±‚ï¼š æŠ½è±¡å·¥åŽ‚å±‚ å…·ä½“å·¥åŽ‚å­ç±»å±‚ å·¥åŽ‚æ–¹æ³•æ›´æ˜“äºŽè½¯ä»¶çš„äºŒæ¬¡å¼€å‘åŠç»´æŠ¤ã€‚å½“éœ€æ±‚å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªéœ€è¦å¢žåŠ ã€åˆ é™¤ç›¸åº”çš„ç±»ï¼Œè€Œä¸ç”¨ä¿®æ”¹å·²æœ‰çš„ç±»ã€‚å¯ä»¥çœ‹ä¸‹æ–¹ç¤ºä¾‹ä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546public interface Car &#123; // ...&#125;public class BigCar implements Car &#123; // ...&#125;public class MidCar implements Car &#123; // ...&#125;public class SmallCar implements Car &#123; // ...&#125;// æŠ½è±¡å·¥åŽ‚ç±»public abstract class AbstractFactory &#123; public abstract Car create();&#125;public class BigCarFactory extends AbstractFactory &#123; public Car create() &#123; return new BigCar(); &#125;&#125;public class MidCarFactory extends AbstractFactory &#123; public Car create() &#123; return new MidCar(); &#125;&#125;public class SmallCarFactory extends AbstractFactory &#123; public Car create() &#123; return new SmallCar(); &#125;&#125;// æµ‹è¯•ç±» CarTest.javapublic class CarTest &#123; public static void main(String[] args) &#123; AbstractFactory factory = new BigCarFactory(); BigCar bigCar = factory.create(); &#125;&#125; æŠ½è±¡å·¥åŽ‚ä¸€èˆ¬æ¥è¯´ï¼Œç®€å•å·¥åŽ‚ã€å·¥åŽ‚æ–¹æ³•æ¨¡å¼æ˜¯å•äº§å“ç³»çš„ï¼Œè€ŒæŠ½è±¡æ–¹æ³•æ˜¯å¤šäº§å“ç³»çš„ã€‚ä»Žæœ¬è´¨ä¸Šçœ‹ï¼ŒæŠ½è±¡å·¥åŽ‚ã€å·¥åŽ‚æ¨¡å¼æ˜¯ç»Ÿä¸€çš„ã€‚ æŠ½è±¡å·¥åŽ‚æ¨¡å¼åŠŸèƒ½ç±»çš„ç¼–å†™æ­¥éª¤å¦‚ä¸‹ï¼š ç¼–å†™æŠ½è±¡äº§å“æŽ¥å£ ç¼–å†™å…·ä½“äº§å“å­ç±» ç¼–å†™æŠ½è±¡å·¥åŽ‚ç±»ï¼ˆæˆ–æŽ¥å£ï¼‰ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ª create() æ–¹æ³•ï¼Œåˆ†åˆ«è¿”å›žä¸åŒå¯¹è±¡ ç¼–å†™å…·ä½“å·¥åŽ‚å­ç±» çœ‹ä¸‹æ–¹ç¤ºä¾‹ä»£ç ï¼Œåº”è¯¥å°±æ¸…æ¥šäº†ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445public interface Car &#123;&#125;public class BigCar implements Car &#123;&#125;public class MidCar implements Car &#123;&#125;public class SmallCar implements Car &#123;&#125;public interface Bus &#123;&#125;public class BigBus implements Bus &#123;&#125;public class MidBus implements Bus &#123;&#125;public class SmallBus implements Bus &#123;&#125;// æŠ½è±¡å·¥åŽ‚ç±»ï¼Œæœ‰ 2 ä¸ª create() æ–¹æ³•public abstract class AbstractFactory &#123; public abstract Car createCar(); public abstract Bus createBus();&#125;public class BigFactory extends AbstractFactory &#123; public Car createCar() &#123; return new BigCar(); &#125; public Bus createBus() &#123; return new BigBus(); &#125;&#125;public class MidFactory extends AbstractFactory &#123; public Car createCar() &#123; return new MidCar(); &#125; public class createBus() &#123; return new MidBus(); &#125;&#125;public class SmallFactory extends AbstractFactory &#123; public Car createCar() &#123; return new SmallCar(); &#125; public Bus createBus() &#123; return new SmallBus(); &#125;&#125; å°ç»“ ç®€å•å·¥åŽ‚é€šè¿‡ä¼ å…¥çš„æ ‡è¯†æ¥ç”Ÿäº§äº§å“ï¼Œä¸åŒäº§å“éƒ½åœ¨åŒä¸€ä¸ªå·¥åŽ‚ä¸­ç”Ÿäº§ï¼Œæ‰©å±•å’Œç»´æŠ¤è¾ƒéº»çƒ¦ã€‚ å·¥åŽ‚æ¨¡å¼æ— æ³•è§£å†³å¤šäº§å“ç³»çš„é—®é¢˜ã€‚ æŠ½è±¡å·¥åŽ‚æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå·¥åŽ‚ç”Ÿäº§å¤šä¸ªäº§å“ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªäº§å“ç³»ã€‚ æŽ¥å£å’ŒæŠ½è±¡ç±»éƒ½èƒ½ç”¨æ¥è¡¨è¾¾æŠ½è±¡å·¥åŽ‚æˆ–æŠ½è±¡äº§å“ï¼Œé‚£ä¹ˆå®ƒä»¬æœ‰ä½•åŒºåˆ«ï¼ŸðŸ‘‡æŠ½è±¡ç±»åå‘äºŽå±žæ€§çš„æŠ½è±¡ï¼ŒæŽ¥å£åå‘äºŽè¡Œä¸ºçš„è§„èŒƒä¸Žç»Ÿä¸€ã€‚ä½¿ç”¨æŽ¥å£æœ‰æ›´å¥½çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ›´åŠ çµæ´»å®žçŽ°æ¾æ•£è€¦åˆã€‚ å‚è€ƒèµ„æ–™ðŸ‘‰ ã€ŠJava è®¾è®¡æ¨¡å¼åŠåº”ç”¨æ¡ˆä¾‹åˆ†æžã€‹ðŸ‘‰ ã€Šåˆ›å»ºå¯¹è±¡ä¸Žä½¿ç”¨å¯¹è±¡â€”â€”è°ˆè°ˆå·¥åŽ‚çš„ä½œç”¨ã€‹ðŸ‘‰ ã€Šé¢è¯•è¢«é—®è®¾è®¡æ¨¡å¼ï¼Ÿä¸è¦æ€•çœ‹è¿™é‡Œï¼šå·¥åŽ‚æ¨¡å¼ã€‹]]></content>
      <categories>
        <category>Design Pattern</category>
      </categories>
      <tags>
        <tag>factory</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java å¹¶å‘ç³»åˆ—â€”â€”CAS æ“ä½œ]]></title>
    <url>%2F2018%2F07%2F16%2Fcas%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡å±žè¯‘æ–‡ï¼ŒåŽŸæ–‡é“¾æŽ¥è§æ–‡æœ«ã€‚ CASï¼ˆCompare and Swap, æ¯”è¾ƒå’Œæ›¿æ¢ï¼‰æ˜¯è®¾è®¡å¹¶å‘ç®—æ³•ç»å¸¸ä¼šç”¨åˆ°çš„æŠ€æœ¯ã€‚CAS æ˜¯å°†é¢„æœŸå€¼ä¸Žå˜é‡çš„å…·ä½“å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœç›¸ç­‰ï¼Œåˆ™å°†å˜é‡çš„å€¼æ›¿æ¢ä¸ºæ–°çš„å€¼ã€‚æ¯”è¾ƒå’Œæ›¿æ¢å¯èƒ½å¬èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œä½†ä¸€æ—¦ç†è§£å®ƒï¼Œå…¶å®žç›¸å½“ç®€å•ðŸ˜€ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å†è¯¦ç»†è¯´æ˜Žä¸€ä¸‹è¿™ä¸ªä¸»é¢˜å§ã€‚ åº”ç”¨åœºæ™¯ç¨‹åºå’Œå¹¶å‘ç®—æ³•ä¸­ç‰¹åˆ«å¸¸è§çš„æ¨¡å¼æ˜¯check and actæ¨¡å¼ã€‚å®ƒå…ˆæ£€æŸ¥å˜é‡çš„å€¼ï¼Œç„¶åŽæ ¹æ®è¯¥å€¼è¿›è¡Œæ“ä½œã€‚è¿™å„¿æœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š12345678910class MyLock &#123; private boolean locked = false; public boolean lock() &#123; if(!locked) &#123; locked = true; return true; &#125; return false; &#125;&#125; å¦‚æžœåœ¨å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ­¤ä»£ç ä¼šå‡ºçŽ°å¾ˆå¤šé”™è¯¯ï¼Œä½†è¯·æš‚æ—¶å¿½ç•¥å®ƒã€‚ å¦‚ä½ æ‰€è§ï¼Œlock() æ–¹æ³•é¦–å…ˆæ£€æŸ¥(check) locked æˆå‘˜å˜é‡æ˜¯å¦ä¸º falseï¼Œè‹¥æ˜¯ï¼Œå°† locked å€¼æ”¹(act)ä¸º trueã€‚ å¦‚æžœå¤šä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®åŒä¸€ä¸ª MyLock å®žä¾‹ï¼Œåˆ™ lock() æ–¹æ³•æ— æ³•ä¿è¯ä¸Šè¿°åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚å¦‚æžœçº¿ç¨‹ A æ£€æŸ¥ locked å¹¶ä¸”çœ‹åˆ°å€¼ä¸º falseï¼Œçº¿ç¨‹ B ä¹Ÿå¯ä»¥åœ¨å®Œå…¨ç›¸åŒçš„æ—¶é—´ï¼ˆæˆ–è€…åœ¨çº¿ç¨‹ A å°† locked ä¿®æ”¹ä¸º true ä¹‹å‰ï¼‰æ£€æŸ¥è¯¥å€¼ã€‚è¿™æ ·ï¼Œçº¿ç¨‹ Aã€Béƒ½çœ‹åˆ° locked ä¸º falseï¼Œç„¶åŽä¸¤è€…éƒ½å°†åŸºäºŽè¯¥ä¿¡æ¯èµ·ä½œç”¨ã€‚ è¦åœ¨å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºä¸­æ­£å¸¸å·¥ä½œï¼Œcheck and act æ“ä½œå¿…é¡»æ˜¯åŽŸå­çš„ã€‚åŽŸå­æ„å‘³ç€checkå’ŒactåŠ¨ä½œä¸€èµ·ä½œä¸ºåŽŸå­ï¼ˆä¸å¯åˆ†å‰²ï¼‰ä»£ç å—æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆä¹‹å‰éƒ½ä¸å—å…¶ä»–çº¿ç¨‹çš„å¹²æ‰°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹å¯ä»¥åŒæ—¶æ‰§è¡ŒåŽŸå­ä»£ç å—ã€‚ è¿™æ˜¯å‰é¢çš„ä»£ç ç¤ºä¾‹ï¼Œä¸è¿‡è¿™é‡Œ lock() æ–¹æ³•ä½¿ç”¨ synchronized å…³é”®å­—è½¬æ¢ä¸ºåŽŸå­ä»£ç å—ï¼š12345678910class MyLock &#123; private boolean locked = false; public synchronized boolean lock() &#123; if(!locked) &#123; locked = true; return true; &#125; return false; &#125;&#125; çŽ°åœ¨ lock() æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤åœ¨åŒä¸€ä¸ª MyLock å®žä¾‹ä¸Šä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®ƒ ã€‚è¯¥ lock() æ–¹æ³•å®žé™…ä¸Šæ˜¯åŽŸå­çš„ã€‚ åŽŸå­ lock() æ–¹æ³•å®žé™…ä¸Šæ˜¯ CAS çš„ä¸€ä¸ªä¾‹å­ã€‚è¯¥ lock() æ–¹æ³• å°†å˜é‡ locked ä¸Žé¢„æœŸå€¼ false è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœç›¸ç­‰ï¼Œåˆ™å°†å˜é‡çš„å€¼æ›¿æ¢ä¸º trueã€‚ CAS ä½œä¸ºåŽŸå­æ“ä½œçŽ°ä»£ CPU å†…ç½®äº†å¯¹ CAS æ“ä½œçš„æ”¯æŒã€‚ä»Ž Java 5 å¼€å§‹ï¼Œå¯ä»¥é€šè¿‡ java.util.concurrent.atomic åŒ…ä¸­çš„ä¸€äº›æ–°åŽŸå­ç±»æ¥ä½¿ç”¨ CPU çš„è¿™äº›åŠŸèƒ½ã€‚ ä¸‹é¢ç”¨ä¸€ä¸ªç¤ºä¾‹æ¥è¯´æ˜Žå¦‚ä½•ä½¿ç”¨ AtomicBoolean ç±»å®žçŽ° lock() æ–¹æ³•ï¼š123456public static class MyLock &#123; private AtomicBoolean locked = new AtomicBoolean(false); public boolean lock() &#123; return locked.compareAndSet(false, true); &#125;&#125; æ³¨æ„ locked å˜é‡ä¸å†æ˜¯ boolean ç±»åž‹ è€Œæ˜¯ AtomicBoolean ç±»åž‹ã€‚æ­¤ç±»æœ‰ä¸€ä¸ª compareAndSet() å‡½æ•°ï¼Œå®ƒå°† AtomicBoolean å®žä¾‹çš„å€¼ä¸ŽæœŸæœ›å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœç›¸ç­‰ï¼Œåˆ™å°†å€¼ä¸Žæ–°å€¼æ›¿æ¢ã€‚ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­ï¼Œå®ƒæ¯”è¾ƒ locked çš„å€¼ï¼Œå¦‚æžœæ˜¯ falseï¼Œåˆ™è®¾ç½® AtomicBoolean çš„æ–°å€¼ä¸º trueã€‚ å¦‚æžœäº¤æ¢äº†å€¼ï¼Œåˆ™ compareAndSet() è¿”å›žtrueï¼Œå¦åˆ™è¿”å›ž falseã€‚ ä½¿ç”¨ Java 5+ é™„å¸¦çš„ CAS åŠŸèƒ½è€Œä¸æ˜¯å®žçŽ°è‡ªå·±çš„åŠŸèƒ½çš„ä¼˜ç‚¹æ˜¯ï¼ŒJava 5+ ä¸­å†…ç½®çš„ CAS å…è®¸æˆ‘ä»¬åˆ©ç”¨è¿è¡Œåº”ç”¨ç¨‹åºçš„ CPU çš„åŸºç¡€ CAS åŠŸèƒ½ï¼Œè¿™æ ·ä»£ç è¿è¡Œæ•ˆçŽ‡æ›´é«˜ã€‚ åŽŸæ–‡é“¾æŽ¥ðŸ‘‰ ã€ŠCompare and Swapã€‹]]></content>
      <categories>
        <category>Concurrence</category>
      </categories>
      <tags>
        <tag>cas</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java å¹¶å‘ç³»åˆ—â€”â€”æ·±å…¥ synchronized å…³é”®å­—]]></title>
    <url>%2F2018%2F07%2F15%2Fsynchronized%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨ Java å¹¶å‘ç¼–ç¨‹ä¸­ synchronized ä¸€ç›´æ˜¯ðŸ‘´å…ƒè€çº§è§’è‰²ï¼Œå¾ˆå¤šäººç§°å‘¼å®ƒä¸ºé‡é‡çº§é”ã€‚ä½†æ˜¯ï¼Œéšç€ JDK 1.6 å¯¹ synchronized è¿›è¡Œäº†å„ç§ä¼˜åŒ–åŽï¼Œæœ‰äº›æƒ…å†µä¸‹å®ƒå¹¶ä¸é‚£ä¹ˆç¬¨é‡äº†ã€‚ å®žçŽ°åŽŸç†synchronized å¯ä»¥å®žçŽ°åŒæ­¥ã€å†…å­˜å¯è§æ€§ã€åŽŸå­æ€§ã€‚ Java ä¸­æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ðŸ”’ï¼Œè¿™æ˜¯ synchronized å®žçŽ°åŒæ­¥çš„åŸºç¡€ï¼š å¯¹äºŽæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®žä¾‹å¯¹è±¡ å¯¹äºŽé™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„ Class å¯¹è±¡ å¯¹äºŽåŒæ­¥æ–¹æ³•ä»£ç å—ï¼Œé”æ˜¯ synchronized() æ‹¬å·é…ç½®çš„å¯¹è±¡ å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®åŒæ­¥ä»£ç å—æ—¶ï¼Œå®ƒé¦–å…ˆå¿…é¡»å¾—åˆ°é”ï¼Œé€€å‡ºæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶å¿…é¡»è¦é‡Šæ”¾é”ã€‚ ä»Ž JVM è§„èŒƒä¸­å¯ä»¥çœ‹åˆ° synchronized åœ¨ JVM é‡Œçš„å®žçŽ°åŽŸç†ï¼ŒJVM åŸºäºŽè¿›å…¥å’Œé€€å‡º Monitor å¯¹è±¡æ¥å®žçŽ°æ–¹æ³•åŒæ­¥å’Œä»£ç å—åŒæ­¥ï¼Œä½†ä¸¤è€…çš„å®žçŽ°ç»†èŠ‚ä¸åŒã€‚ ä»£ç å—åŒæ­¥ä½¿ç”¨ monitorenter å’Œ monitorexit æŒ‡ä»¤å®žçŽ°ã€‚ æ–¹æ³•åŒæ­¥ä¾é æ–¹æ³•ä¿®é¥°ç¬¦ä¸Šçš„ ACC_SYNCHRONIZED å®žçŽ°ã€‚ æ¥çœ‹ä¸€æ®µç®€å•ä»£ç ï¼š123456789public class SynchronizedTest &#123; // æ™®é€šåŒæ­¥æ–¹æ³• public synchronized void testSynchronizedMethod() &#123;&#125; // åŒæ­¥æ–¹æ³•ä»£ç å— public void testSynchronizedBlock() &#123; synchronized(SynchronizedTest.class) &#123;&#125; &#125;&#125; åœ¨ cmd ä½¿ç”¨ javap å‘½ä»¤ æŸ¥çœ‹ .class æ–‡ä»¶ä¿¡æ¯ï¼š1javap -v Synchronized.class å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºŽåŒæ­¥ä»£ç å—testSynchronizedBlockï¼Œmonitorenter æŒ‡ä»¤æ’å…¥åˆ°åŒæ­¥ä»£ç å—çš„å¼€å§‹ä½ç½®ï¼ˆè§ç¬¬ 9 è¡Œï¼‰ï¼Œmonitorexit æŒ‡ä»¤æ’å…¥åˆ°åŒæ­¥ä»£ç å—çš„ç»“æŸä½ç½®ï¼ˆè§ç¬¬ 11 è¡Œï¼‰ã€‚123456789101112131415161718public void testSynchronizedBlock(); descriptor: ()V flags: ACC_PUBLIC Code: stack=2, locals=3, args_size=1 0: ldc #2 // class SynchronizedTest 2: dup 3: astore_1 4: monitorenter 5: aload_1 6: monitorexit 7: goto 15 10: astore_2 11: aload_1 12: monitorexit 13: aload_2 14: athrow 15: return è€ŒåŒæ­¥æ–¹æ³•testSynchronizedMethodåˆ™ä¼šè¢«ç¿»è¯‘æˆæ™®é€šçš„æ–¹æ³•å’Œè¿”å›žæŒ‡ä»¤ã€‚åœ¨å­—èŠ‚ç å±‚é¢å¹¶æ²¡æœ‰ä»»ä½•ç‰¹åˆ«çš„æŒ‡ä»¤æ¥å®žçŽ°è¢« synchronized ä¿®é¥°çš„æ–¹æ³•ï¼Œè€Œåœ¨ .class æ–‡ä»¶çš„æ–¹æ³•è¡¨ä¸­å°†è¯¥æ–¹æ³•çš„ flags å­—æ®µçš„ ACC_SYNCHRONIZED æ ‡å¿—ä½ç½® 1ï¼ˆè§ç¬¬ 3 è¡Œï¼‰ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯åŒæ­¥æ–¹æ³•å¹¶ä½¿ç”¨è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡æˆ–è¯¥æ–¹æ³•æ‰€å±žçš„ Class å¯¹è±¡è¡¨ç¤º Klass åšä¸ºé”å¯¹è±¡ã€‚12345678public synchronized void testSynchronizedMethod(); descriptor: ()V flags: ACC_PUBLIC, ACC_SYNCHRONIZED Code: stack=0, locals=1, args_size=1 0: return LineNumberTable: line 5: 0 Java å¯¹è±¡å¤´synchronized ç”¨çš„é”å­˜å‚¨åœ¨ Java å¯¹è±¡å¤´é‡Œã€‚å¦‚æžœå¯¹è±¡æ˜¯æ•°ç»„ç±»åž‹ï¼Œåˆ™è™šæ‹Ÿæœºç”¨ 3 ä¸ªå­—å®½å­˜å‚¨å¯¹è±¡å¤´ï¼Œå¦‚æžœå¯¹è±¡æ˜¯éžæ•°ç»„ç±»åž‹ï¼Œåˆ™ç”¨ 2 å­—å®½å­˜å‚¨å¯¹è±¡å¤´ã€‚åœ¨ 32 ä½è™šæ‹Ÿæœºä¸­ï¼Œ1 å­—å®½ç­‰äºŽ 4 å­—èŠ‚ï¼Œå³ 32 bitã€‚ Mark Word ç”¨äºŽå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹ IDï¼Œåå‘æ—¶é—´æˆ³ç­‰ã€‚ åœ¨è¿è¡ŒæœŸé—´ï¼ŒMark Word é‡Œå­˜å‚¨çš„æ•°æ®ä¼šéšç€é”æ ‡å¿—ä½çš„å˜åŒ–è€Œå˜åŒ–ã€‚ Monitorå¯¹äºŽ Monitorï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªåŒæ­¥å·¥å…·ï¼Œä¹Ÿå¯ä»¥æè¿°ä¸ºä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œå®ƒé€šå¸¸è¢«æè¿°ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ æ¯ä¸ª Java å¯¹è±¡éƒ½å¯ä»¥æˆä¸º Monitorï¼ŒMonitor æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå¯ç”¨ monitor record åˆ—è¡¨ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªå…¨å±€çš„å¯ç”¨åˆ—è¡¨ã€‚æ¯ä¸€ä¸ªè¢«é”ä½çš„å¯¹è±¡éƒ½ä¼šå’Œä¸€ä¸ª Monitor å…³è”ï¼ˆå¯¹è±¡å¤´çš„ Mark Word ä¸­çš„ LockWord æŒ‡å‘ Monitor çš„èµ·å§‹åœ°å€ï¼‰ï¼ŒåŒæ—¶ Monitor ä¸­æœ‰ä¸€ä¸ª Owner å­—æ®µå­˜æ”¾æ‹¥æœ‰è¯¥é”çš„çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ï¼Œè¡¨ç¤ºè¯¥é”è¢«è¿™ä¸ªçº¿ç¨‹å ç”¨ã€‚ é”çš„å‡çº§ä¸Žå¯¹æ¯”å‰é¢æåˆ°ï¼ŒJDK 1.6 å¯¹é”çš„å®žçŽ°è¿›è¡Œäº†å„ç§ä¼˜åŒ–ã€‚ä¸ºäº†å‡å°‘èŽ·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¼•å…¥äº†â€œåå‘é”â€å’Œâ€œè½»é‡çº§é”â€ï¼Œåœ¨ JDK 1.6 ä¸­ï¼Œé”ä¸€å…±æœ‰ 4 ç§çŠ¶æ€ï¼š æ— é”çŠ¶æ€ åå‘é”çŠ¶æ€ è½»é‡çº§é”çŠ¶æ€ é‡é‡çº§é”çŠ¶æ€ è¿™å‡ ä¸ªçŠ¶æ€ä¼šéšç€ç«žäº‰æƒ…å†µé€æ¸å‡çº§ã€‚é”å¯å‡çº§ä½†ä¸å¯é™çº§ï¼Œæ„å‘³ç€åå‘é”å‡çº§æˆè½»é‡çº§é”åŽä¸èƒ½é™çº§ä¸ºåå‘é”ã€‚è¿™ç§ç­–ç•¥ï¼Œç›®çš„æ˜¯ä¸ºäº†æé«˜èŽ·å¾—é”å’Œé‡Šæ”¾é”çš„æ•ˆçŽ‡ã€‚ å‚è€ƒèµ„æ–™ðŸ‘‰ ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹ðŸ‘‰ ã€Šæ­»ç£• Java å¹¶å‘ï¼šæ·±å…¥åˆ†æž synchronized çš„å®žçŽ°åŽŸç†ã€‹]]></content>
      <categories>
        <category>Concurrence</category>
      </categories>
      <tags>
        <tag>synchronized</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java å¹¶å‘ç³»åˆ—â€”â€”æ·±å…¥ volatile å…³é”®å­—]]></title>
    <url>%2F2018%2F07%2F15%2Fvolatile%2F</url>
    <content type="text"><![CDATA[Java å†…å­˜æ¨¡åž‹åœ¨ Java é‡Œï¼Œå¦‚æžœä¸€ä¸ªå­—æ®µè¢«å£°æ˜Žæˆ volatileï¼ŒJava çº¿ç¨‹å†…å­˜æ¨¡åž‹èƒ½ç¡®ä¿æ‰€æœ‰çº¿ç¨‹çœ‹åˆ°çš„è¿™ä¸ªå­—æ®µçš„å€¼æ˜¯ä¸€è‡´çš„ã€‚ å…ˆæ¥äº†è§£ä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡åž‹ã€‚ðŸ‘‡ Java å†…å­˜æ¨¡åž‹ï¼ˆç®€ç§° JMMï¼‰æŽ§åˆ¶äº†çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ŒJMM å†³å®šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥ä½•æ—¶å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ã€‚ ä»ŽæŠ½è±¡çš„å±‚é¢æ¥çœ‹ï¼ŒJMM å®šä¹‰äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„æŠ½è±¡å…³ç³»ï¼šçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„æœ¬åœ°å†…å­˜ï¼Œæœ¬åœ°å†…å­˜å­˜å‚¨ç€å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬åœ°å†…å­˜åªæ˜¯ JMM çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œä¸æ˜¯çœŸå®žå­˜åœ¨ã€‚ è‹¥çº¿ç¨‹ Aã€B ä¹‹é—´è¦é€šä¿¡ï¼Œå¿…é¡»ç»åŽ†ä»¥ä¸‹ä¸¤æ­¥ï¼š çº¿ç¨‹ A æŠŠæœ¬åœ°å†…å­˜ A ä¸­æ›´æ–°çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ã€‚ çº¿ç¨‹ B åˆ°ä¸»å†…å­˜ä¸­åŒºè¯»å–çº¿ç¨‹ A ä¹‹é—´æ›´æ–°è¿‡çš„å…±äº«å˜é‡ã€‚ ä»Žæ•´ä½“ä¸Šçœ‹ï¼Œä»¥ä¸Šæ­¥éª¤å®žè´¨æ˜¯çº¿ç¨‹ A å‘ B å‘é€æ¶ˆæ¯ï¼Œè€Œä¸”è¿™ä¸ªé€šä¿¡è¿‡ç¨‹å¿…é¡»è¦ç»è¿‡ä¸»å†…å­˜ã€‚JMM é€šè¿‡æŽ§åˆ¶ä¸»å†…å­˜ä¸Žæ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°å†…å­˜ä¹‹é—´çš„äº¤äº’ï¼Œæ¥ä¿è¯å†…å­˜å¯è§æ€§ã€‚ volatile åº•å±‚å®žçŽ°åŽŸç†æˆ‘ä»¬å¯ä»¥ä»Žæ±‡ç¼–ä»£ç å±‚é¢æ¥çœ‹ volatile å˜é‡ã€‚ å¯¹äºŽä¸€è¡Œ Java ä»£ç ï¼š1instance = new Singleton(); //instance æ˜¯ volatile å˜é‡ åœ¨ X86 å¤„ç†å™¨ä¸‹ï¼Œè½¬æ¢æˆæ±‡ç¼–ä»£ç ï¼Œä¼šå¤šå‡ºä¸€è¡Œå¸¦æœ‰ Lock å‰ç¼€çš„æŒ‡ä»¤ï¼š10x01a3de1d: movb $0Ã—0,0Ã—1104800(%esi);0x01a3de24: lock addl $0Ã—0,(%esp); Lock å‰ç¼€çš„æŒ‡ä»¤åœ¨å¤šæ ¸å¤„ç†å™¨ä¸‹ä¼šå¼•å‘ä¸¤ä¸ªåŠ¨ä½œï¼š å°†å½“å‰å¤„ç†å™¨ç¼“å­˜è¡Œçš„æ•°æ®å†™å›žåˆ°ç³»ç»Ÿå†…å­˜ã€‚ è¿™ä¸ªå†™å›žå†…å­˜çš„æ“ä½œä¼šä½¿å…¶ä»– CPU é‡Œç¼“å­˜äº†è¯¥å†…å­˜åœ°å€çš„æ•°æ®æ— æ•ˆã€‚ ä¸ºäº†æé«˜å¤„ç†é€Ÿåº¦ï¼Œå¤„ç†å™¨ä¸ä¸Žå†…å­˜ç›´æŽ¥é€šä¿¡ï¼Œè€Œæ˜¯å…ˆå°†ç³»ç»Ÿå†…å­˜çš„æ•°æ®è¯»åˆ°æœ¬åœ°ç¼“å­˜åŽå†è¿›è¡Œæ“ä½œã€‚å¦‚æžœå¯¹å£°æ˜Žäº† volatile çš„å˜é‡è¿›è¡Œâœå†™æ“ä½œï¼ŒJVM ä¼šå‘å¤„ç†å™¨å‘é€ä¸€æ¡ðŸ”’ Lock å‰ç¼€çš„æŒ‡ä»¤ï¼Œå°†è¿™ä¸ªå˜é‡æ‰€åœ¨ç¼“å­˜è¡Œçš„æ•°æ®å†™å›žåˆ°ç³»ç»Ÿå†…å­˜ã€‚æ­¤æ—¶å…¶ä»–å¤„ç†å™¨ç¼“å­˜çš„å€¼è¿˜æ˜¯æ—§çš„ï¼Œè‹¥å†æ‰§è¡Œè®¡ç®—æ“ä½œå°±ä¼šå‡ºçŽ°é—®é¢˜ã€‚ ä¸ºäº†ä¿è¯å„ä¸ªå¤„ç†å™¨çš„ç¼“å­˜æ˜¯ä¸€è‡´çš„ï¼Œä¼šå®žçŽ°ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œæ¯ä¸ªå¤„ç†å™¨é€šè¿‡å—…æŽ¢åœ¨æ€»çº¿ä¸Šä¼ æ’­çš„æ•°æ®æ¥æ£€æŸ¥è‡ªå·±å½“å‰ç¼“å­˜çš„å€¼æ˜¯å¦è¿‡æœŸï¼Œå½“å¤„ç†å™¨å‘çŽ°è‡ªå·±ç¼“å­˜è¡Œå¯¹åº”çš„å†…å­˜åœ°å€è¢«ä¿®æ”¹ï¼Œå°±ä¼šå°†å½“å‰å¤„ç†å™¨çš„ç¼“å­˜è¡Œè®¾ç½®æˆæ— æ•ˆçŠ¶æ€ðŸš©ï¼Œå½“å¤„ç†å™¨å¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šé‡æ–°ä»Žç³»ç»Ÿå†…å­˜ä¸­æŠŠæ•°æ®è¯»åˆ°å¤„ç†å™¨ç¼“å­˜é‡Œã€‚ volatile ç‰¹æ€§ å¯è§æ€§ï¼šå¯¹äºŽä¸€ä¸ª volatile å˜é‡çš„è¯»ï¼Œåœ¨ä»»æ„çº¿ç¨‹æ€»æ˜¯èƒ½çœ‹åˆ°å¯¹è¿™ä¸ª volatile å˜é‡çš„æœ€åŽå†™å…¥ã€‚ åŽŸå­æ€§ï¼šå¯¹ä»»æ„å•ä¸ª volatile å˜é‡çš„è¯»/å†™å…·æœ‰åŽŸå­æ€§ï¼Œä½†ç±»åž‹ volatile++ è¿™ç§å¤åˆæ“ä½œä¸å…·æœ‰åŽŸå­æ€§ã€‚ å‚è€ƒèµ„æ–™ðŸ‘‰ ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹]]></content>
      <categories>
        <category>Concurrence</category>
      </categories>
      <tags>
        <tag>volatile</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java å¹¶å‘ç³»åˆ—â€”â€”æŽ§åˆ¶å¤šçº¿ç¨‹çš„æ‰§è¡Œé¡ºåº]]></title>
    <url>%2F2018%2F07%2F13%2Fmulti-thread-execution-sequence%2F</url>
    <content type="text"><![CDATA[å‰è¨€å¤šçº¿ç¨‹åœ¨å¹¶å‘çŽ¯å¢ƒä¸­çš„æ­£å¸¸æ‰§è¡Œé¡ºåºæ˜¯éšæœºæ— åºçš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå¯åŠ¨å¤šä¸ªçº¿ç¨‹æ—¶ï¼Œçº¿ç¨‹å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰å¾… CPU çš„èµ„æºè°ƒåº¦ï¼ŒCPU è°ƒåº¦åˆ°å“ªä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹å°±å¼€å§‹æ‰§è¡Œï¼Œå› æ­¤ï¼Œå¤šçº¿ç¨‹è¿è¡Œå…·æœ‰éšæœºæ€§ã€‚ æƒ³è®©å¤šçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºå˜å¾—å¯æŽ§ï¼Œå¸¸è§çš„æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ã€‚ join() æ–¹æ³•thread.join() æ˜¯æŠŠæŒ‡å®šçš„çº¿ç¨‹åŠ å…¥åˆ°å½“å‰çº¿ç¨‹ï¼Œå®ƒå¯ä»¥å°†ä¸¤ä¸ªäº¤æ›¿æ‰§è¡Œçš„çº¿ç¨‹åˆå¹¶ä¸ºé¡ºåºæ‰§è¡Œçš„çº¿ç¨‹ã€‚12345678910111213141516171819202122232425262728293031public class ThreadOrderTest &#123; static Thread t1 = new Thread(() -&gt; &#123; System.out.println("Thread1"); &#125;); static Thread t2 = new Thread(() -&gt; &#123; System.out.println("Thread2"); &#125;); static Thread t3 = new Thread(() -&gt; &#123; System.out.println("Thread3"); &#125;); public static void main(String[] args) throws InterruptedException &#123; t1.start(); t1.join(); t2.start(); t2.join(); t3.start(); t3.join(); /** * ç¨‹åºæ‰“å°ç»“æžœï¼š * Thread1 * Thread2 * Thread3 */ &#125;&#125; join() æ–¹æ³•åº•å±‚å…¶å®žæ˜¯é€šè¿‡è°ƒç”¨çº¿ç¨‹çš„ wait() æ–¹æ³•æ¥è¾¾åˆ°åŒæ­¥çš„ç›®çš„ã€‚è§ä¸‹æ–¹æºç ï¼š ä¾‹å¦‚ï¼Œä¸»çº¿ç¨‹ä¸­è°ƒç”¨äº† t1 çº¿ç¨‹çš„ join() æ–¹æ³•ï¼Œåˆ™ç›¸å½“äºŽä¸»çº¿ç¨‹è°ƒç”¨äº† t1 çº¿ç¨‹çš„ wait() æ–¹æ³•ï¼Œåœ¨è°ƒç”¨äº† t1 çº¿ç¨‹çš„ wait() æ–¹æ³•åŽï¼Œä¸»çº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡žçŠ¶æ€ã€‚å½“ t1 çº¿ç¨‹æ‰§è¡Œå®Œï¼ˆæˆ–è€…åˆ°è¾¾ç­‰å¾…æ—¶é—´ï¼‰ï¼Œt1 çº¿ç¨‹ä¼šè‡ªåŠ¨è°ƒç”¨è‡ªèº«çš„ notifyAll() æ–¹æ³•å”¤é†’ä¸»çº¿ç¨‹ï¼Œä»Žè€Œè¾¾åˆ°åŒæ­¥çš„ç›®çš„ã€‚123456789101112131415161718192021222324public final synchronized void join(long millis) throws InterruptedException &#123; long base = System.currentTimeMillis(); long now = 0; if (millis &lt; 0) &#123; throw new IllegalArgumentException("timeout value is negative"); &#125; if (millis == 0) &#123; while (isAlive()) &#123; wait(0); &#125; &#125; else &#123; while (isAlive()) &#123; long delay = millis - now; if (delay &lt;= 0) &#123; break; &#125; wait(delay); now = System.currentTimeMillis() - base; &#125; &#125; &#125; Executors.newSingleThreadExecutor()åˆ©ç”¨å¹¶å‘åŒ…é‡Œ Executors çš„ newSingleThreadExecutor() äº§ç”Ÿä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œè€Œè¿™ä¸ªçº¿ç¨‹æ± çš„åº•å±‚åŽŸç†å°±æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—ã€‚ä»£ç ä¸­ service.submit()ä¾æ¬¡æ·»åŠ äº† 3 ä¸ªçº¿ç¨‹ï¼ŒæŒ‰ç…§ FIFO çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºä¹Ÿå°±æ˜¯ Thread1.2.3 çš„æ‰§è¡Œç»“æžœã€‚ 1234567891011121314151617181920import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;public class ThreadOrderTest &#123; public static void main(String[] args) &#123; ExecutorService service = Executors.newSingleThreadExecutor(); service.submit(() -&gt; &#123; System.out.println("Thread1"); &#125;); service.submit(() -&gt; &#123; System.out.println("Thread2"); &#125;); service.submit(() -&gt; &#123; System.out.println("Thread3"); &#125;); service.shutdown(); &#125;&#125;]]></content>
      <categories>
        <category>Concurrence</category>
      </categories>
      <tags>
        <tag>multi-thread, sequence</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¿™ç¢Œçš„ä¸€å‘¨]]></title>
    <url>%2F2018%2F07%2F12%2Fbusy-week%2F</url>
    <content type="text"><![CDATA[è¿™å‘¨ä¸€åˆ°å‘¨å››ï¼Œæ¯å¤©éƒ½çº¦äº†ä¸€ä¸ªé¢è¯•ï¼Œéƒ½çº¦åœ¨ä¸‹åˆã€‚æ¯å¤©æ—©ä¸Šæ³¡åœ¨å›¾ä¹¦é¦†å¹ç€å†·æ°”çœ‹ä¹¦å­¦ä¹ ï¼Œä¸‹åˆé¡¶ç€å¤§çƒ­å¤©åˆ°å¤–é¢èµ´é¢è¯•ã€‚ æŒºå……å®žçš„ä¸€å‘¨ï¼Œæˆ‘çæƒœæ¯ä¸€æ¬¡é¢è¯•çš„æœºä¼šï¼Œæ¯ä¸€æ¬¡éƒ½èƒ½å‘çŽ°è‡ªèº«çš„ä¸è¶³ã€‚ ä»¥å‰çš„è‡ªå·±æœ‰ç‚¹å®³æ€•é¢è¯•ï¼Œè‡ªèº«ä¸æ˜¯å¾ˆå¥è°ˆï¼Œè§äººå®¹æ˜“å®³ç¾žï¼Œè‡ªæˆ‘ä»‹ç»æœ‰æ—¶éƒ½æ”¯æ”¯å¾å¾çš„ï¼›è€Œä¸”ä¹Ÿå¯¹è‡ªå·±æ²¡æœ‰ä¿¡å¿ƒï¼Œæ€»è§‰å¾—æœ‰å¥½å¤šä¸œè¥¿è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè‡ªå·±æ˜¯ä¸æ˜¯åº”è¯¥å‡†å¤‡å……åˆ†ä¹‹åŽå†æŠ•ç®€åŽ†é¢è¯•ã€‚è¿™ä¸€æ¬¡ç®—æ˜¯é¼“èµ·äº†å‹‡æ°”è¿ˆå¼€äº†è¿™ä¸€æ­¥ï¼Œä¹Ÿæ”¶åˆ°äº†å®žä¹  Offerï¼Œå¯¹è‡ªå·±æ›´æœ‰ä¿¡å¿ƒäº†ðŸ˜„ã€‚ æ˜Žå¤©æ²¡æœ‰é¢è¯•ï¼Œæ˜¯è¯¥å¥½å¥½æ€»ç»“ä¸€ä¸‹äº†ã€‚ æ™šä¸Šåˆ°å­¦æ ¡å¥èº«æˆ¿é”»ç‚¼äº†ä¸¤ä¸ªå°æ—¶ï¼Œç‰¹åˆ«ç´¯ã€‚å‰æ®µæ—¶é—´ä¸€ç›´æ²¡æœ‰é”»ç‚¼ï¼Œä½“èƒ½æœ‰æ‰€ä¸‹é™ï¼ŒæŽ¥ä¸‹æ¥è¦å¤šåŠ è¿åŠ¨äº†ã€‚ å¥½åƒæœ‰ç‚¹è¯­æ— ä¼¦æ¬¡â€¦â€¦å°±è¿™æ ·å§ï¼Œåˆšä»Žå¥èº«æˆ¿å›žæ¥ï¼Œç ç‚¹å­—ï¼Œæ­‡ä¸€ä¼šå„¿åŽæ´—ä¸ªæ¾¡ç¼“è§£ä¸€ä¸‹è¿åŠ¨ç–²åŠ³~]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£ HashMap åº•å±‚å®žçŽ°åŽŸç†]]></title>
    <url>%2F2018%2F07%2F11%2Flearn-hashmap%2F</url>
    <content type="text"><![CDATA[å‰è¨€é¢è¯•ä¸­ç»å¸¸ä¼šé‡åˆ° HashMap ç›¸å…³çš„é—®é¢˜ï¼Œä»¥å‰æ²¡æœ‰åšæ·±å…¥çš„ç ”ç©¶ï¼Œå¯¼è‡´åœ¨é¢è¯•è¿‡ç¨‹ä¸­æ²¡èƒ½æŠŠåŽŸç†è·Ÿé¢è¯•å®˜è®²æ¸…æ¥šðŸ˜­ã€‚è¿™ä¸€æ¬¡å¿…é¡»å½»åº•å¼„æ‡‚æ‰è¡ŒâœŠã€‚ ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨å“ˆå¸Œè¡¨ä¹Ÿå«æ•£åˆ—è¡¨ï¼Œå®ƒçš„ä¸»å¹²å…¶å®žæ˜¯æ•°ç»„ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ ï¼Œåªéœ€è¦æ ¹æ®ä¸‹æ ‡å°±èƒ½ä¸€æ¬¡å®šä½åˆ°ï¼Œè€Œå“ˆå¸Œè¡¨æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸€ç‰¹æ€§ã€‚ ä¸¾ä¸ªæ —å­ðŸŒ°ï¼Œæˆ‘ä»¬è¦æ–°å¢žæˆ–æŸ¥æ‰¾æŸä¸ªå…ƒç´ ï¼Œåªè¦æŠŠå½“å‰å…ƒç´ çš„å…³é”®å­—é€šè¿‡æŸä¸ªå‡½æ•°æ˜ å°„åˆ°æ•°ç»„ä¸­çš„æŸä¸ªä½ç½®ï¼Œé€šè¿‡æ•°ç»„ä¸‹æ ‡çš„ä¸€æ¬¡å®šä½å°±èƒ½å®Œæˆæ“ä½œã€‚å³ï¼šä½ç½® = f(å…³é”®å­—)ã€‚f å‡½æ•°å…¶å®žå°±æ˜¯å“ˆå¸Œå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è®¾è®¡çš„å¥½åä¼šç›´æŽ¥å½±å“åˆ°å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚ å“ˆå¸Œå†²çªå¦‚æžœä¸¤ä¸ªä¸åŒçš„å…ƒç´ ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºçš„å®žé™…å­˜å‚¨åœ°å€ç›¸åŒï¼Œé‚£è¯¥æ€Žä¹ˆåŠžï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬å¯¹æŸä¸ªå…ƒç´ è¿›è¡Œå“ˆå¸Œè¿ç®—è€Œå¾—åˆ°ä¸€ä¸ªå­˜å‚¨åœ°å€ï¼Œç„¶åŽè¦è¿›è¡Œæ’å…¥ï¼Œå‘çŽ°æ­¤æ—¶è¯¥ä½ç½®å·²ç»è¢«å…¶ä»–å…ƒç´ â€œéœ¸å â€äº†ï¼Œè¿™å…¶å®žå°±æ˜¯æ‰€è°“çš„â€œå“ˆå¸Œå†²çªâ€ï¼Œä¹Ÿå«â€œå“ˆå¸Œç¢°æ’žâ€ðŸ‘Šã€‚ å‰é¢å·²ç»æåˆ°ï¼Œå“ˆå¸Œå‡½æ•°è®¾è®¡è‡³å…³é‡è¦ï¼Œä¸€ä¸ªå¥½çš„å“ˆå¸Œå‡½æ•°ä¼šå°½å¯èƒ½ä¿è¯è®¡ç®—ç®€å•å’Œæ•£åˆ—åœ°å€åˆ†å¸ƒå‡åŒ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹ä»»æ„ keyï¼Œf(key) å¯¹åº”ä¸åŒåœ°å€çš„æ¦‚çŽ‡ç›¸ç­‰ã€‚ä½†æ˜¯æ•°ç»„æ˜¯ä¸€å—è¿žç»­å›ºå®šé•¿åº¦çš„å†…å­˜ç©ºé—´ï¼Œå†å¥½çš„å“ˆå¸Œä¹Ÿæ— æ³•ä¿è¯å¾—åˆ°çš„å­˜å‚¨åœ°å€ç»å¯¹ä¸ä¼šå†²çªã€‚é‚£ä¹ˆå½“å‘ç”Ÿå“ˆå¸Œå†²çªï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ å¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ç§å¤„ç†æ–¹å¼ï¼š å¼€æ”¾å®šå€æ³•ï¼ˆå†æ•£åˆ—æ³•ï¼‰å½“ key å¯¹åº”çš„å“ˆå¸Œåœ°å€ p=f(key) å‡ºçŽ°å†²çªæ—¶ï¼Œä»¥ p ä¸ºåŸºç¡€ï¼Œäº§ç”Ÿå¦ä¸€ä¸ªå“ˆå¸Œåœ°å€ï¼Œè‹¥ä¾ç„¶å†²çªï¼Œç»§ç»­ä»¥ p ä¸ºåŸºç¡€ï¼Œäº§ç”Ÿå¦ä¸€ä¸ªå“ˆå¸Œåœ°å€ p2â€¦â€¦ç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªä¸å†²çªçš„å“ˆå¸Œåœ°å€ piï¼Œå°†å…ƒç´ å­˜å…¥å…¶ä¸­ã€‚è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªé€šç”¨çš„å†æ•£åˆ—å‡½æ•°å½¢å¼ï¼Œå…¶ä¸­ f(key) ä¸ºå“ˆå¸Œå‡½æ•°ï¼Œm ä¸ºè¡¨é•¿ï¼Œdi ä¸ºå¢žé‡åºåˆ—ã€‚å¢žé‡åºåˆ—çš„å–å€¼æ–¹å¼ä¸åŒï¼Œç›¸åº”çš„å†æ•£åˆ—æ–¹å¼ä¹Ÿä¸åŒï¼špi = (f(key) + di) % mï¼Œ(i = 1, 2, ..., n) å†å“ˆå¸Œæ³•è¿™ç§æ–¹å¼æ˜¯åŒæ—¶æž„é€ å¤šä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼Œå½“å“ˆå¸Œåœ°å€ f1(key) å‘ç”Ÿå†²çªæ—¶ï¼Œå†è®¡ç®— f2(key)â€¦â€¦ç›´åˆ°ä¸å†å‘ç”Ÿå†²çªã€‚è¿™ç§æ–¹å¼ä¸æ˜“äº§ç”Ÿèšé›†çŽ°è±¡ï¼Œä½†å¢žåŠ äº†è®¡ç®—çš„æ—¶é—´ã€‚ pi = f1(key)ï¼Œ(i = 1, 2, ..., k) é“¾åœ°å€æ³•è¿™ç§æ–¹å¼æ˜¯å°†æ‰€æœ‰å“ˆå¸Œåœ°å€ä¸º i çš„å…ƒç´ æž„æˆä¸€ä¸ªå•é“¾è¡¨ï¼Œå¹¶å°†å•é“¾è¡¨ä¸­çš„å¤´æŒ‡é’ˆå­˜åœ¨å“ˆå¸Œè¡¨çš„ç¬¬ i ä¸ªå•å…ƒä¸­ï¼Œå› æ­¤æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ä¸»è¦æ˜¯åœ¨é“¾è¡¨ä¸­è¿›è¡Œã€‚é“¾åœ°å€æ³•é€‚ç”¨äºŽç»å¸¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„æƒ…å†µã€‚HashMap å°±æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼ðŸ˜®ï¼Œæ•°ç»„ + é“¾è¡¨ã€‚ HashMap åŽŸç†åˆ†æžHashMap çš„ä¸»å¹²æ˜¯ä¸€ä¸ª Entry æ•°ç»„ã€‚Entry æ˜¯ HashMap çš„åŸºæœ¬ç»„æˆå•å…ƒï¼Œæ¯ä¸€ä¸ª Entry åŒ…å«ä¸€ä¸ª key-value é”®å€¼å¯¹ã€‚ ç®€å•æ¥è¯´ï¼ŒHashMap ç”±â€œæ•°ç»„ + é“¾è¡¨â€ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªï¼Œå¦‚æžœå®šä½åˆ°çš„æ•°ç»„ä½ç½®ä¸å«é“¾è¡¨ï¼ˆå³å½“å‰ entry çš„ next æŒ‡å‘ nullï¼‰,é‚£ä¹ˆå¯¹äºŽæŸ¥æ‰¾ï¼Œæ·»åŠ ç­‰æ“ä½œå¾ˆå¿«ï¼Œä»…éœ€ä¸€æ¬¡å¯»å€å³å¯ï¼›å¦‚æžœå®šä½åˆ°çš„æ•°ç»„åŒ…å«é“¾è¡¨ï¼Œå¯¹äºŽæ·»åŠ æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œé¦–å…ˆéåŽ†é“¾è¡¨ï¼Œå­˜åœ¨å³è¦†ç›–ï¼Œå¦åˆ™æ–°å¢žï¼›å¯¹äºŽæŸ¥æ‰¾æ“ä½œæ¥è®²ï¼ŒåŒæ ·éœ€è¦éåŽ†é“¾è¡¨ï¼Œç„¶åŽé€šè¿‡ key å¯¹è±¡çš„ equals æ–¹æ³•é€ä¸€æ¯”å¯¹æŸ¥æ‰¾ã€‚æ‰€ä»¥ï¼Œæ€§èƒ½è€ƒè™‘ï¼ŒHashMap ä¸­çš„é“¾è¡¨å‡ºçŽ°è¶Šå°‘ï¼Œæ€§èƒ½æ‰ä¼šè¶Šå¥½ã€‚ HashMap çš„åˆå§‹åŒ–åœ¨ HashMap å®žä¾‹åŒ–æ—¶éœ€è¦äº†è§£ä¸¤ä¸ªæ¦‚å¿µï¼šåˆå§‹å®¹é‡å’ŒåŠ è½½å› å­ã€‚HashMap åŸºäºŽå“ˆå¸Œè¡¨çš„ Map æŽ¥å£å®žçŽ°ï¼Œåˆå§‹å®¹é‡æ˜¯å“ˆå¸Œè¡¨åœ¨åˆ›å»ºæ—¶çš„å®¹é‡ã€‚åŠ è½½å› å­æ˜¯å“ˆå¸Œè¡¨åœ¨å…¶å®¹é‡è‡ªåŠ¨å¢žåŠ ä¹‹å‰å¯ä»¥è¾¾åˆ°å¤šæ»¡çš„ä¸€ç§å°ºåº¦ã€‚å½“å“ˆå¸Œè¡¨ä¸­çš„æ¡ç›®æ•°è¶…è¿‡äº†åŠ è½½å› å­ä¸Žå½“å‰å®¹é‡çš„ä¹˜ç§¯æ—¶ï¼Œåˆ™è¦å¯¹è¯¥å“ˆå¸Œè¡¨è¿›è¡Œ rehash æ“ä½œï¼ˆå³é‡å»ºå†…éƒ¨æ•°æ®ç»“æž„ï¼‰ï¼Œä»Žè€Œå“ˆå¸Œè¡¨å°†å…·æœ‰å¤§çº¦ä¸¤å€äºŽå½“å‰å®¹é‡çš„æ–°çš„å®¹é‡ã€‚12345678910111213141516171819202122232425//é»˜è®¤åˆå§‹å®¹é‡ 16static final int DEFAULT_INITIAL_CAPACITY = 16;//å®šä¹‰æœ€å¤§å®¹é‡static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;//é»˜è®¤è´Ÿè½½å› å­ 0.75static final float DEFAULT_LOAD_FACTOR = 0.75f;transient Entry[] table;//ä¸´ç•Œå€¼ï¼Œå€¼ä¸ºå®¹é‡ä¸ŽåŠ è½½å› å­çš„ä¹˜ç§¯int threshold; //åŠ è½½å› å­final float loadFactor; public HashMap() &#123; this.loadFactor = DEFAULT_LOAD_FACTOR; threshold = (int)(DEFAULT_INITIAL_CAPACITY * DEFAULT_LOAD_FACTOR); table = new Entry[DEFAULT_INITIAL_CAPACITY]; init();&#125;void init() &#123;&#125; ä»¥ä¸Šæž„é€ æ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªç©ºçš„ HashMapï¼Œå…¶é»˜è®¤åˆå§‹å®¹é‡ä¸º 16ï¼Œé»˜è®¤åˆå§‹åŠ è½½å› å­ä¸º 0.75ï¼ŒåŒæ—¶å£°æ˜Žäº†ä¸€ä¸ª Entry ç±»åž‹çš„æ•°ç»„ï¼Œæ•°ç»„åˆå§‹é•¿åº¦ä¸º 16ã€‚ HshMap çš„åº•å±‚æ•°æ®ç»“æž„]]></content>
      <categories>
        <category>Dev</category>
      </categories>
      <tags>
        <tag>hashmap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ç³»åˆ—â€”â€”å•ä¾‹æ¨¡å¼]]></title>
    <url>%2F2018%2F07%2F10%2Fsingleton-pattern%2F</url>
    <content type="text"><![CDATA[å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚å½“ç³»ç»Ÿéœ€è¦æŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®žä¾‹æ—¶ï¼Œå°±å¯ä»¥é‡‡ç”¨å•ä¾‹æ¨¡å¼ã€‚ ä¿è¯å•ä¾‹æ¨¡å¼ä»…æœ‰ä¸€ä¸ªå®žä¾‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯æž„é€ æ–¹æ³•ç§æœ‰åŒ–ï¼Œå³ä¸å…è®¸å¤–éƒ¨è°ƒç”¨è¯¥ç±»çš„æž„é€ æ–¹æ³•ã€‚åŸºäºŽæ­¤æ€æƒ³ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§å®žçŽ°æ–¹å¼ï¼š ç›´æŽ¥å®žä¾‹åŒ–ç›´æŽ¥å®žä¾‹åŒ–è¿™ç§æ–¹å¼ä¹Ÿç§°ä½œâ€œé¥¿æ±‰å¼â€ï¼Œå®ƒç›´æŽ¥å®šä¹‰äº†é™æ€æˆå‘˜å˜é‡ sï¼Œå¹¶é€šè¿‡ new Singleton() å®Œæˆäº†åˆå§‹åŒ–ï¼Œä¹‹åŽä¸å†å˜åŒ–ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™ç§æ–¹å¼ä¹Ÿå­˜åœ¨ä¸€å®šçš„èµ„æºæµªè´¹ï¼Œå½“æ²¡æœ‰ä½¿ç”¨ Singleton å¯¹è±¡æ—¶ï¼Œç¨‹åºä¾ç„¶ä¼šåˆ›å»º Singleton å¯¹è±¡ã€‚1234567public class Singleton &#123; private Singleton() &#123;&#125; private static final Singleton s = new Singleton(); public static Singleton getInstance() &#123; return s; &#125;&#125; å»¶è¿Ÿå®žä¾‹åŒ–æ—¢ç„¶ç›´æŽ¥å®žä¾‹åŒ–æµªè´¹èµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥è€ƒè™‘ï¼Œåœ¨ç¨‹åºéœ€è¦è¯¥å¯¹è±¡çš„æ—¶å€™æ‰åˆ›å»ºå®ƒå‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼ä¸Žç›´æŽ¥å®žä¾‹åŒ–ç¨ä¸åŒï¼Œå•ä¾‹æˆå‘˜å˜é‡ s åˆå§‹ä¸º nullï¼Œå®ƒåœ¨æ–¹æ³• getInstance() å†…éƒ¨å®Œæˆå»¶è¿Ÿå®žä¾‹åŒ–ï¼Œå¹¶è¿”å›žå•ä¾‹å¯¹è±¡ã€‚12345678910public class Singleton &#123; private Singleton() &#123;&#125; private static Singleton s = null; public static Singleton getInstance() &#123; if (s == null) &#123; s = new Singleton(); &#125; return s; &#125;&#125; è¿™ç§æ–¹å¼å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨ getInstance() æ–¹æ³•ï¼Œçº¿ç¨‹ 1 æ‰§è¡Œå®Œ if(s == null)ï¼Œæ¡ä»¶æˆç«‹ï¼Œåœ¨æ‰§è¡Œå®žä¾‹åŒ–è¯­å¥ s = new Singleton() ä¹‹å‰ï¼Œçº¿ç¨‹ 2 æ¥äº†ï¼Œæ­¤æ—¶çº¿ç¨‹ 2 æ‰§è¡Œ if(s == null)ï¼Œä¾ç„¶æˆç«‹ï¼Œè¿›å…¥ if è¯­å¥ä½“ã€‚è¿™ç§æƒ…å†µå¸¦æ¥çš„åŽæžœæ˜¯ï¼šç¨‹åºä¸¤æ¬¡åˆ›å»ºäº†å¯¹è±¡ï¼Œè¿™å¹¶ä¸ç¬¦åˆæˆ‘ä»¬å¯¹å•ä¾‹æ¨¡å¼çš„å®šä¹‰ã€‚ é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥æœ‰ä»¥ä¸‹å››ç§è§£å†³æ–¹æ³•ï¼š å®Œå…¨åŒæ­¥å®Œå…¨åŒæ­¥æ–¹æ³•ï¼Œæ˜¯åœ¨æ–¹æ³•ä¸ŠåŠ ä¸Š synchronized åŒæ­¥ã€‚å½“å¤šçº¿ç¨‹åŒæ—¶è®¿é—® getInstance() æ–¹æ³•æ—¶ï¼Œå¤šçº¿ç¨‹æ˜¯â€œä¸²è¡Œâ€çš„ã€‚12345678910public class Singleton &#123; private Singleton() &#123;&#125; private static Singleton s = null; public static synchronized Singleton getInstance() &#123; if (s == null) &#123; s = new Singleton(); &#125; return s; &#125;&#125; è¿™ç§æ–¹æ³•ï¼Œå¤šçº¿ç¨‹æ¯æ¬¡è®¿é—® getInstance() éƒ½å¿…é¡»â€œä¸²è¡Œâ€è¿è¡Œï¼Œæ•ˆçŽ‡æ¯”è¾ƒä½Žã€‚ éƒ¨åˆ†åŒæ­¥éƒ¨åˆ†åŒæ­¥æ–¹æ³•é€šè¿‡åŒé‡é”éƒ¨åˆ†åŒæ­¥æœºåˆ¶èŽ·å¾—å•ä¾‹å¯¹è±¡ã€‚å› ä¸ºä»£ç ä¸­æœ‰ä¸¤è¡Œç›¸åŒçš„è¯­å¥ if(s == null)ï¼Œæ•…è€Œå«åšåŒé‡é”ã€‚ç¬¬ä¸€ä¸ª if è¯­å¥å¯å¹¶è¡Œï¼Œå½“å¤šçº¿ç¨‹å‡æ»¡è¶³è¯¥æ¡ä»¶ï¼Œ synchronized ä¿®é¥°çš„ä»£ç å¿…é¡»ä¸²è¡Œè¿è¡Œã€‚è¿™æ ·çš„è¯ï¼Œå…¶å®žåªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡ï¼ˆé€šè¿‡äº†ç¬¬ä¸€ä¸ª if åˆ¤æ–­ï¼‰çš„æ—¶å€™è¿›è¡ŒåŒæ­¥ï¼Œæ•ˆçŽ‡è¾ƒé«˜ã€‚1234567891011121314public class Singleton &#123; private Singleton() &#123;&#125; private volatile static Singleton s = null; public static Singleton getInstance() &#123; if (s == null) &#123; synchronized(Singleton.class) &#123; if (s == null) &#123; s = new Singleton(); &#125; &#125; &#125; return s; &#125;&#125; æ³¨æ„ï¼Œvolatileå…³é”®å­—æ˜¯ç¡®ä¿å½“ s è¢«åˆå§‹åŒ–æˆ Singleton å®žä¾‹æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥æ­£ç¡®å¤„ç† sï¼Œå³å†…å­˜å¯è§æ€§ã€‚ é™æ€å†…éƒ¨ç±»é€šè¿‡é™æ€å†…éƒ¨ç±» Inner æ¥å®žçŽ°å•ä¾‹å¯¹è±¡ã€‚è™šæ‹ŸæœºåŠ è½½åº”ç”¨ç¨‹åºå­—èŠ‚ç æ—¶ï¼Œå•ä¾‹å¯¹è±¡å¹¶ä¸ä¼šç«‹å³åˆ›å»ºï¼Œå½“ç¬¬ä¸€æ¬¡è¿è¡Œ Inner.s æ—¶ï¼Œå•ä¾‹å¯¹è±¡æ‰åŠ¨æ€ç”Ÿæˆã€‚è¿™ç§å®žçŽ°æ–¹å¼æ—  synchronized å…³é”®å­—ï¼Œæé«˜äº†æ•ˆçŽ‡ã€‚123456789public class Singleton &#123; private Singleton() &#123;&#125; private static class Inner &#123; private static final Singleton s = new Singleton(); &#125; public static Singleton getInstance() &#123; return Inner.s; &#125;&#125; æžšä¸¾è¿™æ˜¯å•ä¾‹æ¨¡å¼çš„æœ€ä½³å®žè·µï¼Œå®ƒå®žçŽ°ç®€å•ï¼Œå¹¶ä¸”åœ¨é¢å¯¹å¤æ‚çš„åºåˆ—åŒ–æˆ–è€…åå°„æ”»å‡»çš„æ—¶å€™ï¼Œèƒ½å¤Ÿé˜²æ­¢å®žä¾‹åŒ–å¤šæ¬¡ã€‚è°ƒç”¨çš„æ—¶å€™åªéœ€è¦ Singleton.INSTANCE å³å¯ã€‚1234567891011public enum Singleton &#123; INSTANCE; // var here public int var; // methods here public void otherMethods() &#123; System.out.println("write other methods here..."); &#125;&#125; enum å®žçŽ° Singleton çš„ä¸‰ä¸ªç‰¹æ€§ï¼šè‡ªç”±åºåˆ—åŒ–ã€çº¿ç¨‹å®‰å…¨ã€ä¿è¯å•ä¾‹ã€‚ é¦–å…ˆï¼Œ enum æ˜¯ç”± class å®žçŽ°çš„ï¼Œå®ƒå¯ä»¥æœ‰ member å’Œ member functionã€‚å¦å¤–ï¼Œç”±äºŽ enum æ˜¯é€šè¿‡ç»§æ‰¿ Enum ç±»å®žçŽ°çš„ï¼Œenum ç»“æž„ä¸èƒ½ä½œä¸ºå­ç±»ç»§æ‰¿å…¶ä»–ç±»ï¼Œä½†å¯ä»¥ç”¨æ¥å®žçŽ°æŽ¥å£ã€‚æ­¤å¤– enum ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œåœ¨åç¼–è¯‘ä¸­ï¼Œå¯ä»¥å‘çŽ°è¯¥ç±»ç”± final ä¿®é¥°ã€‚ å…¶æ¬¡ï¼Œenum æœ‰ä¸”ä»…æœ‰ private çš„æž„é€ å™¨ï¼Œé˜²æ­¢å¤–éƒ¨çš„é¢å¤–æž„é€ ï¼Œè¿™æ°å¥½ä¸Žå•ä¾‹æ¨¡å¼å»åˆã€‚ è€Œå¯¹äºŽåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæžšä¸¾ç±»åž‹å’Œæžšä¸¾å˜é‡åœ¨ JVM ä¸­éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå³ Javaåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æžšä¸¾æ—¶åšäº†ç‰¹æ®Šçš„è§„å®šï¼Œæžšä¸¾çš„ writeObjectã€readObjectã€readObjectNoDataã€writeReplace å’Œ readResolve ç­‰æ–¹æ³•æ˜¯è¢«ç¼–è¯‘å™¨ç¦ç”¨çš„ï¼Œå› æ­¤ä¹Ÿä¸å­˜åœ¨å®žçŽ°åºåˆ—åŒ–æŽ¥å£åŽè°ƒç”¨readObject ä¼šç ´åå•ä¾‹çš„é—®é¢˜ã€‚ ï¼ˆå®Œï¼‰ å‚è€ƒèµ„æ–™ðŸ‘‰ ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ðŸ‘‰ ã€ŠJava è®¾è®¡æ¨¡å¼åŠåº”ç”¨æ¡ˆä¾‹åˆ†æžã€‹ðŸ‘‰ ã€ŠJava æžšä¸¾ enum ä»¥åŠåº”ç”¨ï¼šæžšä¸¾å®žçŽ°å•ä¾‹æ¨¡å¼ã€‹]]></content>
      <categories>
        <category>Design Pattern</category>
      </categories>
      <tags>
        <tag>singleton</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€å­¦æœŸåˆç»“æŸäº†]]></title>
    <url>%2F2018%2F07%2F07%2Ffinish-final-exam%2F</url>
    <content type="text"><![CDATA[æ˜¨å¤©ä¸‹åˆè€ƒå®Œäº†æœ€åŽä¸€ç§‘ã€Šç¼–ç¨‹è¯­è¨€ã€‹ï¼Œæˆ‘çš„å¤§å­¦è¯¾ç¨‹ç®—æ˜¯å®Œå…¨ä¿®å®Œäº†ï¼ˆåº”è¯¥ä¸è‡³äºŽæŒ‚ç§‘ï¼‰â€¦ ä»Ž 2016 å¹´å¼€å§‹ï¼Œå› ä¸ºä¿®è¯»äº†è½¯ä»¶å·¥ç¨‹ç¬¬äºŒå­¦ä½ï¼Œæˆ‘æ¯”èº«è¾¹ä¸å°‘å°ä¼™ä¼´å°‘äº†å¾ˆå¤šç©ºé—²æ—¶é—´ï¼Œå¹³æ—¶å¿™äºŽåšå®žéªŒå†™æŠ¥å‘Šï¼Œè·Ÿä»–ä»¬ä¸€èµ·å‡ºåŽ»çŽ©è€çš„æœºä¼šä¹Ÿå°‘äº†ã€‚ æˆ‘ä¸åŽæ‚”ä¿®è¯»è½¯ä»¶å·¥ç¨‹åŒå­¦ä½ã€‚æˆ‘å·²ç»å†³å®šæ¯•ä¸šä¹‹åŽä»Žäº‹Programmingçš„èŒä¸šï¼Œæ—¢æ˜¯å…´è¶£çˆ±å¥½ï¼Œä¹Ÿæ˜¯æ€§æ ¼æ‰€å‘ã€‚æˆ‘ä¸ªäººæ¯”è¾ƒå†…æ•›ðŸ˜³ï¼Œä¸æ˜¯å¾ˆæ“…é•¿ä¸Žåˆ«äººæ‰“äº¤é“ï¼Œç›¸ä¿¡è·Ÿæˆ‘ç›¸å¤„è¿‡çš„äººéƒ½çŸ¥é“ï¼Œä½†æˆ‘ä¼šä¸Žåˆ«äººç›¸å¤„å¾—å¾ˆå¥½ï¼Œä¸ä¼šé—¹ä»€ä¹ˆå°çŸ›ç›¾ã€‚å‰æ®µæ—¶é—´æœ‰æœ‹å‹æ¥æ‰¾æˆ‘è¯´è¦ä¸è¦ä¸€èµ·ç§Ÿæˆ¿ï¼Œä»–æ¯•ä¸šäº†ï¼Œæƒ³æ‰¾ä¸€ä¸ªæ¯”è¾ƒé è°±çš„æœ‹å‹ä¸€èµ·åˆç§Ÿï¼Œæˆ‘å¬äº†æ˜¯å¾ˆæ„ŸåŠ¨(à²¥ _ à²¥)çš„ï¼Œä½†å› ä¸ºåŒå­¦ä½çš„åŽŸå› ï¼Œæˆ‘è¿˜æœ‰ä¸€å¹´æ—¶é—´æ‰æ¯•ä¸šï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœºä¼šä¸€èµ·ç§Ÿæˆ¿äº†ã€‚å¦å¤–ï¼Œæˆ‘å–œæ¬¢ç¼–ç¨‹ï¼Œç›¸æ¯”äºŽå„ç§æ‚ä¸ƒæ‚å…«çš„æ´»åŠ¨ã€å››å¤„è·‘ä¸šåŠ¡ï¼Œæˆ‘æ›´å–œæ¬¢å®‰å®‰é™é™ååœ¨ç”µè„‘ðŸ’»å‰Codingï¼Œè™½ç„¶æœ‰æ—¶å› ä¸ºè°ƒbugè€Œå››å¤„ç¢°å£ï¼Œä½†åœ¨fixed bugsåŽï¼Œæˆ‘ä¼šå¼€å¿ƒå¾—åƒä¸ªå°å±å­©ðŸ˜€æ´»è¹¦ä¹±è·³~ åœ¨åŽ»å¹´ 7 æœˆä»½æˆ‘å†³å®šåšJavaå¼€å‘ï¼Œä½†é‚£æ—¶ï¼Œæˆ‘å¯¹ Java æ˜¯ä¸€æ— æ‰€çŸ¥ï¼Œæˆ‘è‡³ä»Šä¸çŸ¥é“è‡ªå·±å½“æ—¶å“ªæ¥çš„å†²åŠ¨çªç„¶é€‰äº† Java æ–¹å‘ã€‚ä¸€ç›´åšæŒåˆ°ä»Šå¤©ï¼Œè‡ªå­¦äº†ä¸€å¹´ Java çš„æˆ‘ï¼Œè§‰å¾—è‡ªå·±åœ¨ Java æ–¹é¢è¿›æ­¥è¿˜æ˜¯æŒºå¤§çš„~ æŽ¥ä¸‹æ¥è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšï¼Œå®žä¹ ã€ç§‹æ‹›ã€ä¸¤ä»½æ¯•ä¸šè®¾è®¡ï¼ŒðŸ’ªåŠ æ²¹å¹²å§~]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>talk</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ“ä½œç³»ç»ŸçŸ¥è¯†æ€»ç»“3]]></title>
    <url>%2F2018%2F07%2F04%2Fall-os3%2F</url>
    <content type="text"><![CDATA[å­˜å‚¨å™¨ç®¡ç†å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æž„ CPU å¯„å­˜å™¨ Cache é«˜é€Ÿç¼“å­˜ ä¸»å­˜å‚¨å™¨ï¼ˆå†…å­˜/ä¸»å­˜ï¼‰ ç£ç›˜ç¼“å­˜ å›ºå®šç£ç›˜ å¯ç§»åŠ¨å­˜å‚¨ä»‹è´¨ åœ¨å­˜å‚¨å±‚æ¬¡ä¸­ï¼Œå±‚æ¬¡è¶Šé«˜ï¼ˆè¶Šé è¿‘ CPUï¼‰ï¼Œå­˜å‚¨ä»‹è´¨çš„è®¿é—®é€Ÿåº¦è¶Šå¿«ï¼Œä»·æ ¼ä¹Ÿå°±è¶Šé«˜ï¼Œç›¸åº”æ‰€é…ç½®çš„å­˜å‚¨å®¹é‡ä¹Ÿè¶Šå°ã€‚é«˜é€Ÿç¼“å­˜ã€ä¸»å­˜å‚¨å™¨å’Œç£ç›˜ç¼“å­˜å‡å±žäºŽæ“ä½œç³»ç»Ÿå­˜å‚¨ç®¡ç†çš„ç®¡è¾–èŒƒç•´ï¼ŒæŽ‰ç”µåŽå­˜å‚¨çš„ä¿¡æ¯å°±ä¸å­˜åœ¨äº†ã€‚è€Œä½Žå±‚çš„å›ºå®šç£ç›˜å’Œå¯ç§»åŠ¨å­˜å‚¨ä»‹è´¨åˆ™å±žäºŽè®¾å¤‡ç®¡ç†çš„ç®¡è¾–èŒƒç•´ï¼Œå®ƒä»¬å­˜å‚¨çš„ä¿¡æ¯å°†è¢«é•¿æœŸä¿å­˜ã€‚ å­˜å‚¨å™¨çš„ç®¡ç†ç›®æ ‡ ä¸ºç”¨æˆ·ä½¿ç”¨å­˜å‚¨å™¨æä¾›æ–¹ä¾¿ï¼Œç”¨æˆ·åªéœ€è¦åœ¨è‡ªå·±çš„é€»è¾‘å†…å­˜ç©ºé—´ç¼–ç¨‹ï¼Œä¸éœ€è¦è€ƒè™‘çœŸå®žå†…å­˜çš„ç‰©ç†ä½ç½®ã€‚ ä¸ºç”¨æˆ·æä¾›å……åˆ†å¤§çš„å­˜å‚¨ç©ºé—´ã€‚ æé«˜å†…å­˜çš„åˆ©ç”¨çŽ‡ï¼Œå°†å°½é‡å¤šçš„ç”¨æˆ·è°ƒå…¥å†…å­˜è¿è¡Œã€‚ ç¨‹åºçš„è£…å…¥å’Œé“¾æŽ¥ç¨‹åºè¿›å…¥å†…å­˜çš„æµç¨‹æ­¥éª¤ï¼š ç¼–è¯‘ï¼šæºä»£ç  -&gt; ç›®æ ‡æ¨¡å— é“¾æŽ¥ï¼šç›®æ ‡æ¨¡å— + åº“å‡½æ•° -&gt; è£…å…¥æ¨¡å— è£…å…¥ï¼šè£…å…¥å†…å­˜ è¿žç»­åˆ†é…æ–¹å¼ä¸ºäº†èƒ½å°†ç”¨æˆ·ç¨‹åºè£…å…¥å†…å­˜ï¼Œå¿…é¡»ä¸ºå®ƒåˆ†é…ä¸€å®šå¤§å°çš„å†…å­˜ç©ºé—´ã€‚è¿žç»­åˆ†é…æ–¹å¼æ˜¯æœ€æ—©å‡ºçŽ°çš„ä¸€ç§å­˜å‚¨å™¨åˆ†é…æ–¹å¼ï¼Œè¯¥æ–¹å¼æ˜¯ä¸ºä¸€ä¸ªç”¨æˆ·ç¨‹åºåˆ†é…ä¸€ä¸ªè¿žç»­çš„å†…å­˜ç©ºé—´ã€‚æœ‰ä»¥ä¸‹å‡ ç§åˆ†é…æ–¹å¼ï¼š å•ä¸€è¿žç»­åˆ†é…åœ¨å•é“ç¨‹åºçŽ¯å¢ƒä¸‹ï¼Œå†…å­˜åˆ†ä¸ºç³»ç»ŸåŒºå’Œç”¨æˆ·åŒºä¸¤éƒ¨åˆ†ã€‚æ•´ä¸ªå†…å­˜çš„ç”¨æˆ·ç©ºé—´ç”±è¯¥ç¨‹åºç‹¬å ã€‚ å›ºå®šåˆ†åŒºè¿žç»­åˆ†é…ï¼ˆå®¹æ˜“é€ æˆæµªè´¹ï¼‰å°†å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸå¤§å°å›ºå®šä¸”åªèƒ½è£…å…¥ä¸€ä¸ªç¨‹åºã€‚åˆ†åŒºå¤§å°ç›¸ç­‰çš„åˆ’åˆ†ä¸€èˆ¬ç”¨äºŽå¤šä¸ªç›¸åŒä»»åŠ¡ï¼›åˆ†åŒºå¤§å°ä¸ç­‰çš„åˆ’åˆ†ä¸€èˆ¬æ ¹æ®å®žé™…ä»»åŠ¡å¤§å°åˆ†é…ã€‚ åŠ¨æ€åˆ†åŒºåˆ†é…æ— å›ºå®šåˆ†åŒºï¼Œåœ¨æ•´å—å†…å­˜ç©ºé—´ä¸­åŠ¨æ€åˆ†å‰²ï¼›æ ¹æ®ç¨‹åºå¤§å°ï¼ŒåŠ¨æ€åˆ†é…è¿žç»­çš„å†…å­˜ç©ºé—´ï¼Œåˆ†é…çš„å†…å­˜å¤§å°ç­‰äºŽç¨‹åºå¤§å°ã€‚ åŸºäºŽé¡ºåºæœç´¢çš„åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•ä¸ºäº†å®žçŽ°åŠ¨æ€åˆ†åŒºåˆ†é…ï¼Œé€šå¸¸æ˜¯å°†ç³»ç»Ÿä¸­çš„ç©ºé—²åˆ†åŒºé“¾æŽ¥æˆä¸€ä¸ªé“¾ã€‚é¡ºåºæœç´¢ï¼Œæ˜¯æŒ‡ä¾æ¬¡æœç´¢ç©ºé—²åˆ†åŒºé“¾ä¸Šçš„ç©ºé—²åˆ†åŒºï¼ŒåŽ»å¯»æ‰¾ä¸€ä¸ªå…¶å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„åˆ†åŒºã€‚æœ‰ä»¥ä¸‹å‡ ç§ç®—æ³•ï¼š é¦–æ¬¡é€‚åº”ç®—æ³•é¦–æ¬¡é€‚åº”ï¼ˆFirst Fit, FFï¼‰ç®—æ³•æ˜¯æŒ‰é¡ºåºé€‰æ‹©ç¬¬ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„å†…å­˜åŒºåŸŸã€‚ä¼˜ç‚¹ï¼šä¿ç•™äº†é«˜åœ°å€çš„å¤§éƒ¨åˆ†ç©ºé—´ï¼Œä¸ºä»¥åŽåˆ°è¾¾çš„å¤§ä½œä¸šåˆ†é…å¤§çš„å†…å­˜ç©ºé—´åˆ›é€ äº†æ¡ä»¶ã€‚ç¼ºç‚¹ï¼šä½Žå€éƒ¨åˆ†ä¸æ–­è¢«åˆ’åˆ†ï¼Œä¼šç•™ä¸‹è®¸å¤šéš¾ä»¥åˆ©ç”¨çš„ã€å¾ˆå°çš„ç©ºé—´ï¼ˆç¢Žç‰‡ï¼‰ã€‚ å¾ªçŽ¯é¦–æ¬¡é€‚åº”ç®—æ³•å¾ªçŽ¯é¦–æ¬¡é€‚åº”ï¼ˆNext Fit, NFï¼‰ç®—æ³•æ˜¯åœ¨ä¸Šä¸€æ¬¡æ‰¾åˆ°ç©ºé—²åˆ†åŒºçš„ä¸‹ä¸€ä¸ªåˆ†åŒºå¼€å§‹å¯»æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„å†…å­˜åŒºã€‚ä¼˜ç‚¹ï¼šç©ºé—²åˆ†åŒºåœ¨å†…å­˜ä¸­åˆ†é…å‡åŒ€ï¼ŒæŸ¥æ‰¾æ—¶é—´çŸ­ã€‚ç¼ºç‚¹ï¼šç¼ºä¹å¤§çš„å†…å­˜ç©ºé—´ã€‚ æœ€ä½³é€‚åº”ç®—æ³•æœ€ä½³é€‚åº”ï¼ˆBest Fit, BFï¼‰ç®—æ³•æ˜¯æŒ‡æ¯æ¬¡ä¸ºä½œä¸šåˆ†é…å†…å­˜æ—¶ï¼Œæ€»æ˜¯æŠŠèƒ½æ»¡è¶³è¦æ±‚ã€åˆæ˜¯æœ€å°çš„ç©ºé—²åˆ†åŒºåˆ†é…ç»™ä½œä¸šï¼Œé¿å…â€œå¤§æå°ç”¨â€ã€‚ä¼˜ç‚¹ï¼šæé«˜å†…å­˜åˆ©ç”¨çŽ‡ï¼Œä¿ç•™å¤§ç©ºé—²åŒºã€‚ç¼ºç‚¹ï¼šä»ç„¶å­˜åœ¨å°ç‰‡æ— æ³•åˆ©ç”¨çš„ç©ºé—²åˆ†åŒºï¼ˆç¢Žç‰‡ï¼‰ã€‚ åŠ¨æ€å¯é‡å®šä½åˆ†åŒºåˆ†é…å¯¹å†…å­˜ä¸­æ­£åœ¨ä½¿ç”¨çš„åˆ†åŒºè¿›è¡Œæ¬è¿ï¼Œä½¿å¤šä¸ªå°çš„ç©ºé—²åˆ†åŒºï¼ˆç¢Žç‰‡ï¼‰åˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„ç©ºé—²åˆ†åŒºã€‚ åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ é¡µé¢ï¼šé€»è¾‘ä¸Šçš„åˆ’åˆ†ï¼Œè¿›ç¨‹ç©ºé—´ç®¡ç†ä¸Šçš„åˆ’åˆ†ï¼Œç®€ç§°é¡µã€‚é¡µæ˜¯æ“ä½œç³»ç»Ÿåˆ†é…å†…å­˜çš„æœ€å°å•ä½ã€‚ ç‰©ç†å—ï¼šç‰©ç†ä¸Šçš„åˆ’åˆ†ã€‚ é¡µä¸Žç‰©ç†å—çš„å…³ç³»ï¼š é¡µçš„å¤§å°ä¸Žç‰©ç†å—å¤§å°å®Œå…¨ç›¸ç­‰ã€‚ è¿›ç¨‹ä»»ä½•ä¸€ä¸ªé¡µéƒ½å¯ä»¥è£…å…¥å†…å­˜çš„ä»»ä½•ä¸€ä¸ªç‰©ç†å—ã€‚ è¿›ç¨‹é™¤äº†æœ€åŽä¸€ä¸ªé¡µå¯èƒ½ä¼šäº§ç”Ÿç¢Žç‰‡ï¼Œå…¶ä»–é¡µéƒ½æ˜¯åˆšå¥½è£…å…¥å„ä¸ªç‰©ç†å—ä¸­ã€‚ å„ä¸ªé¡µç¦»æ•£åœ°åˆ†å¸ƒåœ¨ä¸åŒç‰©ç†å—ä¸­ã€‚ é¡µçš„ç¼–å·åœ¨é€»è¾‘åœ°å€ä¸Šæ˜¯è¿žç»­çš„ï¼Œåœ¨ç‰©ç†å—åˆ†å¸ƒä¸Šæ˜¯ç¦»æ•£çš„ã€‚ é¡µè¡¨è®°å½•äº†è¿›ç¨‹æ¯ä¸€é¡µåœ¨å†…å­˜å­˜æ”¾çš„å—å·ã€‚é¡µå†…åœ°å€ç›´æŽ¥å¯¹åº”å—å†…åœ°å€ã€‚ åœ°å€è½¬æ¢æœºæž„ï¼šåœ°å€è½¬æ¢æ˜¯å°†ç”¨æˆ·ç©ºé—´ä¸­çš„é€»è¾‘åœ°å€è½¬æ¢ä¸ºå†…å­˜ç©ºé—´ä¸­çš„ç‰©ç†åœ°å€ã€‚è€Œé¡µå†…åœ°å€ä¸Žç‰©ç†åœ°å€ä¸€ä¸€å¯¹åº”ï¼Œå› æ­¤åœ°å€å˜æ¢æœºæž„çš„ä»»åŠ¡çš„ä»»åŠ¡å®žé™…ä¸Šåªæ˜¯å°†é€»è¾‘åœ°å€ä¸­çš„é¡µå·è½¬æ¢ä¸ºå†…å­˜ä¸­çš„ç‰©ç†å—å·ã€‚ åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼åˆ†æ®µæ˜¯æŒ‡å°†ä¸€ä¸ªè¿›ç¨‹åˆ’åˆ†ä¸ºå¤šä¸ªå…·æœ‰é€»è¾‘æ„ä¹‰è€Œä¸”ç›¸å¯¹ç‹¬ç«‹çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ä¸»ç¨‹åºæ®µã€æ•°æ®æ®µã€å †æ ˆæ®µã€å­ç¨‹åºæ®µç­‰â€¦â€¦æ¯ä¸ªæ®µéƒ½æœ‰ç‹¬ç«‹çš„åç§°ï¼Œä¸ºäº†ç®¡ç†æ–¹ä¾¿ï¼Œç”¨æ®µå·è¡¨ç¤ºã€‚åœ¨é€»è¾‘åœ°å€æ„ä¹‰ä¸Šï¼Œæ¯ä¸ªæ®µåŒ…å«ä¸¤éƒ¨åˆ†ï¼šæ®µå·ã€æ®µå†…åœ°å€ã€‚ä½œä¸šç©ºé—´ä¸Žå†…å­˜ç©ºé—´çš„æ˜ å°„ï¼Œå€ŸåŠ©äºŽæ®µè¡¨ï¼šðŸ˜€åˆ†é¡µä¸Žåˆ†æ®µçš„åŒºåˆ«ï¼š é¡µæ˜¯ä¿¡æ¯çš„ç‰©ç†å•ä½ï¼Œæ»¡è¶³ç³»ç»Ÿç©ºé—´ç®¡ç†éœ€è¦ï¼Œåˆ†é¡µå®žçŽ°ç¦»æ•£åˆ†é…æ–¹å¼ï¼Œä»¥æ¶ˆå‡å†…å­˜çš„å¤–é›¶å¤´ï¼Œ æé«˜å†…å­˜çš„åˆ©ç”¨çŽ‡ï¼›æ®µæ˜¯ä¿¡æ¯çš„é€»è¾‘å•ä½ï¼Œæ¯ä¸ªæ®µå«æœ‰ä¸€ç»„æ„ä¹‰å®Œå…¨çš„ä¿¡æ¯ï¼Œåˆ†æ®µæ˜¯ä¸ºäº†æ»¡è¶³ç¨‹åºå‘˜åœ¨ç¼–å†™ä»£ç æ—¶çš„ä¸€äº›é€»è¾‘éœ€æ±‚ï¼Œæ¯”å¦‚æ•°æ®å…±äº«ã€æ•°æ®ä¿æŠ¤ã€‚ é¡µçš„å¤§å°å›ºå®šï¼Œç”±ç³»ç»Ÿå†³å®šï¼›æ®µçš„é•¿åº¦ä¸å›ºå®šï¼Œ ç”±ç”¨æˆ·å†³å®šã€‚ æ®µé¡µå¼ç®¡ç†æ–¹å¼æ®µé¢å‘ç”¨æˆ·ç¨‹åºéœ€è¦ï¼Œæ®µé•¿åº¦ä¸å›ºå®šï¼›æ®µéœ€è¦è¿žç»­åˆ†é…ç©ºé—´ï¼Œå­˜åœ¨è¿žç»­åˆ†é…çš„ç¼ºç‚¹ï¼Œä¾‹å¦‚æ˜“äº§ç”Ÿç¢Žç‰‡ï¼›ç»“åˆæ®µå¼å’Œé¡µå¼ä¸¤è€…ç®¡ç†ä¼˜ç‚¹ï¼Œæ—¢èƒ½èŠ‚çœå†…å­˜ç©ºé—´ï¼Œæé«˜å†…å­˜åˆ†é…æ•ˆçŽ‡ï¼›åˆèƒ½å…¼é¡¾ç”¨æˆ·ç¨‹åºéœ€è¦ã€‚ æ®µé¡µå¼ç®¡ç†æœºåˆ¶ï¼š åˆ†æ®µä¸Žåˆ†é¡µæœºåˆ¶çš„ç»“åˆï¼› å…ˆå°†ç”¨æˆ·ç¨‹åºåˆ’åˆ†ä¸ºå¤šä¸ªæœ‰é€»è¾‘æ„ä¹‰çš„æ®µï¼Œå†å°†æ®µåˆ’åˆ†ä¸ºå¤šä¸ªé¡µï¼› æ®µé¡µå¼ç®¡ç†éœ€è¦è®¾ç½®æ®µè¡¨å’Œé¡µè¡¨ï¼› æ¯ä¸ªæ®µéƒ½å¯¹åº”ä¸€å¼ é¡µè¡¨ï¼Œå› æ­¤æ®µè¡¨å­˜æ”¾äº†æ¯å¼ é¡µè¡¨çš„å¼€å§‹åœ°å€å’Œé¡µè¡¨é•¿åº¦ã€‚ é¡µé¢ç½®æ¢ç®—æ³•åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æžœè¦è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜ä¸­ï¼Œå°±ä¼šå‘ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œä»Žè€Œå°†è¯¥é¡µè°ƒå…¥å†…å­˜ä¸­ã€‚æ­¤æ—¶å¦‚æžœå†…å­˜å·²æ— ç©ºé—²ç©ºé—´ï¼Œç³»ç»Ÿå¿…é¡»ä»Žå†…å­˜ä¸­è°ƒå‡ºä¸€ä¸ªé¡µé¢åˆ°ç£ç›˜å¯¹æ¢åŒºï¼Œä»Žè€Œè…¾å‡ºç©ºé—´ç»™è¦è®¿é—®çš„é¡µé¢ã€‚ é¡µé¢ç½®æ¢ç®—æ³•æ˜¯ä¸ºäº†æ‰¾å‡ºä»¥åŽä¸å†è®¿é—®çš„é¡µé¢æˆ–è€…è¾ƒé•¿æ—¶é—´ä¸å†ä½¿ç”¨çš„é¡µé¢ï¼Œè¾¾åˆ°å…·æœ‰è¾ƒä½Žçš„é¡µé¢æ›´æ¢é¢‘çŽ‡ï¼ˆä½Žç¼ºé¡µçŽ‡ï¼‰çš„ç›®æ ‡ã€‚ æœ€ä½³ç½®æ¢ç®—æ³•è¯¥ç®—æ³•æ‰€é€‰æ‹©çš„æ¢å‡ºé¡µåœ¨æœªæ¥æœ€é•¿ä¸€æ®µæ—¶é—´å†…ä¸å†è¢«è®¿é—®ï¼Œé€šå¸¸å¯ä»¥ä¿è¯èŽ·å¾—æœ€ä½Žçš„ç¼ºé¡µçŽ‡ã€‚ä½†è¿™æ˜¯ä¸€ç§ç†è®ºä¸Šçš„ç®—æ³•ï¼Œå› ä¸ºæ— æ³•çŸ¥é“ä¸€ä¸ªé¡µé¢å¤šé•¿æ—¶é—´ä¸å†è¢«è®¿é—®ã€‚ å…ˆè¿›å…ˆå‡ºé¡µé¢ç½®æ¢ç®—æ³•è¯¥ç®—æ³•æ·˜æ±°æœ€å…ˆè¿›å…¥å†…å­˜çš„é¡µé¢ï¼Œå³é€‰æ‹©å†…å­˜é©»ç•™æ—¶é—´æœ€é•¿çš„ï¼Œåªçœ‹â€œè¿›å…¥é¡ºåºâ€ã€‚è¯¥ç®—æ³•ä¼šå°†é‚£äº›ç»å¸¸è¢«è®¿é—®çš„é¡µé¢ä¹Ÿè¢«æ¢å‡ºï¼Œä»Žè€Œä½¿ç¼ºé¡µçŽ‡å‡é«˜ã€‚ æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç½®æ¢ç®—æ³•è™½ç„¶æ— æ³•çŸ¥é“å°†æ¥è¦ä½¿ç”¨çš„é¡µé¢æƒ…å†µï¼Œä½†æ˜¯å¯ä»¥çŸ¥é“è¿‡åŽ»ä½¿ç”¨é¡µé¢çš„æƒ…å†µã€‚LRU ç®—æ³•é€‰æ‹©æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ï¼Œå¢žåŠ è®¿é—®å­—æ®µ(t)è®°å½•å„ä¸ªé¡µé¢æœªè¢«è®¿é—®çš„å‘¨æœŸæ•°ã€‚LRU ç½®æ¢ç®—æ³•éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œç¡¬ä»¶ï¼ˆç§»ä½å¯„å­˜å™¨/æ ˆï¼‰éœ€è¦è§£å†³ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š è¿›ç¨‹å„ä¸ªé¡µé¢æœ‰å¤šä¹…æœªè¢«è®¿é—®ï¼› å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ã€‚ ðŸ˜€ç§»ä½å¯„å­˜å™¨ï¼š æ¯ä¸ªå¯„å­˜å™¨è®°å½•è¿›ç¨‹åœ¨å†…å­˜ä¸­æ¯é¡µçš„ä½¿ç”¨æƒ…å†µï¼› æ•°æ®æ ¼å¼ï¼šR=Rn-1Rn-2Rn-3â€¦.R2R1R0ï¼› é¡µé¢è¢«è®¿é—®ä¸€æ¬¡ï¼Œæœ€é«˜ä½Rn-1ç½® 1ï¼Œæ¯éš”ä¸€å®šæ—¶é—´ï¼Œå¯„å­˜å™¨å³ç§»ä¸€ä½ï¼› Rå€¼æœ€å°çš„é¡µé¢æ˜¯è¢«ç½®æ¢é¡µã€‚ ðŸ˜€å †æ ˆï¼š é‡‡ç”¨ç‰¹æ®Šçš„æ ˆæ¥ä¿å­˜å½“å‰ä½¿ç”¨çš„å„ä¸ªé¡µé¢å·ï¼› æ ˆé¡¶ä¿ç•™çš„æ˜¯æœ€æ–°è¢«è®¿é—®çš„é¡µï¼› æ ˆåº•ä¿ç•™çš„æ˜¯æœ€ä¹…æœªè¢«è®¿é—®çš„é¡µï¼Œå³ç½®æ¢ç›®æ ‡ã€‚ ç®€å• Clock ç½®æ¢ç®—æ³•è¯¥ç®—æ³•æ˜¯ LRU ç®—æ³•çš„è¿‘ä¼¼ç®—æ³•ï¼Œä¹Ÿç§°ä¸ºæœ€è¿‘æœªç”¨ç®—æ³•ã€‚å®ƒä¸ºæ¯ä¸€é¡µè®¾ç½®ä¸€è®¿é—®ä½ï¼Œå®žé™…ç¼–ç¨‹ä¸­ç”¨æ•´åž‹æ•°ç»„æ¥è¡¨ç¤ºå½“å‰ä¸šå†…æ˜¯å¦è¢«è®¿é—®ï¼Œ1 ä»£è¡¨è¢«è®¿é—®è¿‡ï¼Œ0 ä»£è¡¨æœªè®¿é—®è¿‡ã€‚æ¯æ¬¡ç½®æ¢ï¼ŒæŒ‡é’ˆå¾ªçŽ¯éåŽ†ï¼Œæ‰¾å‡ºç¬¬ä¸€ä¸ªè®¿é—®ä½ä¸º 0 çš„é‚£ä¸ªå†…å­˜é¡µé¢ã€‚è‹¥è¯¥é¡µé¢è®¿é—®ä½ä¸º 1ï¼Œåˆ™å°†è®¿é—®ä½ç½® 0ï¼ŒæŒ‡é’ˆç»§ç»­ç§»åŠ¨ã€‚ æ”¹è¿›åž‹ Clock ç½®æ¢ç®—æ³•æ¯ä¸ªé¡µé¢è®¾ç½®æœ‰è®¿é—®ä½ A å’Œä¿®æ”¹ä½ Mï¼Œä¸¤ä¸ªä½ç»„åˆæˆå››ç§ç±»åž‹çš„é¡µé¢ï¼ˆè§ä¸‹æ–¹è¡¨æ ¼ï¼‰æ‰§è¡Œè¿‡ç¨‹ï¼š ä»Žå½“å‰æŒ‡é’ˆä½ç½®å¼€å§‹æ‰«æå¾ªçŽ¯é˜Ÿåˆ—ï¼Œå¯»æ‰¾ç¬¬ 1 ç±»é¡µé¢ï¼Œä¸æ”¹å˜è®¿é—®ä½ Aï¼Œå°†é‡åˆ°çš„ç¬¬ä¸€ä¸ªè¿™ç±»é¡µé¢ä½œä¸ºæ·˜æ±°é¡µï¼› ç¬¬ä¸€æ­¥æŸ¥æ‰¾å¤±è´¥ï¼Œå¯»æ‰¾ç¬¬ 2 ç±»é¡µé¢ï¼Œå°†é‡åˆ°çš„ç¬¬ä¸€ä¸ªè¿™ç±»é¡µé¢ä½œä¸ºæ·˜æ±°é¡µã€‚åœ¨æ‰«ææœŸé—´ï¼Œæ‰€æœ‰æ‰«æè¿‡çš„é¡µé¢çš„è®¿é—®ä½ A éƒ½ç½® 0ï¼› æ‰€æœ‰ 3 ç±»é¡µé¢å˜æˆ 1 ç±»é¡µé¢ï¼Œ4 ç±»é¡µé¢å˜æˆ 2 ç±»é¡µé¢ï¼› ç¬¬äºŒæ­¥å¤±è´¥ï¼Œé‡å¤ç¬¬ä¸€æ­¥ï¼› å¦‚æžœä»å¤±è´¥ï¼Œå†é‡å¤ç¬¬äºŒæ­¥ï¼Œæ­¤æ—¶å°±ä¸€å®šèƒ½æ‰¾åˆ°è¢«æ·˜æ±°çš„é¡µã€‚ é¡µé¢ç±»åˆ« è®¿é—®ä½ A è®¿é—®ä½ M æè¿° 1 0 0 æœ€è¿‘æœªè¢«è®¿é—®ï¼Œåˆæœªè¢«ä¿®æ”¹ï¼Œæœ€ä½³æ·˜æ±°é¡µã€‚ 2 0 1 æœ€è¿‘æœªè¢«è®¿é—®ï¼Œä½†å·²è¢«ä¿®æ”¹é¡µã€‚ 3 1 0 æœ€è¿‘å·²è¢«è®¿é—®ï¼Œ ä½†æœªè¢«ä¿®æ”¹ã€‚ 4 1 1 æœ€è¿‘å·²è¢«è®¿é—®ä¸”è¢«ä¿®æ”¹ï¼Œæœ€ä¸åº”æ·˜æ±°é¡µã€‚ æœ€å°‘ä½¿ç”¨ç®—æ³•æœ€å°‘ä½¿ç”¨ï¼ˆLeast Frequently Used, LFUï¼‰ç½®æ¢ç®—æ³•å¯¹æ¯ä¸ªé¡µé¢è®¾ç½®ä¸€ä¸ªå­—æ®µï¼ˆç§»ä½å¯„å­˜å™¨ï¼‰ï¼Œç”¨æ¥è®°å½•é¡µé¢è¢«è®¿é—®çš„é¢‘çŽ‡ã€‚ ç£ç›˜ç®¡ç†ç£ç›˜çš„ç»“æž„ç£ç›˜ç”±å¤šä¸ªç›˜ç‰‡ç»„æˆï¼Œæ¯ä¸ªç›˜ç‰‡åˆ†ä¸ºä¸¤ä¸ªç›˜é¢ï¼Œæ¯ä¸ªç›˜é¢åˆ†è‹¥å¹²ä¸ªç£é“ï¼ˆåŒå¿ƒåœ†ï¼‰ï¼Œæ¯ä¸ªç£é“åˆ†è‹¥å¹²ä¸ªæ‰‡åŒºã€‚ ç£ç›˜è°ƒåº¦ç®—æ³• å…ˆæ¥å…ˆæœåŠ¡æ¯ä¸ªè¯·æ±‚æŒ‰ç…§æ—¶é—´é¡ºåºæ¥å¤„ç†ã€‚ç¼ºç‚¹æ˜¯å¹³å‡å¯»é“è·ç¦»è¾ƒå¤§ã€‚ æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆå¹³å‡å¯»é“æ—¶é—´è¾ƒçŸ­ã€‚ç¼ºç‚¹æ˜¯ï¼šâ€œé¥¥é¥¿â€çŽ°è±¡ï¼Œå³æŸäº›è¿›ç¨‹é•¿æœŸå¾—ä¸åˆ°è®¿é—®ï¼›â€œç£è‡‚ç²˜ç€â€çŽ°è±¡ï¼Œå³ç£å¤´å¯èƒ½é•¿æœŸåœç•™åœ¨åŒä¸€ç£é“ã€‚ æ‰«æSCANï¼Œåˆç§°ä¸ºç”µæ¢¯è°ƒåº¦ç®—æ³•ï¼Œé’ˆå¯¹æœ€çŸ­å¯»é“ä¼˜å…ˆçš„â€œé¥¥é¥¿â€çŽ°è±¡è¿›è¡Œæ”¹è¿›ï¼Œä¾æ®ç£å¤´ç§»åŠ¨æ–¹å‘è®¿é—®å½“å‰ç£é“æœ€è¿‘çš„ç›®æ ‡ç£é“ã€‚ å¾ªçŽ¯æ‰«æCSCANï¼Œåˆ°è¾¾æœ€å¤–ç£é“åŽï¼Œè¿”å›žæœ€å†…ç£é“å¼€å§‹æ‰«æã€‚ç£å¤´ç§»åŠ¨æ–¹å‘å›ºå®šä¸å˜ï¼Œä¸ä¼šä¸­é€”æŠ˜è¿”ã€‚ä¼˜ç‚¹æ˜¯ä¸ä¼šå‡ºçŽ°â€œé¥¥é¥¿â€çŽ°è±¡ï¼Œå¹³å‡å¯»é“æ—¶é—´è¾ƒçŸ­ï¼Œæœ€é•¿ç­‰å¾…æ—¶é—´æ¯”æ‰«æç®—æ³•å°‘ä¸€åŠã€‚ç¼ºç‚¹æ˜¯â€œç£è‡‚ç²˜ç€çŽ°è±¡ä»æœªè§£å†³ã€‚ N-Step-SCAN ç®—æ³•ä¸ºäº†è§£å†³â€œç£è‡‚ç²˜ç€â€çŽ°è±¡ï¼Œå°†è¯·æ±‚åºåˆ—åˆ’åˆ†ä¸ºå¤šä¸ªå­åºåˆ—ï¼Œæ–°è¯·æ±‚åªèƒ½è¿›å…¥åŽé¢çš„å­åºåˆ—ï¼Œä¸èƒ½è¿›å…¥å½“å‰å­åºåˆ—ï¼Œé¿å…ç²˜ç€çŽ°è±¡ã€‚ FSCAN ç®—æ³•N-Step-SCAN ç®—æ³•çš„ç®€åŒ–ç‰ˆï¼Œåªåˆ’åˆ†ä¸¤ä¸ªå­åºåˆ—ï¼Œä¸€ä¸ªå½“å‰åºåˆ—ï¼Œä¸€ä¸ªåŽå¤‡åºåˆ—ã€‚ ðŸ¤­ æ“ä½œç³»ç»ŸçŸ¥è¯†æ€»ç»“ç³»åˆ—å®Œ~ðŸ‘‰ Previous.]]></content>
      <categories>
        <category>Dev</category>
      </categories>
      <tags>
        <tag>os</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ“ä½œç³»ç»ŸçŸ¥è¯†æ€»ç»“2]]></title>
    <url>%2F2018%2F07%2F04%2Fall-os2%2F</url>
    <content type="text"><![CDATA[å¤„ç†æœºè°ƒåº¦å¤„ç†æœºè°ƒåº¦çš„å±‚æ¬¡ é«˜çº§è°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ï¼‰æ ¹æ®è°ƒåº¦ç®—æ³•å’Œè®¡ç®—æœºçŠ¶æ€ï¼Œä»Žå¤–å­˜é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸šè°ƒå…¥å†…å­˜ã€‚ åˆ›å»ºè¿›ç¨‹ åˆ†é…å†…å­˜ç­‰èµ„æº å°†è¿›ç¨‹æ”¾å…¥å°±ç»ªé˜Ÿåˆ—ç­‰å¾… CPU è°ƒåº¦ã€‚ ä½Žçº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦ï¼‰å®ƒå†³å®šå“ªä¸ªè¿›ç¨‹èŽ·å¾— CPUã€‚ ä¿å­˜çŽ°åœº è°ƒåº¦æ–°è¿›ç¨‹ æ–°è¿›ç¨‹èŽ·å¾— CPU æŽ§åˆ¶æƒ ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰ä¸­çº§è°ƒåº¦æ˜¯ä¸ºäº†æé«˜å†…å­˜åˆ©ç”¨çŽ‡å’Œç³»ç»Ÿåžåé‡ã€‚ä¸ºæ­¤ï¼ŒæŠŠé‚£äº›æš‚æ—¶ä¸èƒ½è¿è¡Œçš„è¿›ç¨‹è°ƒè‡³å¤–å­˜ç­‰å¾…ï¼Œæ­¤æ—¶è¿›ç¨‹çš„çŠ¶æ€ä¸ºæŒ‚èµ·çŠ¶æ€ã€‚å½“å®ƒä»¬å…·å¤‡è¿è¡Œæ¡ä»¶ä¸”å†…å­˜åˆç¨æœ‰ç©ºé—²æ—¶ï¼Œå†é‡æ–°è°ƒå…¥å†…å­˜ï¼Œå¹¶ä¿®æ”¹å™¨çŠ¶æ€ä¸ºå°±ç»ªçŠ¶æ€ã€‚ ä¸‰çº§è°ƒåº¦é˜Ÿåˆ—æ¨¡åž‹ å¤„ç†æœºè°ƒåº¦å¸¸è§åè¯ åˆ°è¾¾æ—¶é—´ï¼šè¿›å…¥ç³»ç»Ÿçš„æ—¶é—´ å¼€å§‹æ—¶é—´ï¼šé¦–æ¬¡ä½¿ç”¨ CPU çš„æ—¶é—´ æœåŠ¡æ—¶é—´ï¼šéœ€è¦ä½¿ç”¨ CPU çš„æ—¶é—´ï¼Œä¹Ÿå«â€œè¿è¡Œæ—¶é—´â€ å®Œæˆæ—¶é—´ï¼šé€€å‡ºç³»ç»Ÿçš„æ—¶é—´ å‘¨è½¬æ—¶é—´ï¼šå®Œæˆæ—¶é—´ - åˆ°è¾¾æ—¶é—´ å¸¦æƒå‘¨è½¬æ—¶é—´ï¼šå‘¨è½¬æ—¶é—´ / æœåŠ¡æ—¶é—´ å¹³å‡å‘¨è½¬æ—¶é—´ï¼šå‘¨è½¬æ—¶é—´çš„å¹³å‡å€¼ å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´ï¼šå¸¦æƒå‘¨è½¬æ—¶é—´çš„å¹³å‡å€¼ è°ƒåº¦ç®—æ³• å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFirst-Come First-Served, FCFSï¼‰è°ƒåº¦ç®—æ³•æŒ‰ç…§ä½œä¸šåˆ°è¾¾çš„å…ˆåŽæ¬¡åºè¿›è¡Œè°ƒåº¦ï¼Œå®ƒä¼˜å…ˆè€ƒè™‘åœ¨ç³»ç»Ÿä¸­ç­‰å¾…æ—¶é—´æœ€é•¿çš„ä½œä¸šã€‚ï¼ˆä¸åˆ©äºŽçŸ­ä½œä¸šï¼‰FCFS ç®—æ³•åœ¨å•å¤„ç†æœºç³»ç»Ÿä¸­å·²å¾ˆå°‘ä½œä¸ºä¸»è°ƒåº¦ç®—æ³•ï¼Œä½†ç»å¸¸æŠŠå®ƒä¸Žå…¶å®ƒè°ƒåº¦ç®—æ³•ç›¸ç»“åˆä½¿ç”¨ï¼Œå½¢æˆæ›´æœ‰æ•ˆçš„è°ƒåº¦ç®—æ³•ã€‚ä¾‹å¦‚å¯ä»¥åœ¨ç³»ç»Ÿä¸­æŒ‰è¿›ç¨‹çš„ä¼˜å…ˆçº§è®¾ç½®å¤šä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªä¼˜å…ˆçº§ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé˜Ÿåˆ—çš„è°ƒåº¦ç®—æ³•éƒ½åŸºäºŽ FCFS ç®—æ³•ã€‚ çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•çŸ­ä½œä¸šä¼˜å…ˆï¼ˆShort Job First, SJFï¼‰è°ƒåº¦ç®—æ³•ä»¥ä½œä¸šçš„é•¿çŸ­æ¥è®¡ç®—ä¼˜å…ˆçº§ï¼Œå®ƒä»Žå¤–å­˜çš„åŽå¤‡é˜Ÿåˆ—ä¸­é€‰æ‹©è‹¥å¹²ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„ä½œä¸šï¼Œä¼˜å…ˆå°†å®ƒä»¬è°ƒå…¥å†…å­˜è¿è¡Œã€‚ï¼ˆä¸åˆ©äºŽé•¿ä½œä¸šï¼Œæœªè€ƒè™‘ä½œä¸šçš„ç´§è¿«ç¨‹åº¦ï¼‰ ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•å‰é¢ä¸¤ç§ç®—æ³•ä¸èƒ½åæ˜ ä½œä¸šçš„ç´§è¿«ç¨‹åº¦ï¼Œåœ¨ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆPriority-Scheduling Algorithm, PSAï¼‰ä¸­ï¼Œåˆ™æ˜¯åŸºäºŽä½œä¸šçš„ç´§è¿«ç¨‹åº¦ï¼Œç”±å¤–éƒ¨èµ‹äºˆä½œä¸šç›¸åº”çš„ä¼˜å…ˆçº§ï¼Œè°ƒåº¦ç®—æ³•æ˜¯æ ¹æ®è¯¥ä½œä¸šçš„ä¼˜å…ˆçº§è¿›è¡Œè°ƒåº¦çš„ã€‚ é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼ˆHighest Response Ratio Next, HRRNï¼‰æ—¢è€ƒè™‘äº†ä½œä¸šçš„ç­‰å¾…æ—¶é—´ï¼Œåˆè€ƒè™‘äº†é¢ä½œä¸šçš„è¿è¡Œæ—¶é—´ã€‚ä¼˜å…ˆæƒ = (ç­‰å¾…æ—¶é—´ + æœåŠ¡æ—¶é—´) / æœåŠ¡æ—¶é—´ç­‰å¾…æ—¶é—´ç›¸åŒï¼ŒæœåŠ¡æ—¶é—´è¶ŠçŸ­ä¼˜å…ˆæƒè¶Šé«˜ï¼›æœåŠ¡æ—¶é—´ç›¸åŒï¼Œç­‰å¾…æ—¶é—´è¶Šé•¿ä¼˜å…ˆæƒè¶Šé«˜ã€‚ï¼ˆæ¯æ¬¡è°ƒåº¦å‰éƒ½è¦è®¡ç®—ä¼˜å…ˆæƒï¼Œå¢žåŠ ç³»ç»Ÿå¼€é”€ï¼‰ åŸºäºŽæ—¶é—´ç‰‡çš„è½®è½¬è°ƒåº¦ç®—æ³• å°†æ‰€æœ‰å°±ç»ªè¿›ç¨‹æŒ‰å…ˆæ¥å…ˆæœåŠ¡æŽ’æˆé˜Ÿåˆ— æŠŠ CPU åˆ†é…ç»™é˜Ÿé¦–è¿›ç¨‹ï¼Œè¿›ç¨‹åªæ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ æ—¶é—´ç‰‡ç”¨å®Œï¼ŒOS é€šè¿‡è®¡æ—¶å™¨å‘å‡ºæ—¶é’Ÿä¸­æ–­ï¼Œåœæ­¢è¿›ç¨‹ å°†å·²ä½¿ç”¨æ—¶é—´ç‰‡çš„è¿›ç¨‹é€è‡³å°±ç»ªé˜Ÿåˆ—æœ«å°¾ åˆ†é… CPU ç»™å°±ç»ªé˜Ÿåˆ—çš„ä¸‹ä¸€ä¸ªè¿›ç¨‹ å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•è®¾ç½®å¤šä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œå„ä¸ªé˜Ÿåˆ—ä¼˜å…ˆçº§é€ä¸ªé™ä½Žï¼Œæ—¶é—´ç‰‡é•¿åº¦æˆå€å¢žåŠ ã€‚å³ï¼Œä¼˜å…ˆçº§è¶Šé«˜çš„é˜Ÿåˆ—æ‰§è¡Œæ—¶é—´ç‰‡å°±è¶ŠçŸ­ã€‚å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•çš„è°ƒåº¦è§„åˆ™ï¼š æ¯ä¸ªæ–°è¿›ç¨‹é¦–å…ˆè¿›å…¥ç¬¬ä¸€ä¸ªé˜Ÿåˆ—ï¼Œéµå¾ª FCFSã€‚ åœ¨å½“å‰é˜Ÿåˆ—çš„æ—¶é—´ç‰‡å†…ï¼Œè¿›ç¨‹è‹¥èƒ½å®Œæˆï¼Œé€€å‡ºã€‚ è¿›ç¨‹è‹¥æœªå®Œæˆï¼Œé™åˆ°ç¬¬äºŒä¸ªé˜Ÿåˆ—ï¼ŒåŒæ ·éµå¾ª FCFSã€‚ ä¾æ­¤ç±»æŽ¨â€¦â€¦ ä½Žçº§é˜Ÿåˆ—åªæœ‰ç­‰é«˜çº§é˜Ÿåˆ—å˜ç©ºæ‰èƒ½æ‰§è¡Œã€‚ å½“é«˜çº§é˜Ÿåˆ—æœ‰æ–°è¿›ç¨‹è¿›å…¥ï¼Œè€Œå½“å‰æ­£åœ¨è¿è¡Œä½Žçº§é˜Ÿåˆ—çš„è¿›ç¨‹ï¼Œå°†ç«‹å³å‘ç”ŸæŠ¢å ï¼Œè¢«æŠ¢å è¿›ç¨‹æ”¾å›žä½Žçº§é˜Ÿåˆ—çš„æœ«å°¾ï¼Œè®°å½•è¿›ç¨‹å‰©ä½™è¿è¡Œæ—¶é—´å’Œåœ¨å½“å‰é˜Ÿåˆ—çš„å‰©ä½™ä½¿ç”¨æ—¶é—´ã€‚ å®žæ—¶è°ƒåº¦åœ¨å®žæ—¶ç³»ç»Ÿä¸­ï¼Œå¯èƒ½å­˜åœ¨ç€ä¸€äº›å®žæ—¶ä»»åŠ¡ï¼Œå®ƒä»¬éƒ½è”ç³»ç€ä¸€ä¸ªæˆªæ­¢æ—¶é—´ã€‚ä¸ºä¿è¯ç³»ç»Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œå®žæ—¶è°ƒåº¦å¿…é¡»èƒ½æ»¡è¶³å®žæ—¶ä»»åŠ¡å¯¹æˆªæ­¢æ—¶é—´çš„è¦æ±‚ã€‚ æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆç®—æ³•æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆï¼ˆEarliest Deadline First, EDFï¼‰ç®—æ³•æ˜¯æ ¹æ®ä»»åŠ¡çš„æˆªæ­¢æ—¶é—´ç¡®å®šä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œä»»åŠ¡çš„æˆªæ­¢æ—¶é—´è¶Šæ—©ï¼Œå…¶ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå…·æœ‰æœ€æ—©æˆªæ­¢æ—¶é—´çš„ä»»åŠ¡æŽ’åœ¨é˜Ÿåˆ—çš„é˜Ÿé¦–ã€‚ æœ€ä½Žæ¾å¼›åº¦ä¼˜å…ˆç®—æ³•æœ€ä½Žæ¾å¼›åº¦ä¼˜å…ˆï¼ˆLeast Laxity First, LLFï¼‰ç®—æ³•æ˜¯æ ¹æ®ä»»åŠ¡ç´§æ€¥ç¨‹åº¦ç¡®å®šä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œä»»åŠ¡çš„ç´§æ€¥ç¨‹åº¦è¶Šé«˜ï¼Œä¼˜å…ˆçº§å°±è¶Šé«˜ã€‚æ¾å¼›åº¦ = å®Œæˆæˆªæ­¢æ—¶é—´- è¿è¡Œæ—¶é—´(æœåŠ¡æ—¶é—´) - å½“å‰æ—¶é—´ä¾‹å¦‚ï¼Œä»»åŠ¡ A çš„å®Œæˆæˆªæ­¢æ—¶é—´æ˜¯ç¬¬ 400sï¼Œè¿è¡Œæ—¶é—´ä¸º 100sï¼Œå½“å‰æ—¶é—´æ˜¯ç¬¬ 150sï¼Œåˆ™ A çš„æ¾å¼›åº¦ = 400-100-150 = 150s åœ¨æ¾å¼›åº¦ä¸º 0 çš„æ—¶åˆ»è®¾ç½®â€œåœ°é›·â€ï¼Œæ¾å¼›åº¦ä¸º 0 å‘ç”ŸæŠ¢å ã€‚ æ­»é”äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶ äº’æ–¥è¿›ç¨‹å¯¹æ‰€åˆ†é…çš„èµ„æºè¿›è¡ŒæŽ’å®ƒæ€§ä½¿ç”¨ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…ï¼ŒæŸèµ„æºåªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹å ç”¨ã€‚å¦‚æžœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒè¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…ï¼Œç›´åˆ°å æœ‰è¯¥èµ„æºçš„è¿›ç¨‹é‡Šæ”¾ã€‚ è¯·æ±‚ä¸Žä¿æŒè¿›ç¨‹å·²ç»æŒæœ‰äº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºæ–°çš„èµ„æºè¯·æ±‚ã€‚ ä¸å¯å‰¥å¤ºå·²èŽ·å¾—çš„èµ„æºåœ¨ä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«æŠ¢å ï¼Œåªèƒ½åœ¨è¿›ç¨‹ä½¿ç”¨å®Œè‡ªå·±é‡Šæ”¾ã€‚ çŽ¯è·¯ç­‰å¾…å­˜åœ¨ä¸€ä¸ªâ€œè¿›ç¨‹â€”â€”èµ„æºâ€å¾ªçŽ¯é“¾ï¼Œè¿›ç¨‹é—´äº’ç›¸ç­‰å¾…èµ„æºã€‚ å¤„ç†æ­»é”çš„æ–¹æ³• é¢„é˜²æ­»é”è®¾ç½®é™åˆ¶æ¡ä»¶ï¼Œç ´åäº§ç”Ÿæ­»é”çš„ä¸€ä¸ªæˆ–å¤šä¸ªå¿…è¦æ¡ä»¶ã€‚æ¯”å¦‚ï¼Œå¼ºåˆ¶å›žæ”¶èµ„æºã€èµ„æºä¸€æ¬¡æ€§åˆ†é…â€¦â€¦ é¿å…æ­»é”åœ¨èµ„æºåŠ¨æ€åˆ†é…è¿‡ç¨‹ä¸­ï¼ŒåŠ å…¥æ£€æŸ¥ï¼Œé˜²æ­¢ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ã€‚ æ£€æµ‹æ­»é”å»ºç«‹æ£€æµ‹æœºæž„æ£€æµ‹æ­»é”çš„å‘ç”Ÿå’ŒåŽŸå› ï¼Œç¡®å®šç›¸å…³çš„è¿›ç¨‹å’Œèµ„æºã€‚ è§£é™¤æ­»é”å‰¥å¤ºèµ„æºæˆ–æ’¤é”€è¿›ç¨‹ï¼Œä»Žè€Œè§£é™¤æ­»é”ã€‚ é¿å…æ­»é”çš„æ–¹æ³•åœ¨æ­»é”é¿å…æ–¹æ³•ä¸­ï¼ŒæŠŠç³»ç»Ÿçš„çŠ¶æ€åˆ†ä¸ºå®‰å…¨çŠ¶æ€å’Œä¸å®‰å…¨çŠ¶æ€ã€‚å½“ç³»ç»Ÿå¤„äºŽå®‰å…¨çŠ¶æ€æ—¶ï¼Œå¯é¿å…å‘ç”Ÿæ­»é”ã€‚åä¹‹ï¼Œå½“ç³»ç»Ÿå¤„äºŽä¸å®‰å…¨çŠ¶æ€æ—¶ï¼Œåˆ™å¯èƒ½è¿›å…¥åˆ°æ­»é”çŠ¶æ€ã€‚æ‰€è°“å®‰å…¨çŠ¶æ€ï¼Œæ˜¯æŒ‡ç³»ç»Ÿèƒ½æŒ‰æŸç§è¿›ç¨‹é¡ºåº &lt;P1, P2, â€¦ï¼ŒPn&gt; æ¥ä¸ºæ¯ä¸ªè¿›ç¨‹Piåˆ†é…å…¶æ‰€éœ€èµ„æºï¼Œç›´è‡³æ»¡è¶³æ¯ä¸ªè¿›ç¨‹å¯¹èµ„æºçš„æœ€å¤§éœ€æ±‚ï¼Œä½¿æ¯ä¸ªè¿›ç¨‹éƒ½å¯é¡ºåˆ©åœ°å®Œæˆï¼Œç§° &lt;P1, P2, â€¦, Pn&gt; åºåˆ—ä¸ºå®‰å…¨åºåˆ—ã€‚å¦‚æžœç³»ç»Ÿæ— æ³•æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªå®‰å…¨åºåˆ—ï¼Œåˆ™ç§°ç³»ç»Ÿå¤„äºŽä¸å®‰å…¨çŠ¶æ€ã€‚ æ•°æ®ç»“æž„çš„å®šä¹‰ï¼š å®šä¹‰ æè¿° Max è¿›ç¨‹å¯¹å„ç§èµ„æºçš„æœ€å¤§éœ€æ±‚ Allocation è¿›ç¨‹å·²å ç”¨ï¼ˆåˆ†é…ï¼‰çš„å„ç§èµ„æºçš„æ•°é‡ Need è¿›ç¨‹å¯¹å„ç§èµ„æºçš„å‰©ä½™éœ€æ±‚é‡ Available ç³»ç»Ÿå½“å‰å¯ç”¨èµ„æºæ•°é‡ Work æ¯ä¸ªè¿›ç¨‹å®ŒæˆåŽç³»ç»Ÿå¯ç”¨èµ„æºæ•°é‡ï¼ˆåˆå§‹å€¼ä¸º Availableï¼‰ Finish æ¯ä¸ªè¿›ç¨‹èƒ½å¦å®Œæˆ é“¶è¡Œå®¶ç®—æ³•é“¶è¡Œå®¶ç®—æ³•åŽŸæœ¬æ˜¯ä¸ºé“¶è¡Œç³»ç»Ÿè®¾è®¡çš„ï¼Œä»¥ç¡®ä¿é“¶è¡Œåœ¨å‘æ”¾çŽ°é‡‘è´·æ¬¾æ—¶ï¼Œä¸ä¼šå‘ç”Ÿä¸èƒ½æ»¡è¶³æ‰€æœ‰å®¢æˆ·éœ€è¦çš„æƒ…å†µã€‚å½“è¿›ç¨‹è¯·æ±‚ä¸€ç»„èµ„æºæ—¶ï¼Œç³»ç»Ÿå¿…é¡»é¦–å…ˆç¡®å®šæ˜¯å¦æœ‰è¶³å¤Ÿçš„èµ„æºåˆ†é…ç»™è¯¥è¿›ç¨‹ã€‚è‹¥æœ‰ï¼Œå†è¿›ä¸€æ­¥è®¡ç®—åœ¨å°†è¿™äº›èµ„æºåˆ†é…ç»™è¿›ç¨‹åŽï¼Œæ˜¯å¦ä¼šä½¿ç³»ç»Ÿå¤„äºŽä¸å®‰å…¨çš„çŠ¶æ€ã€‚å¦‚æžœä¸ä¼šï¼Œæ‰å°†èµ„æºåˆ†é…ç»™å®ƒã€‚åˆ¤æ–­æ–¹æ³•ï¼š è™šæ‹Ÿæ‰§è¡Œè¿™ä¸ªåˆ†é…è¯·æ±‚ï¼Œä½¿å¾—å½“å‰çŠ¶æ€è¿›å…¥ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼› åœ¨ä¸‹ä¸€ä¸ªçŠ¶æ€ä¸­å¯»æ‰¾å®‰å…¨åºåˆ—ï¼› è‹¥æ‰¾åˆ°ï¼Œè¯´æ˜ŽçŠ¶æ€å®‰å…¨ï¼Œå¯ä»¥æ‰§è¡Œåˆ†é…è¯·æ±‚ï¼›å¦åˆ™æ‹’ç»åˆ†é…è¯·æ±‚ã€‚ ç®—æ³•ç¼ºç‚¹ï¼š å¾ˆå°‘è¿›ç¨‹èƒ½å¤Ÿåœ¨è¿è¡Œå‰å°±çŸ¥é“å®ƒæ‰€éœ€èµ„æºçš„æœ€å¤§å€¼ã€‚ ç³»ç»Ÿå†…çš„è¿›ç¨‹æ•°æ˜¯ä¸å›ºå®šçš„ï¼Œå¾€å¾€åœ¨ä¸æ–­å˜åŒ–ï¼Œæœ‰æ–°çš„è¿›å…¥ï¼Œæœ‰å®Œæˆçš„é€€å‡ºã€‚ ðŸ˜„ To be continued.ðŸ‘‰ Next.ðŸ‘‰ Previous.]]></content>
      <categories>
        <category>Dev</category>
      </categories>
      <tags>
        <tag>os</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ“ä½œç³»ç»ŸçŸ¥è¯†æ€»ç»“]]></title>
    <url>%2F2018%2F07%2F01%2Fall-os%2F</url>
    <content type="text"><![CDATA[æ“ä½œç³»ç»Ÿæ¦‚è®ºæ“ä½œç³»ç»Ÿçš„ä½œç”¨ ä½œä¸ºç”¨æˆ·ä¸Žè®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„æŽ¥å£ã€‚ ä½œä¸ºè®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…ã€‚ å®žçŽ°å¯¹è®¡ç®—æœºèµ„æºçš„æŠ½è±¡ã€‚ æ“ä½œç³»ç»Ÿçš„å››ä¸ªåŸºæœ¬ç‰¹æ€§ å¹¶å‘åœ¨ä¸€æ®µæ—¶é—´å†…å¤šä¸ªç¨‹åºå¹¶å‘æ‰§è¡Œã€‚ å…±äº«ç³»ç»Ÿä¸­çš„èµ„æºå¯ä»¥è¢«å†…å­˜ä¸­å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›çº¿ç¨‹å…±åŒä½¿ç”¨ã€‚ è™šæ‹Ÿé€šè¿‡åˆ†æ—¶ç³»ç»Ÿä»¥åŠè™šæ‹Ÿå†…å­˜æŠ€æœ¯å®žçŽ°æŠŠä¸€ä¸ªç‰©ç†å®žä½“è™šæ‹Ÿä¸ºè‹¥å¹²ä¸ªé€»è¾‘ä¸Šçš„å¯¹åº”ç‰©ã€‚ å¼‚æ­¥ç³»ç»Ÿä¸­çš„è¿›ç¨‹ä»¥ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æŽ¨è¿›ï¼Œä½†åªè¦è¿è¡ŒçŽ¯å¢ƒç›¸åŒï¼Œå¤šæ¬¡è¿è¡Œéƒ½ä¼šèŽ·å¾—å®Œå…¨ç›¸åŒçš„ç»“æžœã€‚ æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ å¤„ç†æœºç®¡ç†ï¼šè¿›ç¨‹æŽ§åˆ¶ã€è¿›ç¨‹åŒæ­¥ã€è¿›ç¨‹é€šä¿¡ã€CPU è°ƒåº¦ å­˜å‚¨å™¨ç®¡ç†ï¼šå†…å­˜åˆ†é…ã€åœ°å€æ˜ å°„ è®¾å¤‡ç®¡ç†ï¼šç¼“å†²ç®¡ç†ã€è®¾å¤‡åˆ†é…ã€è®¾å¤‡å¤„ç†ã€è™šæ‹Ÿè®¾å¤‡ æ–‡ä»¶ç®¡ç†ï¼šå­˜å‚¨ç©ºé—´ç®¡ç†ã€ç›®å½•ç®¡ç† ç”¨æˆ·æŽ¥å£ï¼šå›¾å½¢æŽ¥å£ã€å‘½ä»¤æŽ¥å£ è¿›ç¨‹åŸºæœ¬æ¦‚å¿µç¨‹åºé¡ºåºæ‰§è¡Œçš„ç‰¹å¾ é¡ºåºæ€§ï¼šä¸‹ä¸€æ“ä½œè¦ç­‰å¾…å‰ä¸€æ“ä½œæ‰§è¡Œç»“æŸã€‚ å°é—­æ€§ï¼šæ‰§è¡Œç‹¬å èµ„æºï¼Œä¸å—å¤–ç•Œå½±å“ã€‚ å¯å†çŽ°æ€§ï¼šé‡å¤æ‰§è¡Œå¾—åˆ°ç›¸åŒç»“æžœã€‚ ç¨‹åºå¹¶å‘æ‰§è¡Œçš„ç‰¹å¾ é—´æ–­æ€§ å¤±åŽ»å°é—­æ€§ ä¸å¯å†çŽ°æ€§ï¼šé‡å¤æ‰§è¡Œå¯å¼•å‘å¤šç§ç»“æžœã€‚ ç¨‹åºå¹¶å‘çš„ä¸‰ä¸ªç‰¹å¾ä½¿å¾—ç¨‹åºä¸èƒ½å¹¶å‘åœ°æ­£ç¡®æ‰§è¡Œï¼Œä¸ºäº†ä¿è¯ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå¼•å…¥è¿›ç¨‹ã€‚ è¿›ç¨‹çš„ç»“æž„è¿›ç¨‹ç”±ç¨‹åºã€æ•°æ®ã€è¿›ç¨‹æŽ§åˆ¶å—(PCB)ä¸‰éƒ¨åˆ†ç»„æˆã€‚ ç¨‹åºï¼šä»£ç æ®µï¼Œæè¿°è¿›ç¨‹è¦å®Œæˆçš„åŠŸèƒ½ã€‚ æ•°æ®ï¼šæ•°æ®æ®µï¼Œè¿›ç¨‹æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„æ•°æ®åŒºã€‚ è¿›ç¨‹æŽ§åˆ¶å—ï¼šä¸€ç§æ•°æ®ç»“æž„ï¼Œç”¨äºŽæ ‡è¯†è¿›ç¨‹çš„å­˜åœ¨ï¼Œè®°å½•è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å„ä¸ªæ—¶åˆ»çš„çŠ¶æ€ç‰¹å¾ã€‚ è¿›ç¨‹çš„å››ä¸ªç‰¹æ€§ åŠ¨æ€ï¼šè¿›ç¨‹å…·æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œä»Žåˆ›å»ºï¼Œæ‰§è¡Œï¼Œåˆ°æ¶ˆäº¡ã€‚ å¹¶å‘ï¼šå¤šä¸ªè¿›ç¨‹å…±å­˜äºŽå†…å­˜ä¸­ï¼Œå¹¶å‘æ‰§è¡Œã€‚ ç‹¬ç«‹ï¼šè¿›ç¨‹é—´èµ„æºç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ã€‚è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ã€‚ å¼‚æ­¥ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½ä»¥å…¶ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‰è¿›ã€‚ è¿›ç¨‹ä¸Žç¨‹åºçš„åŒºåˆ« è¿›ç¨‹æ˜¯åŠ¨æ€çš„æ‰§è¡Œå®žä½“ï¼Œç¨‹åºæ˜¯é™æ€çš„æ•°æ®ä¸ŽæŒ‡ä»¤çš„é›†åˆã€‚ ä¸€ä¸ªç¨‹åºå¯ä»¥åŒ…å«å¤šä¸ªè¿›ç¨‹ã€‚ è¿›ç¨‹ç”¨äºŽå¹¶å‘æ‰§è¡Œä¸ŽæŽ¥å—è°ƒåº¦ï¼Œç¨‹åºç”¨äºŽå­˜å‚¨æ•°æ®å’ŒæŽ¥å—ç³»ç»Ÿå¯åŠ¨ã€‚ è¿›ç¨‹æ‰§è¡Œéœ€è¦ CPUï¼Œç¨‹åºå­˜å‚¨éœ€è¦å­˜å‚¨å™¨ã€‚ è¿›ç¨‹å…·æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œç¨‹åºæ˜¯æ°¸å­˜çš„ã€‚ è¿›ç¨‹çš„ä¸‰ç§åŸºæœ¬çŠ¶æ€ å°±ç»ªçŠ¶æ€ï¼šå·²èŽ·å¾—é™¤ CPU ä»¥å¤–çš„å…¶ä»–æ‰€æœ‰èµ„æºï¼Œå¤„äºŽå°±ç»ªé˜Ÿåˆ—ï¼Œç­‰å¾… CPU è°ƒåº¦ã€‚ æ‰§è¡ŒçŠ¶æ€ï¼šèŽ·å¾— CPUï¼Œå¤„äºŽæ‰§è¡Œè¿‡ç¨‹ã€‚ é˜»å¡žçŠ¶æ€ï¼šæŸä¸ªäº‹ä»¶æš‚æ—¶æ— æ³•è¿›è¡Œï¼Œä¸»åŠ¨æ”¾å¼ƒ CPUã€‚ PCB çš„ä½œç”¨PCB ä¸­åŒ…å«è¿›ç¨‹æ ‡è¯†ç¬¦ã€å¤„ç†æœºçŠ¶æ€ã€è¿›ç¨‹è°ƒåº¦ä¿¡æ¯ã€è¿›ç¨‹æŽ§åˆ¶ä¿¡æ¯ã€‚æ‰€ä»¥ PCB å…·æœ‰ä»¥ä¸‹ä½œç”¨ï¼š è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡è¯† è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ æè¿°è¿›ç¨‹å˜åŒ–çš„è¿‡ç¨‹ è®°å½•è¿›ç¨‹å’Œå…¶ä»–è¿›ç¨‹çš„è”ç³» PCB çš„ç»„ç»‡æ–¹å¼ é“¾æŽ¥æ–¹å¼ï¼šæŠŠå…·æœ‰ç›¸åŒçŠ¶æ€çš„è¿›ç¨‹çš„ PCB åˆ†åˆ«é€šè¿‡ PCB ä¸­çš„é“¾æŽ¥å­—æ®µé“¾æŽ¥æˆä¸€ä¸ªé˜Ÿåˆ—ã€‚ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹ PCB æŽ’åœ¨é˜Ÿåˆ—å‰é¢ã€‚ ç´¢å¼•æ–¹å¼ï¼šæ ¹æ®è¿›ç¨‹çŠ¶æ€çš„ä¸åŒå»ºç«‹ç´¢å¼•ã€‚ åŽŸè¯­æ“ä½œåŽŸè¯­ç”±è‹¥å¹²æŒ‡ä»¤ç»„æˆï¼Œæ˜¯ç”¨äºŽå®Œæˆä¸€å®šåŠŸèƒ½çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚åŽŸè¯­æ“ä½œæ˜¯ä¸€ç§åŽŸå­æ“ä½œï¼›åŽŸè¯­ä¸­çš„æ“ä½œè¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆå…¨ä¸åšã€‚ è¿›ç¨‹æŽ§åˆ¶è¿›ç¨‹åˆ›å»º ç”³è¯·ç©ºç™½ PCBï¼› ä¸ºæ–°è¿›ç¨‹åˆ†é…èµ„æºï¼› åˆå§‹åŒ– PCBï¼› å¦‚æžœè¿›ç¨‹å°±ç»ªé˜Ÿåˆ—èƒ½å¤ŸæŽ¥çº³æ–°è¿›ç¨‹ï¼Œå°±å°†æ–°è¿›ç¨‹æ’å…¥å°±ç»ªé˜Ÿåˆ—ã€‚ è¿›ç¨‹ç»ˆæ­¢ æ ¹æ®æ ‡è¯†ç¬¦ä»Ž PCB é›†åˆä¸­æ£€ç´¢å‡º PCBï¼Œè¯»å–è¿›ç¨‹çŠ¶æ€ï¼› è‹¥æ­£å¤„äºŽæ‰§è¡ŒçŠ¶æ€ï¼Œç«‹å³ç»ˆæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œå¹¶ç½®è°ƒåº¦æ ‡å¿—ä½çœŸï¼Œåœ¨è¿›ç¨‹è¢«ç»ˆæ­¢åŽé‡æ–°è°ƒåº¦ï¼› ç»ˆæ­¢è¯¥è¿›ç¨‹çš„å­å­™è¿›ç¨‹ï¼Œä»¥é˜²æ­¢æˆä¸ºä¸å¯æŽ§çš„è¿›ç¨‹ï¼› å›žæ”¶èµ„æºï¼Œå½’è¿˜ç»™çˆ¶è¿›ç¨‹/ç³»ç»Ÿï¼› PCB ç§»å‡ºæ‰€åœ¨é˜Ÿåˆ—æˆ–é“¾è¡¨ã€‚ è¿›ç¨‹é˜»å¡žï¼ˆå¯¹åº”å”¤é†’ï¼‰æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“å‘çŽ°å¼•å‘é˜»å¡žçš„äº‹ä»¶è€Œæ— æ³•ç»§ç»­æ‰§è¡Œæ—¶ï¼Œè¿›ç¨‹è°ƒç”¨é˜»å¡žåŽŸè¯­blockæŠŠè‡ªå·±é˜»å¡žã€‚ åœæ­¢å½“å‰æ‰§è¡Œï¼› ä¿®æ”¹çŠ¶æ€ï¼Œç”±æ‰§è¡Œæ”¹ä¸ºé˜»å¡žï¼› å°† PCB æ’å…¥é˜»å¡žé˜Ÿåˆ—ï¼Œè‹¥æœ‰å› ä¸åŒäº‹ä»¶è€Œåˆ’åˆ†çš„å¤šä¸ªé˜»å¡žé˜Ÿåˆ—ï¼Œé˜»å¡žè¿›ç¨‹æ’å…¥ç›¸åº”é˜Ÿåˆ—ï¼› é‡æ–°è°ƒåº¦ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å¦ä¸€å°±ç»ªè¿›ç¨‹ï¼› CPU çŽ¯å¢ƒåˆ‡æ¢ï¼Œä¿å­˜è¢«é˜»å¡žè¿›ç¨‹çš„ CPU çŠ¶æ€åˆ° PCB ä¸­ï¼ŒæŒ‰æ–°è¿›ç¨‹ PCB çš„ CPU çŠ¶æ€è®¾ç½® CPU æ–°çŽ¯å¢ƒã€‚ è¿›ç¨‹å”¤é†’è¢«é˜»å¡žçš„äº‹ä»¶å·²æ»¡è¶³ï¼Œå¦‚ I/O å®Œæˆæˆ–æ‰€éœ€æ•°æ®å·²åˆ°è¾¾ï¼Œåˆ™ç”±æœ‰å…³è¿›ç¨‹è°ƒç”¨å”¤é†’åŽŸè¯­wakeupï¼Œå°†é˜»å¡žçš„è¿›ç¨‹å”¤é†’ï¼š å…ˆæŠŠè¢«é˜»å¡žçš„è¿›ç¨‹ä»Žç­‰å¾…è¯¥äº‹ä»¶çš„é˜»å¡žé˜Ÿåˆ—ä¸­ç§»å‡ºï¼› å°†å…¶ PCB çŠ¶æ€ç”±é˜»å¡žæ”¹ä¸ºå°±ç»ªï¼› å†å°†è¯¥ PCB æ’å…¥åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ã€‚ è¿›ç¨‹æŒ‚èµ·ï¼ˆå¯¹åº”æ¿€æ´»ï¼‰æŒ‚èµ·æ˜¯å°†æ´»åŠ¨çŠ¶æ€æ”¹ä¸ºé™æ­¢çŠ¶æ€çš„è¿‡ç¨‹ã€‚ æŒ‚èµ·ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ä¸ªåŽŸå› ï¼š ç»ˆç«¯ç”¨æˆ·çš„è¯·æ±‚ï¼šå½“ç»ˆç«¯ç”¨æˆ·å‘çŽ°è‡ªå·±ç¨‹åºè¿è¡ŒæœŸé—´æœ‰å¯ç–‘è¿›ç¨‹æ—¶ï¼Œéœ€è¦æŒ‚èµ·æ£€æŸ¥ã€‚ çˆ¶è¿›ç¨‹çš„è¯·æ±‚ï¼šæœ‰æ—¶çˆ¶è¿›ç¨‹å¸Œæœ›æŒ‚èµ·è‡ªå·±çš„æŸä¸ªå­è¿›ç¨‹ï¼Œä»¥ä¾¿è€ƒå¯Ÿå’Œä¿®æ”¹å­è¿›ç¨‹ï¼Œæˆ–è€…åè°ƒå„å­è¿›ç¨‹é—´çš„æ´»åŠ¨ã€‚ è´Ÿè½½è°ƒèŠ‚çš„éœ€è¦ï¼šä¿è¯ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚ æ“ä½œç³»ç»Ÿçš„éœ€è¦ï¼šæ“ä½œç³»ç»Ÿæœ‰æ—¶å¸Œæœ›æŒ‚èµ·æŸäº›è¿›ç¨‹ï¼Œä»¥ä¾¿æ£€æŸ¥è¿è¡Œä¸­çš„èµ„æºä½¿ç”¨æƒ…å†µã€‚ æŒ‚èµ·åŽŸè¯­çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š æ£€æŸ¥è¢«æŒ‚èµ·è¿›ç¨‹çš„çŠ¶æ€ï¼Œæ´»åŠ¨å°±ç»ªæ”¹ä¸ºé™æ­¢å°±ç»ªï¼›æ´»åŠ¨é˜»å¡žæ”¹ä¸ºé™æ­¢é˜»å¡žï¼› å°† PCB å¤åˆ¶åˆ°æŒ‡å®šçš„å†…å­˜åŒºåŸŸï¼› æ•°æ®å¤åˆ¶åˆ°å¤–å­˜ï¼Œé‡Šæ”¾å†…å­˜ï¼› è‹¥è¢«æŒ‚èµ·çš„è¿›ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œåˆ™é‡æ–°è°ƒåº¦ã€‚ è¿›ç¨‹æ¿€æ´»å½“å‘ç”Ÿæ¿€æ´»è¿›ç¨‹çš„äº‹ä»¶ï¼Œå¦‚çˆ¶è¿›ç¨‹æˆ–ç”¨æˆ·è¿›ç¨‹è¯·æ±‚æ¿€æ´»ï¼Œæˆ–å½“å‰å†…å­˜æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œç³»ç»Ÿåˆ©ç”¨æ¿€æ´»åŽŸè¯­activeå°†è¿›ç¨‹æ¿€æ´»ã€‚ æ¿€æ´»åŽŸè¯­çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š å…ˆå°†è¿›ç¨‹ä»Žå¤–å­˜è°ƒå…¥å†…å­˜ï¼› æ£€æŸ¥è¯¥è¿›ç¨‹çš„çŽ°è¡ŒçŠ¶æ€ï¼Œé™æ­¢å°±ç»ªæ”¹ä¸ºæ´»åŠ¨å°±ç»ªï¼›é™æ­¢é˜»å¡žæ”¹ä¸ºæ´»åŠ¨é˜»å¡žï¼› è‹¥æ˜¯è¿›å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œåˆ™é‡æ–°è°ƒåº¦ï¼ŒæŠ¢å å¼å’ŒéžæŠ¢å å¼è°ƒåº¦ã€‚ è¿›ç¨‹åŒæ­¥è¿›ç¨‹åŒæ­¥çš„ä»»åŠ¡æ˜¯ä½¿å¹¶å‘æ‰§è¡Œçš„è¯¸è¿›ç¨‹ä¹‹é—´èƒ½æœ‰æ•ˆåœ°å…±äº«èµ„æºå’Œç›¸äº’åˆä½œï¼Œä»Žè€Œä½¿è¿›ç¨‹çš„æ‰§è¡Œå…·æœ‰å¯å†è§æ€§ã€‚åŒæ­¥æœºåˆ¶åº”éµå¾ªçš„è§„åˆ™ï¼š ç©ºé—²è®©è¿› å¿™åˆ™ç­‰å¾… æœ‰é™ç­‰å¾… è®©æƒç­‰å¾… ä¿¡å·é‡æœºåˆ¶ æ•´åž‹ä¿¡å·é‡ä½¿ç”¨ä¸€ä¸ªä»£è¡¨èµ„æºæ•°ç›®çš„æ•´åž‹å˜é‡ã€‚æœªéµå¾ªâ€œè®©æƒç­‰å¾…â€è§„åˆ™ã€‚ è®°å½•åž‹ä¿¡å·é‡å¢žåŠ ä¸€ä¸ªè¿›ç¨‹é“¾è¡¨ Lï¼Œç”¨äºŽé“¾æŽ¥æ‰€æœ‰ç­‰å¾…è¿›ç¨‹ã€‚åˆå§‹å€¼ä¸º 1ï¼Œè¡¨ç¤ºåªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ä¸´ç•Œèµ„æºï¼Œæ­¤æ—¶çš„ä¿¡å·é‡è½¬æ¢ä¸ºäº’æ–¥ä¿¡å·é‡ã€‚ AND åž‹ä¿¡å·é‡å°†è¿›ç¨‹åœ¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„æ‰€æœ‰èµ„æºï¼Œä¸€æ¬¡åˆ†é…ç»™è¿›ç¨‹ï¼Œå¾…è¿›ç¨‹ä½¿ç”¨å®ŒåŽå†ä¸€èµ·é‡Šæ”¾ã€‚å³ï¼šè¦ä¹ˆå…¨éƒ¨åˆ†é…åˆ°è¿›ç¨‹ï¼Œè¦ä¹ˆä¸€ä¸ªä¹Ÿä¸åˆ†é…ã€‚ ç®¡ç¨‹ç®¡ç¨‹æ˜¯ä¸€ç§å…±äº«æ•°æ®ç»“æž„ï¼Œå¯¹è¯¥å…±äº«æ•°æ®ç»“æž„å®žæ–½çš„ç‰¹å®šæ“ä½œå®šä¹‰ä¸ºä¸€ç»„è¿‡ç¨‹ã€‚è¿›ç¨‹å¯¹å…±äº«èµ„æºçš„ç”³è¯·ã€é‡Šæ”¾å’Œå…¶ä»–æ“ä½œå¿…é¡»é€šè¿‡è¿™ç»„è¿‡ç¨‹ã€‚ å±€éƒ¨æ•°æ®å˜é‡åªèƒ½è¢«ç®¡ç¨‹çš„è¿‡ç¨‹è®¿é—®ï¼Œä»»ä½•å¤–éƒ¨è¿‡ç¨‹éƒ½ä¸èƒ½è®¿é—®ã€‚ ä¸€ä¸ªè¿›ç¨‹é€šè¿‡è°ƒç”¨ç®¡ç¨‹çš„ä¸€ä¸ªè¿‡ç¨‹è¿›å…¥ç®¡ç¨‹ã€‚ åœ¨ä»»ä½•æ—¶å€™ï¼Œåªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ç®¡ç¨‹ä¸­æ‰§è¡Œï¼Œè°ƒç”¨ç®¡ç¨‹çš„ä»»ä½•å…¶å®ƒè¿›ç¨‹éƒ½è¢«é˜»å¡žã€‚ ç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…é—®é¢˜å¯ä»¥åˆ©ç”¨â€œè®°å½•åž‹ä¿¡å·é‡ã€AND åž‹ä¿¡å·é‡ã€ç®¡ç¨‹â€æ¥è§£å†³ç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…é—®é¢˜ï¼Œè¿™é‡Œæ¼”è®°å½•åž‹ä¿¡å·é‡çš„ä½¿ç”¨ã€‚å‡è®¾æœ‰nä¸ªç¼“å†²åŒºã€‚ å˜é‡ åŠŸèƒ½/æè¿° mutex å®žçŽ°è¯¸è¿›ç¨‹å¯¹ç¼“å†²åŒºçš„äº’æ–¥è®¿é—®ï¼ˆå…¬æœ‰ï¼‰ empty ç¼“å†²æ± ä¸­ç©ºç¼“å†²åŒºçš„æ•°é‡ï¼ˆç§æœ‰ï¼‰ full ç¼“å†²æ± ä¸­æ»¡ç¼“å†²åŒºçš„æ•°é‡ï¼ˆç§æœ‰ï¼‰ 1234567891011// ç”Ÿäº§è€…producer:begin repeat produce an item nextp; wait(empty); // å…ˆç§ wait(mutex); // åŽå…¬ buffer(in) âˆ¶= nextp; in âˆ¶= (in + 1) mod n; signal(mutex); signal(full); until false; 12345678910// æ¶ˆè´¹è€…consumer:begin repeat wait(full); // å…ˆç§ wait(mutex); // åŽå…¬ nextc âˆ¶= buffer(out); out âˆ¶= (out + 1) mod n; signal(mutex); signal(empty); consume the item in nextc; å“²å­¦å®¶è¿›é¤é—®é¢˜äº”ä¸ªå“²å­¦å®¶è¿›é¤ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿ è‡³å¤šåªå…è®¸æœ‰å››ä½å“²å­¦å®¶åŒæ—¶åŽ»æ‹¿å·¦è¾¹çš„ç­·å­ å½“å“²å­¦å®¶çš„å·¦ã€å³ä¸¤åªç­·å­å‡å¯ç”¨æ—¶ï¼Œæ‰å…è®¸ä»–æ‹¿èµ·ç­·å­è¿›é¤ã€‚ è§„å®šå¥‡æ•°å·å“²å­¦å®¶å…ˆæ‹¿ä»–å·¦è¾¹çš„ç­·å­ï¼Œç„¶åŽå†åŽ»æ‹¿å³è¾¹çš„ç­·å­ï¼›è€Œå¶æ•°å·å“²å­¦å®¶åˆ™ç›¸åã€‚ è¯»è€…â€”â€”å†™è€…é—®é¢˜ ä¸€ä¸ªæ•°æ®æ–‡ä»¶å¯è¢«å¤šä¸ªè¿›ç¨‹å…±äº« å…è®¸å¤šä¸ªè¿›ç¨‹åŒæ—¶è¯»ï¼Œç¦æ­¢å¤šä¸ªè¿›ç¨‹åŒæ—¶å†™ å½“ä¸€ä¸ªè¿›ç¨‹å†™çš„æ—¶å€™ï¼Œå…¶ä»–æ‰€æœ‰è¯»è¿›ç¨‹éƒ½è¦åœæ­¢ å½“è¿›ç¨‹è¯»çš„æ—¶å€™ï¼Œä¸å…è®¸å†™è¿›ç¨‹çš„å‘ç”Ÿã€‚ è¯»å†™æ˜¯äº’æ–¥çš„ã€‚ 12345678910111213141516171819202122232425var rmutex, wmutex:semaphore = 1, 1; readcount:integer = 0; begin parbegin reader:begin repeat wait(rmutex); if readcount = 0 then wait(wmutex); readcount âˆ¶= readcount + 1; signal(rmutex); perform read operation; wait(rmutex); readcount = readcount - 1; if readcount = 0 then signal(wmutex); signal(rmutex); until false; end writer:begin repeat wait(wmutex); perform write operation; signal(wmutex); until false; è¿›ç¨‹é€šä¿¡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPC, InterProcess Communicationï¼‰æ˜¯æŒ‡åœ¨ä¸åŒè¿›ç¨‹ä¹‹é—´ä¼ æ’­æˆ–äº¤æ¢ä¿¡æ¯ã€‚ è¿›ç¨‹é€šä¿¡æ–¹å¼ å…±äº«å†…å­˜ï¼ˆæœ€å¿«ï¼‰åŒä¸€å—ç‰©ç†å†…å­˜è¢«æ˜ å°„åˆ°è¿›ç¨‹ Aã€è¿›ç¨‹ B å„è‡ªçš„è¿›ç¨‹ç©ºé—´ã€‚è¿›ç¨‹ A å¯ä»¥å³æ—¶çœ‹åˆ°è¿›ç¨‹ B å¯¹å…±äº«å†…å­˜ä¸­æ•°æ®çš„æ›´æ–°ï¼Œåä¹‹äº¦ç„¶ã€‚ç”±äºŽå¤šä¸ªè¿›ç¨‹å…±äº«åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œå¿…ç„¶éœ€è¦ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œäº’æ–¥é”å’Œä¿¡å·é‡éƒ½å¯ä»¥ã€‚ ç®¡é“ç®¡é“æ˜¯æŒ‡ç”¨äºŽè¿žæŽ¥ä¸€ä¸ªè¯»è¿›ç¨‹å’Œä¸€ä¸ªå†™è¿›ç¨‹ä»¥å®žçŽ°å®ƒä»¬ä¹‹é—´é€šä¿¡çš„ä¸€ä¸ªå…±äº«æ–‡ä»¶ï¼Œåˆå«pipeæ–‡ä»¶ã€‚å†™è¿›ç¨‹ï¼šä»¥å­—ç¬¦æµå½¢å¼å°†å¤§é‡çš„æ•°æ®é€å…¥å…±äº«æ–‡ä»¶ï¼Œå³é€å…¥ç®¡é“ã€‚è¯»è¿›ç¨‹ï¼šä»Žç®¡é“ä¸­æŽ¥æ”¶æ•°æ®ï¼Œå³ä»Žå…±äº«æ–‡ä»¶ä¸­è¯»æ•°æ®ã€‚ç®¡é“åªæ”¯æŒåŠåŒå·¥é€šä¿¡ï¼ˆå•å‘ä¼ è¾“ï¼‰ï¼›åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹ä¸­ä½¿ç”¨ï¼›ç®¡é“å®žè´¨æ˜¯é‡‡ç”¨æ–‡ä»¶çš„è¯»å†™æ“ä½œï¼Œæ”¯æŒå¤§æ•°æ®é‡çš„ä¼ è¾“ã€‚ å‘½åç®¡é“å³ FIFO æ–‡ä»¶ï¼Œé€šè¿‡å‘½åç®¡é“å¯ä»¥å®žçŽ°åœ¨ä¸ç›¸å…³çš„è¿›ç¨‹ä¹‹é—´äº¤æ¢æ•°æ®ã€‚ æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆæ¯é˜Ÿåˆ—æä¾›äº†ä¸€ç§ä»Žä¸€ä¸ªè¿›ç¨‹å‘å¦ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªæ•°æ®å—çš„æ–¹æ³•ã€‚æ¯ä¸ªæ•°æ®å—éƒ½è¢«è®¤ä¸ºå«æœ‰ä¸€ä¸ªç±»åž‹ï¼ŒæŽ¥æ”¶è¿›ç¨‹å¯ä»¥ç‹¬ç«‹åœ°æŽ¥æ”¶å«æœ‰ä¸åŒç±»åž‹çš„æ•°æ®ç»“æž„ã€‚ç›¸æ¯”äºŽ FIFOï¼Œæ¶ˆæ¯é˜Ÿåˆ—å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥ç‹¬ç«‹äºŽè¯»å†™è¿›ç¨‹å­˜åœ¨ï¼Œä»Žè€Œé¿å…äº† FIFO ä¸­åŒæ­¥ç®¡é“çš„æ‰“å¼€å’Œå…³é—­æ—¶å¯èƒ½äº§ç”Ÿçš„å›°éš¾ï¼› é¿å…äº† FIFO çš„åŒæ­¥é˜»å¡žé—®é¢˜ï¼Œä¸éœ€è¦è¿›ç¨‹è‡ªå·±æä¾›åŒæ­¥æ–¹æ³•ï¼› è¯»è¿›ç¨‹å¯ä»¥æ ¹æ®æ¶ˆæ¯ç±»åž‹æœ‰é€‰æ‹©åœ°æŽ¥æ”¶æ¶ˆæ¯ï¼Œè€Œä¸åƒ FIFO é‚£æ ·åªèƒ½é»˜è®¤åœ°æŽ¥æ”¶ã€‚ å¥—æŽ¥å­—ä¸Žå…¶å®ƒé€šä¿¡æœºåˆ¶ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ç”¨äºŽä¸åŒæœºå™¨é—´çš„è¿›ç¨‹é€šä¿¡ã€‚ è¿›ç¨‹ä¸Žçº¿ç¨‹çš„åŒºåˆ« åœ°å€ç©ºé—´è¿›ç¨‹ä¹‹é—´æ˜¯ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œè€ŒåŒä¸€è¿›ç¨‹çš„çº¿ç¨‹åˆ™å…±äº«æœ¬è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚ èµ„æºæ‹¥æœ‰è¿›ç¨‹ä¹‹é—´çš„èµ„æºæ˜¯ç‹¬ç«‹çš„ï¼Œè€ŒåŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«æœ¬è¿›ç¨‹çš„èµ„æºï¼Œå¦‚å†…å­˜ã€I/Oã€CPU ç­‰ã€‚ä¸€ä¸ªè¿›ç¨‹å´©æºƒåŽï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹å´©æºƒåŽæ•´ä¸ªè¿›ç¨‹éƒ½æ­»æŽ‰ã€‚æ‰€ä»¥å¤šè¿›ç¨‹è¦æ¯”å¤šçº¿ç¨‹å¥å£®ã€‚ æ‰§è¡Œè¿‡ç¨‹æ¯ä¸ªç‹¬ç«‹çš„è¿›ç¨‹æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œçš„å…¥å£ã€é¡ºåºæ‰§è¡Œåºåˆ—å’Œç¨‹åºå…¥å£ï¼Œè€Œçº¿ç¨‹ä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œå¿…é¡»ä¾å­˜åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›å¤šä¸ªçº¿ç¨‹æ‰§è¡ŒæŽ§åˆ¶ã€‚ çº¿ç¨‹æ˜¯å¤„ç†æœºè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œä½†æ˜¯è¿›ç¨‹ä¸æ˜¯ã€‚ å› æ­¤ï¼Œå¯¹èµ„æºçš„ç®¡ç†å’Œä¿æŠ¤è¦æ±‚é«˜ã€ä¸é™åˆ¶å¼€é”€å’Œæ•ˆçŽ‡æ—¶ï¼Œä½¿ç”¨å¤šè¿›ç¨‹ã€‚è¦æ±‚æ•ˆçŽ‡é«˜ã€é¢‘ç¹åˆ‡æ¢ã€èµ„æºçš„ä¿æŠ¤ç®¡ç†è¦æ±‚ä¸æ˜¯å¾ˆé«˜æ—¶ï¼Œä½¿ç”¨å¤šçº¿ç¨‹ã€‚ ðŸ˜„ To be continued.ðŸ‘‰ Next.]]></content>
      <categories>
        <category>Dev</category>
      </categories>
      <tags>
        <tag>os</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œâ€”â€”åº”ç”¨å±‚]]></title>
    <url>%2F2018%2F06%2F30%2Fapplication-layer%2F</url>
    <content type="text"><![CDATA[HTTP åè®®HTTP åè®®ï¼ˆHyperText Transfer Protocal, è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ç”¨äºŽä»Ž WWW æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚å®ƒåŸºäºŽ TCP åè®®ä¹‹ä¸Šï¼Œå±žäºŽåº”ç”¨å±‚åè®®ã€‚ HTTP è¯·æ±‚å“åº”æ¨¡åž‹HTTP æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¸éœ€è¦å»ºç«‹æŒä¹…çš„è¿žæŽ¥ï¼Œè¿™æ„å‘³ç€å½“ä¸€ä¸ªå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›žå“åº”ä¹‹åŽï¼Œè¿žæŽ¥å³å…³é—­äº†ï¼Œåœ¨æœåŠ¡ç«¯ä¸ä¿ç•™è¿žæŽ¥çš„æœ‰å…³ä¿¡æ¯ã€‚]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>https</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œâ€”â€”ä¼ è¾“å±‚]]></title>
    <url>%2F2018%2F06%2F29%2Ftransport-layer%2F</url>
    <content type="text"><![CDATA[ä¼ è¾“å±‚æ¦‚è¿°åœ¨ OSIï¼ˆOpen System Interconnection, å¼€å‘ç³»ç»Ÿäº’è”ï¼‰ä¸ƒå±‚æ¨¡åž‹ä¸­ï¼Œä¼ è¾“å±‚æ˜¯é¢å‘é€šä¿¡çš„æœ€é«˜å±‚ï¼Œä¹Ÿæ˜¯é¢å‘ç”¨æˆ·åŠŸèƒ½çš„æœ€åº•å±‚ã€‚ ä¼ è¾“å±‚æœ‰ä¸¤å¤§åŠŸèƒ½ï¼š å¤ç”¨ï¼šåœ¨å‘é€ç«¯ï¼Œå¤šä¸ªåº”ç”¨è¿›ç¨‹å…±æœ‰ä¸€ä¸ªä¼ è¾“å±‚ã€‚ åˆ†ç”¨ï¼šåœ¨æŽ¥æ”¶ç«¯ï¼Œä¼ è¾“å±‚æ ¹æ®ç«¯å£å·å°†æ•°æ®åˆ†æ´¾ç»™ä¸åŒçš„åº”ç”¨è¿›ç¨‹ã€‚ ä¼ è¾“å±‚å’Œç½‘ç»œå±‚çš„åŒºåˆ«ï¼š ç½‘ç»œå±‚æ˜¯ä¸ºä¸åŒä¸»æœºæä¾›é€šä¿¡æœåŠ¡ï¼Œè€Œä¼ è¾“å±‚æ˜¯ä¸ºä¸åŒä¸»æœºçš„ä¸åŒåº”ç”¨ç¨‹åºæä¾›é€šä¿¡æœåŠ¡ã€‚ ç½‘ç»œå±‚åªå¯¹æŠ¥æ–‡å¤´éƒ¨è¿›è¡Œå·®é”™æ£€æµ‹ï¼Œè€Œä¼ è¾“å±‚å¯¹æ•´ä¸ªæŠ¥æ–‡è¿›è¡Œå·®é”™æ£€æµ‹ã€‚ UDP åè®®UDP çš„ç‰¹ç‚¹UDPï¼ˆUser Datagram Protocol, ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š æ— è¿žæŽ¥é€šä¿¡å‰ä¸éœ€è¦å»ºç«‹è¿žæŽ¥ï¼Œé€šä¿¡ç»“æŸä¹Ÿæ— é¡»é‡Šæ”¾è¿žæŽ¥ã€‚ ä¸å¯é UDP æ˜¯å°½åŠ›è€Œä¸ºäº¤ä»˜ï¼Œä¸èƒ½ç¡®ä¿æ¯ä¸ªæ•°æ®æŠ¥éƒ½é€è¾¾ã€‚ é¢å‘æŠ¥æ–‡UDP æ•°æ®ä¼ è¾“çš„åŸºæœ¬å•ä½æ˜¯æŠ¥æ–‡ï¼Œå®ƒä¸ä¼šå¯¹æ•°æ®åšä»»ä½•æ‹†åˆ†æˆ–æ‹¼æŽ¥æ“ä½œã€‚åœ¨å‘é€ç«¯ï¼Œåº”ç”¨ç¨‹åºç»™ä¼ è¾“å±‚çš„ UDP ä»€ä¹ˆæ•°æ®ï¼ŒUDP ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œæ‹†åˆ†ï¼Œåªå¢žåŠ ä¸€ä¸ª UDP å¤´åŽå°±äº¤ç»™ç½‘ç»œå±‚ï¼›åœ¨æŽ¥æ”¶ç«¯ï¼ŒUDP æ”¶åˆ°ç½‘ç»œå±‚çš„æ•°æ®æŠ¥åŽï¼Œä¸ä¼šä½œä»»ä½•æ‹¼æŽ¥æ“ä½œï¼ŒåŽ»æŽ‰æ•°æ®æŠ¥å¤´åŽä¾¿äº¤ç»™åº”ç”¨å±‚ã€‚ æ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶UDP å§‹ç»ˆä»¥æ’å®šçš„é€ŸçŽ‡å‘é€æ•°æ®ï¼Œå®ƒä¸ä¼šæ ¹æ®ç½‘ç»œæ‹¥å¡žæƒ…å†µå¯¹å‘é€é€ŸçŽ‡ä½œå‡ºè°ƒæ•´ã€‚è¿™ç§æ–¹å¼å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œä½†å¯ä»¥åº”ç”¨åœ¨â€œç›´æ’­ã€è¯­éŸ³é€šè¯â€è¿™ç§å…è®¸æ•°æ®ä¸¢å¤±ã€ä½†å¯¹å®žæ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚ æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤šé€šä¿¡ é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰ 8 å­—èŠ‚ UDP å¤´éƒ¨UDP å¤´éƒ¨åªæœ‰ 8 å­—èŠ‚ï¼ŒåŒ…æ‹¬ï¼š 16 ä½æºç«¯å£ 16 ä½ç›®çš„ç«¯å£ 16 ä½ UDP é•¿åº¦ 16 ä½ UDP æ£€éªŒå’Œ TCP åè®®TCP çš„ç‰¹ç‚¹TCPï¼ˆTransmission Control Protocol, ä¼ è¾“æŽ§åˆ¶åè®®ï¼‰æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š é¢å‘è¿žæŽ¥é€šä¿¡å‰éœ€è¦å»ºç«‹è¿žæŽ¥ï¼Œé€šä¿¡ç»“æŸåŽéœ€è¦é‡Šæ”¾è¿žæŽ¥ã€‚ å¯é TCP å‘é€çš„æ•°æ®æ— é‡å¤ã€æ— ä¸¢å¤±ã€ä¸Žå‘é€ç«¯é¡ºåºä¸€è‡´ã€‚ é¢å‘å­—èŠ‚æµTCP ä»¥å­—èŠ‚ä½å•ä½ï¼Œä¼ è¾“çš„è¿‡ç¨‹ä¸­æ•°æ®è¢«åˆ’åˆ†æˆä¸€ä¸ªä¸ªæ•°æ®æŠ¥ã€‚ å…¨åŒå·¥é€šä¿¡TCP çš„ä¸¤ç«¯æ—¢å¯ä»¥ä½œä¸ºå‘é€ç«¯ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæŽ¥æ”¶ç«¯ã€‚ ä¸€æ¡ TCP è¿žæŽ¥çš„ä¸¤ç«¯åªèƒ½æœ‰ä¸¤ä¸ªç«¯ç‚¹TCP åªèƒ½æä¾›ç‚¹åˆ°ç‚¹çš„é€šä¿¡ï¼Œè€Œ UDP å¯ä»¥ä»»æ„æ–¹å¼çš„é€šä¿¡ã€‚ä¸€æ¡ TCP è¿žæŽ¥çš„ä¸¤ç«¯å°±æ˜¯ä¸¤ä¸ªå¥—æŽ¥å­—ï¼Œå¥—æŽ¥å­— = IP: ç«¯å£å·ã€‚ TCP å¤´éƒ¨TCP å¤´éƒ¨é€šå¸¸æœ‰ 20 å­—èŠ‚ï¼Œæœ‰é€‰é¡¹æ—¶æ›´é•¿ï¼Œä½†æ€»å…±ä¸è¶…è¿‡ 60 å­—èŠ‚ã€‚åŒ…æ‹¬ï¼š æºç«¯å£ã€ç›®çš„ç«¯å£ï¼ˆå…± 4 å­—èŠ‚ï¼‰ä¼ è¾“å±‚å’Œç½‘ç»œå±‚çš„ä¸€å¤§é‡è¦åŒºåˆ«å°±æ˜¯ï¼šä¼ è¾“å±‚æŒ‡å®šäº†æ•°æ®æŠ¥å‘å¾€çš„åº”ç”¨è¿›ç¨‹ï¼Œå› æ­¤éœ€è¦ç«¯å£å·æ ‡è¯†ã€‚ åºå·ï¼ˆ4 å­—èŠ‚ï¼‰å½“å‰ TCP æ•°æ®æŠ¥æ•°æ®éƒ¨åˆ†çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚TCP æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œå®ƒä¼šå¯¹å‘é€çš„æ¯ä¸€ä¸ªå­—èŠ‚è¿›è¡Œç¼–å·ï¼Œè€Œä¸”ä¸åŒæ•°æ®æŠ¥ä¹‹é—´æ˜¯è¿žç»­ç¼–å·çš„ã€‚ ç¡®è®¤å·ï¼ˆ4 å­—èŠ‚ï¼‰è¡¨ç¤ºå½“å‰ä¸»æœºä½œä¸ºæŽ¥æ”¶ç«¯ï¼ŒæœŸæœ›æŽ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚ æ•°æ®åç§»ï¼ˆ4 å­—èŠ‚ï¼‰æ•°æ®éƒ¨åˆ†è·ç¦»æŠ¥æ–‡æ®µèµ·å§‹éƒ¨åˆ†çš„åç§»ï¼Œå…¶å®žå°±æ˜¯å¤´éƒ¨çš„é•¿åº¦ã€‚ ä¿ç•™å­—æ®µ æ ‡è¯†ç¬¦ URGï¼šè¯¥å­—æ®µè¢«ç½® 1 æ—¶ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†åŒ…å«ç´§æ€¥ä¿¡æ¯ï¼Œç´§æ€¥æ•°æ®ä¸€å®šæ˜¯åœ¨æ•°æ®éƒ¨åˆ†çš„æœ€å‰é¢ï¼Œç´§æ€¥æŒ‡é’ˆæ ‡æ˜Žäº†ç´§æ€¥æ•°æ®çš„å°¾éƒ¨ã€‚ ACKï¼šè¯¥å­—æ®µè¢«ç½® 1 æ—¶ï¼Œç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆã€‚åœ¨è¿žæŽ¥å»ºç«‹åŽä¼ é€çš„æ‰€æœ‰æŠ¥æ–‡çŸ­éƒ½å¿…é¡»æŠŠ ACK ç½® 1ã€‚ PSHï¼šå½“æŽ¥æ”¶æ–¹æ”¶åˆ° PSH=1 çš„æŠ¥æ–‡åŽï¼Œä¼šç«‹å³å°†æ•°æ®äº¤ç»™åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯ç­‰åˆ°ç¼“å†²åŒºæ»¡äº†åŽæ‰æäº¤ã€‚ RSTï¼šè¯¥å€¼ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºå½“å‰ TCP è¿žæŽ¥å‡ºçŽ°ä¸¥é‡é—®é¢˜ï¼Œéœ€è¦é‡Šæ”¾é‡è¿žã€‚ SYNï¼šSYN åœ¨å»ºç«‹è¿žæŽ¥çš„æ—¶å€™ä½¿ç”¨ã€‚ï¼ˆSYN=1, ACK=0ï¼‰è¡¨ç¤ºå½“å‰æŠ¥æ–‡æ®µæ˜¯ä¸€ä¸ªè¿žæŽ¥è¯·æ±‚æŠ¥æ–‡ï¼›ï¼ˆSYN=1, ACK=1ï¼‰è¡¨ç¤ºå½“å‰æŠ¥æ–‡æ˜¯ä¸€ä¸ªåŒæ„å»ºç«‹è¿žæŽ¥çš„åº”ç­”æŠ¥æ–‡ã€‚ FINï¼šFIN=1 è¡¨ç¤ºæ­¤æŠ¥æ–‡æ®µæ˜¯ä¸€ä¸ªé‡Šæ”¾è¿žæŽ¥çš„è¯·æ±‚æŠ¥æ–‡ã€‚ æŽ¥æ”¶çª—å£å¤§å°è¡¨ç¤ºå½“å‰æŽ¥æ”¶çª—å£çš„å‰©ä½™å®¹é‡å¤§å°ï¼Œç”¨äºŽå®žçŽ° TCP çš„æµé‡æŽ§åˆ¶ã€‚å‘é€æ–¹æ”¶åˆ°è¯¥å€¼åŽä¼šå°†å‘é€çª—å£è°ƒæ•´ä¸ºè¯¥å€¼çš„å¤§å°ã€‚å‘é€çª—å£çš„å¤§å°åˆå½±å“äº†å‘é€é€ŸçŽ‡ï¼Œæ‰€ä»¥æŽ¥æ”¶æ–¹é€šè¿‡è®¾ç½®è¯¥å€¼æŽ§åˆ¶å‘é€æ–¹çš„å‘é€é€ŸçŽ‡ã€‚ æ£€éªŒå’Œç”¨äºŽæŽ¥æ”¶ç«¯æ£€éªŒæ•´ä¸ªæ•°æ®æŠ¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™ã€‚ ç´§æ€¥æŒ‡é’ˆç”¨äºŽæ ‡è¯†ç´§æ€¥æ•°æ®çš„å°¾éƒ¨ã€‚ é€‰é¡¹å­—æ®µé•¿åº¦å¯é€‰ã€‚ TCP ä¸‰æ¬¡æ¡æ‰‹å‡è®¾ A ä¸ºå®¢æˆ·ç«¯ï¼ŒB ä¸ºæœåŠ¡ç«¯ã€‚ é¦–å…ˆ B å¤„äºŽLISTENçŠ¶æ€ï¼Œç­‰å¾… A çš„è¿žæŽ¥è¯·æ±‚ã€‚ A å‘ B å‘é€è¯·æ±‚æŠ¥æ–‡ï¼Œ ï¼ˆSYN=1, ACK=0ï¼‰ï¼Œå‘é€åŽ A è¿›å…¥SYN-SENTçŠ¶æ€ã€‚ B æ”¶åˆ° A çš„è¯·æ±‚æŠ¥æ–‡ï¼Œå¦‚æžœåŒæ„å»ºç«‹è¿žæŽ¥ï¼Œåˆ™å‘ A å‘é€è¿žæŽ¥ç¡®è®¤æŠ¥æ–‡æ®µï¼Œï¼ˆSYN=1, ACK=1ï¼‰ï¼Œå‘é€åŽ B è¿›å…¥SYN-RCVDçŠ¶æ€ã€‚ A æ”¶åˆ° B çš„è¿žæŽ¥ç¡®è®¤æŠ¥æ–‡æ®µï¼Œè¿˜è¦å‘ B å‘é€ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡æ®µï¼Œå‘é€åŽ A è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼ŒB æ”¶åˆ°åŽä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œä»Žè€Œè¿žæŽ¥å»ºç«‹ã€‚ ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿè€Œä¸æ˜¯ä¸¤æ¬¡ï¼Ÿå…¶å®žæ˜¯é˜²æ­¢å¤±æ•ˆçš„è¿žæŽ¥è¢«æœåŠ¡ç«¯æŽ¥æ”¶ï¼Œå¯¼è‡´æœåŠ¡ç«¯é”™è¯¯æ‰“å¼€è¿žæŽ¥è€Œæµªè´¹èµ„æºã€‚å¦‚æžœå»ºç«‹è¿žæŽ¥åªéœ€è¦ä¸¤æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œå®ƒåœ¨èŽ·å¾—æœåŠ¡ç«¯çš„åº”ç­”åŽè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œè€ŒæœåŠ¡ç«¯ä¼šåœ¨æ”¶åˆ°è¿žæŽ¥è¯·æ±‚åŽå°±è¿›å…¥ESTABLISHEDçŠ¶æ€ã€‚æ­¤æ—¶å¦‚æžœç½‘ç»œæ‹¥å¡žï¼Œå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚è¿Ÿè¿Ÿåˆ°ä¸äº†æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯ä¼šè¶…æ—¶é‡å‘ï¼Œå¦‚æžœæœåŠ¡ç«¯æ­£ç¡®æŽ¥æ”¶å¹¶ç¡®è®¤åº”ç­”ï¼ŒåŒæ–¹å¼€å§‹é€šä¿¡ï¼Œé€šä¿¡æŽ¥æ”¶åŽé‡Šæ”¾è¿žæŽ¥ã€‚æ­¤æ—¶å¦‚æžœé‚£ä¸ªå¤±æ•ˆçš„è¿žæŽ¥è¯·æ±‚æŠµè¾¾æœåŠ¡ç«¯ï¼Œç”±äºŽåªæœ‰ä¸¤æ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯ä¼šè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œè€Œæ­¤æ—¶å®¢æˆ·ç«¯æ—©å·²è¿›å…¥CLOSEDçŠ¶æ€ï¼ŒæœåŠ¡ç«¯ä¼šä¸€ç›´ç­‰å¾…ä¸‹åŽ»ï¼Œä»Žè€Œæµªè´¹æœåŠ¡ç«¯è¿žæŽ¥èµ„æºã€‚ TCP å››æ¬¡æŒ¥æ‰‹TCP è¿žæŽ¥çš„é‡Šæ”¾ä¸€å…±éœ€è¦å››æ­¥ï¼Œç§°ä¸ºâ€œå››æ¬¡æŒ¥æ‰‹â€ã€‚å‰ä¸¤æ¬¡æŒ¥æ‰‹ç”¨äºŽæ–­å¼€ä¸€ä¸ªæ–¹å‘çš„è¿žæŽ¥ï¼ŒåŽä¸¤æ¬¡æŒ¥æ‰‹ç”¨äºŽæ–­å¼€å¦ä¸€ä¸ªæ–¹å‘çš„è¿žæŽ¥ã€‚ A å‘é€è¿žæŽ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œ FIN=1ï¼Œä¹‹åŽè¿›å…¥FIN-WAIT-1çŠ¶æ€ã€‚ B æ”¶åˆ°åŽï¼Œå‘ A å‘é€è¿žæŽ¥åº”ç­”ï¼Œè¿›å…¥CLOSE-WAITçŠ¶æ€ã€‚ A æ”¶åˆ°è¯¥åº”ç­”ï¼Œè¿›å…¥FIN-WAIT-2çŠ¶æ€ï¼Œç­‰å¾… B å‘é€è¿žæŽ¥é‡Šæ”¾çš„è¯·æ±‚ã€‚ å½“ B ä¸å†éœ€è¦è¿žæŽ¥æ—¶ï¼Œå‘ A å‘é€è¿žæŽ¥é‡Šæ”¾çš„è¯·æ±‚æŠ¥æ–‡ï¼Œ FIN=1ï¼Œä¹‹åŽ B è¿›å…¥LAST-ACKçŠ¶æ€ã€‚ A æ”¶åˆ°é‡Šæ”¾è¯·æ±‚åŽï¼Œå‘ B å‘é€åº”ç­”ï¼Œè¿›å…¥TIME-WAITçŠ¶æ€ï¼Œç­‰å¾… 2MSL åŽè¿›å…¥CLOSEDçŠ¶æ€ï¼ŒB æ”¶åˆ°åº”ç­”åŽï¼Œä¹Ÿè¿›å…¥CLOSEDçŠ¶æ€ã€‚ ä¸ºä»€ä¹ˆ A è¦å…ˆè¿›å…¥TIME-WAITçŠ¶æ€ï¼Œç­‰å¾… 2MSL æ—¶é—´åŽå†è¿›å…¥CLOSEDçŠ¶æ€ï¼Ÿå…¶å®žæ˜¯ä¸ºäº†ä¿è¯ B èƒ½æ”¶åˆ° A çš„ç¡®è®¤åº”ç­”ã€‚è‹¥ A å‘å®Œç¡®è®¤åº”ç­”åŽç›´æŽ¥CLOSEDï¼Œå¦‚æžœè¯¥åº”ç­”ä¸¢å¤±ï¼ŒB ç­‰å¾…è¶…æ—¶ï¼Œä¼šé‡æ–°å‘é€é‡Šæ”¾è¿žæŽ¥çš„è¯·æ±‚ï¼Œæ­¤æ—¶ A å·²ç»å…³é—­äº†ï¼Œä¸ä¼šä½œå‡ºä»»ä½•å“åº”ï¼ŒB æ°¸è¿œæ— æ³•æ­£å¸¸å…³é—­ã€‚ TCP å¯é ä¼ è¾“çš„è¡¨çŽ°TCP çš„å¯é æ€§åœ¨äºŽï¼Œå®ƒå‘åº”ç”¨å±‚æä¾›çš„æ•°æ®æ˜¯æ— å·®é”™ã€æœ‰åºã€æ— ä¸¢å¤±çš„ã€‚TCP é‡‡ç”¨æµé‡æŽ§åˆ¶ã€æ‹¥å¡žæŽ§åˆ¶ã€è¿žç»­ ARQ ç­‰æŠ€æœ¯ä¿è¯å®ƒçš„å¯é æ€§ã€‚ åœæ­¢ç­‰å¾…åè®®ï¼ˆARQ åè®®ï¼‰TCP ä¿è¯å…¶å¯é æ€§é‡‡ç”¨çš„æ˜¯æ›´ä¸ºå¤æ‚çš„æ»‘åŠ¨çª—å£åè®®ï¼Œä½†åœæ­¢ç­‰å¾…åè®®æ˜¯å®ƒçš„ç®€åŒ–ç‰ˆï¼Œå› æ­¤è¿™é‡Œå…ˆä»‹ç»åœæ­¢ç­‰å¾…åè®®ã€‚ARQï¼ˆAutomatic Repeat reQuest, è‡ªåŠ¨é‡ä¼ è¯·æ±‚ï¼‰ï¼Œå°±æ˜¯å½“è¯·æ±‚å¤±è´¥æ—¶å®ƒä¼šè‡ªåŠ¨é‡ä¼ ï¼Œç›´åˆ°è¯·æ±‚è¢«æ­£ç¡®æŽ¥æ”¶ä¸ºæ­¢ã€‚ æ— å·®é”™çš„æƒ…å†µA å‘ B æ¯å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œéƒ½è¦åœæ­¢å‘é€ï¼Œæ”¶åˆ° B çš„ç¡®è®¤åº”ç­”åŽæ‰å‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„ã€‚ åˆ†ç»„ä¸¢å¤±ã€å‡ºçŽ°å·®é”™çš„æƒ…å†µåˆ†ç»„ä¸¢å¤±ï¼šåˆ†ç»„åœ¨é€”ä¸­ä¸¢å¤±ï¼ŒB æ”¶ä¸åˆ°ï¼Œå› æ­¤ä¸ä¼šæœ‰å“åº”ï¼ŒA è¶…æ—¶åŽä¼šé‡ä¼ ã€‚å‡ºçŽ°å·®é”™ï¼šB æ”¶åˆ°åˆ†ç»„ï¼Œä½†æ£€æŸ¥åˆ°åˆ†ç»„æœ‰å·®é”™ï¼Œä¼šç›´æŽ¥ä¸¢å¼ƒï¼Œä¸ä¼šæœ‰å“åº”ï¼ŒA åŒæ ·è¶…æ—¶é‡ä¼ ã€‚ åº”ç­”ä¸¢å¤±ã€åº”ç­”è¿Ÿåˆ°çš„æƒ…å†µåº”ç­”ä¸¢å¤±ï¼šB æ”¶åˆ°åˆ†ç»„ï¼Œè¿”å›žåº”ç­”ï¼Œä½†åº”ç­”åœ¨é€”ä¸­ä¸¢å¤±äº†ï¼ŒA è¶…æ—¶é‡ä¼ ï¼Œç´§æŽ¥ç€ B åˆæ”¶åˆ°è¯¥åˆ†ç»„ï¼Œåˆ¤æ–­è¯¥æ˜¯å¦å·²æŽ¥æ”¶ï¼Œè‹¥å·²æŽ¥æ”¶åˆ™ç›´æŽ¥ä¸¢å¼ƒï¼Œå¹¶è¡¥ä¸Šä¸€ä¸ªåº”ç­”ã€‚åº”ç­”è¿Ÿåˆ°ï¼šB æ”¶åˆ°åˆ†ç»„ï¼Œè¿”å›žåº”ç­”ï¼Œä½†ç”±äºŽç½‘è·¯æ‹¥å¡žï¼ŒA æ²¡æœ‰åŠæ—¶æ”¶åˆ°åˆ†ç»„ï¼Œå¯¼è‡´è¶…æ—¶é‡ä¼ ï¼Œä¹‹åŽå‰é¢çš„åº”ç­”æŠµè¾¾ Aï¼ŒA åˆ¤æ–­æ˜¯å¦å·²æŽ¥æ”¶ï¼Œè‹¥æ˜¯åˆ™ç›´æŽ¥ä¸¢å¼ƒå³å¯ã€‚ æ»‘åŠ¨çª—å£åè®®ï¼ˆè¿žç»­ ARQ åè®®ï¼‰åœ¨ ARQ åè®®ä¸­ï¼Œå‘é€è€…æ¯æ¬¡åªèƒ½å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œåœ¨åº”ç­”åˆ°æ¥å‰å¿…é¡»ç­‰å¾…ï¼Œè€Œè¿žç»­ ARQ åè®®çš„å‘é€è€…æ‹¥æœ‰ä¸€ä¸ªå‘é€çª—å£ï¼Œå‘é€è€…å¯ä»¥åœ¨æ²¡æœ‰å¾—åˆ°åº”ç­”çš„æƒ…å†µä¸‹è¿žç»­å‘é€çª—å£ä¸­çš„åˆ†ç»„ã€‚è¿™æ ·å‡å°‘äº†ç­‰å¾…æ—¶é—´ï¼Œæé«˜äº†ä¼ è¾“çš„æ•ˆçŽ‡ã€‚ çª—å£æ˜¯ç¼“å­˜çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥æš‚æ—¶å­˜æ”¾å­—èŠ‚æµã€‚å‘é€è€…å’ŒæŽ¥æ”¶è€…å„æœ‰ä¸€ä¸ªçª—å£ï¼ŒæŽ¥æ”¶è€…é€šè¿‡ TCP æŠ¥æ–‡æ®µä¸­çš„çª—å£å­—æ®µå‘Šè¯‰å‘é€æ–¹è‡ªå·±çš„çª—å£å¤§å°ï¼Œå‘é€è€…æ ¹æ®è¿™ä¸ªå€¼å’Œå…¶å®ƒä¿¡æ¯è®¾ç½®è‡ªå·±çš„çª—å£å¤§å°ã€‚ å¦‚æžœå‘é€çª—å£å·¦éƒ¨çš„å­—èŠ‚å·²ç»å‘é€å¹¶ä¸”æ”¶åˆ°äº†ç¡®è®¤ï¼Œé‚£ä¹ˆå°±å°†å‘é€çª—å£å‘å³æ»‘åŠ¨ä¸€å®šè·ç¦»ï¼Œç›´åˆ°å·¦éƒ¨ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸æ˜¯å·²å‘é€å¹¶ä¸”å·²ç¡®è®¤çš„çŠ¶æ€ï¼›æŽ¥æ”¶çª—å£çš„æ»‘åŠ¨ç±»ä¼¼ï¼ŒæŽ¥æ”¶çª—å£å·¦éƒ¨å­—èŠ‚å·²ç»å‘é€ç¡®è®¤å¹¶äº¤ä»˜ä¸»æœºï¼Œå°±å‘å³æ»‘åŠ¨æŽ¥æ”¶çª—å£ã€‚ å¦‚æžœæŸäº›å­—èŠ‚å¹¶æœªæŒ‰åºæ”¶åˆ°ï¼ŒæŽ¥æ”¶è€…åªä¼šç¡®è®¤æœ€åŽä¸€ä¸ªæœ‰åºçš„å­—èŠ‚ï¼Œä»Žè€Œä¹±åºçš„å­—èŠ‚å°±ä¼šè¢«é‡æ–°å‘é€ã€‚ TCP åè®®çš„ä¸¤ç«¯åˆ†åˆ«ä¸ºå‘é€è€… A å’ŒæŽ¥æ”¶è€… Bï¼Œç”±äºŽæ˜¯å…¨åŒå·¥é€šä¿¡ï¼Œå› æ­¤ A å’Œ B åº”è¯¥åˆ†åˆ«ç»´æŠ¤ç€ä¸€ä¸ªç‹¬ç«‹çš„å‘é€ç¼“å†²åŒºå’ŒæŽ¥æ”¶ç¼“å†²åŒºã€‚ TCP æµé‡æŽ§åˆ¶æµé‡æŽ§åˆ¶æ˜¯ä¸ºäº†é¿å…åˆ†ç»„ä¸¢å¤±ï¼Œé€šè¿‡æŽ§åˆ¶å‘é€æ–¹å‘é€é€ŸçŽ‡ï¼Œä¿è¯æŽ¥æ”¶æ–¹æ¥å¾—åŠæŽ¥æ”¶ã€‚å®ƒé€šè¿‡æ»‘åŠ¨çª—å£åè®®å®žçŽ°ã€‚ æµé‡æŽ§åˆ¶å¯èƒ½å¼•å‘æ­»é”ã€‚å½“å‘é€è€…æ”¶åˆ°ä¸€ä¸ªçª—å£ä¸º 0 çš„åº”ç­”æ—¶ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç­‰å¾…æŽ¥æ”¶è€…çš„ä¸‹ä¸€ä¸ªåº”ç­”ã€‚å¦‚æžœä¸‹ä¸€ä¸ªçª—å£ä¸ä¸º 0 çš„åº”ç­”åœ¨é€”ä¸­ä¸¢å¤±ï¼Œä¼šå¯¼è‡´å‘é€è€…ä¸€ç›´ç­‰å¾…ä¸‹åŽ»ï¼Œè€ŒæŽ¥æ”¶è€…ä»¥ä¸ºå‘é€è€…å·²ç»æ”¶åˆ°è¯¥åº”ç­”ï¼Œç­‰å¾…æŽ¥æ”¶æ–°æ•°æ®ï¼Œè¿™æ ·åŒæ–¹å°±ç›¸äº’ç­‰å¾…ä¸‹åŽ»ï¼Œä»Žè€Œäº§ç”Ÿæ­»é”ã€‚ä¸ºäº†é¿å…æ­»é”ï¼ŒTCP ä½¿ç”¨äº†æŒç»­è®¡æ—¶å™¨ï¼Œæ¯å½“å‘é€è€…æ”¶åˆ°ä¸€ä¸ª 0 çª—å£çš„åº”ç­”åŽå°±å¯åŠ¨è®¡æ•°å™¨ï¼Œæ—¶é—´ä¸€åˆ°ä¼šè¯¢é—®æŽ¥æ”¶è€…çª—å£çš„å¤§å°ã€‚è‹¥ä¾ç„¶ä¸º 0ï¼Œåˆ™é‡æ–°å¯åŠ¨è®¡æ—¶å™¨ï¼Œå¦‚æ­¤ä¸‹åŽ»â€¦â€¦ TCP æ‹¥å¡žæŽ§åˆ¶å¦‚æžœç½‘ç»œå‡ºçŽ°æ‹¥å¡žï¼Œåˆ†ç»„å°†ä¼šä¸¢å¤±ï¼Œæ­¤æ—¶å‘é€è€…ä¼šç»§ç»­é‡ä¼ ï¼Œä»Žè€Œå¯¼è‡´ç½‘ç»œæ‹¥å¡žç¨‹åº¦æ›´é«˜ã€‚å› æ­¤å½“å‡ºçŽ°æ‹¥å¡žæ—¶ï¼Œåº”å½“æŽ§åˆ¶å‘é€è€…çš„é€ŸçŽ‡ã€‚è¿™ä¸€ç‚¹å’Œæµé‡æŽ§åˆ¶å¾ˆåƒï¼Œä½†æ˜¯å‡ºå‘ç‚¹ä¸åŒã€‚æµé‡æŽ§åˆ¶æ˜¯ä¸ºäº†è®©æŽ¥æ”¶è€…èƒ½æ¥å¾—åŠæŽ¥å—ï¼Œè€Œæ‹¥å¡žæŽ§åˆ¶æ˜¯ä¸ºäº†é™ä½Žæ•´ä¸ªç½‘ç»œçš„æ‹¥å¡žç¨‹åº¦ã€‚ TCP ä¸»è¦é€šè¿‡å››ç§ç®—æ³•æ¥è¿›è¡Œæ‹¥å¡žæŽ§åˆ¶ï¼šæ…¢å¼€å§‹ã€æ‹¥å¡žé¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤ã€‚ å‘é€æ–¹éœ€è¦ç»´æŠ¤ä¸€ä¸ªå«åšæ‹¥å¡žçª—å£ï¼ˆcwndï¼‰çš„çŠ¶æ€å˜é‡ï¼Œæ³¨æ„æ‹¥å¡žçª—å£ä¸Žå‘é€æ–¹çª—å£çš„åŒºåˆ«ï¼šæ‹¥å¡žçª—å£åªæ˜¯ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Œå®žé™…å†³å®šå‘é€æ–¹èƒ½å‘é€å¤šå°‘æ•°æ®çš„æ˜¯å‘é€æ–¹çª—å£ã€‚ æ…¢å¼€å§‹ä¸Žæ‹¥å¡žé¿å…å‘é€çš„æœ€åˆæ‰§è¡Œæ…¢å¼€å§‹ï¼Œä»¤ cwnd=1ï¼Œå‘é€æ–¹åªèƒ½å‘é€ 1 ä¸ªæŠ¥æ–‡æ®µï¼›å½“æ”¶åˆ°ç¡®è®¤åŽï¼Œå°† cwnd åŠ å€ï¼Œå› æ­¤ä¹‹åŽå‘é€æ–¹èƒ½å¤Ÿå‘é€çš„æŠ¥æ–‡æ®µæ•°é‡ä¸ºï¼š2ã€4ã€8 â€¦æ³¨æ„åˆ°æ…¢å¼€å§‹æ¯ä¸ªè½®æ¬¡éƒ½å°† cwnd åŠ å€ï¼Œè¿™æ ·ä¼šè®© cwnd å¢žé•¿é€Ÿåº¦éžå¸¸å¿«ï¼Œä»Žè€Œä½¿å¾—å‘é€æ–¹å‘é€çš„é€Ÿåº¦å¢žé•¿é€Ÿåº¦è¿‡å¿«ï¼Œç½‘ç»œæ‹¥å¡žçš„å¯èƒ½ä¹Ÿå°±æ›´é«˜ã€‚è®¾ç½®ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ ssthreshï¼Œå½“ cwnd &gt;= ssthresh æ—¶ï¼Œè¿›å…¥æ‹¥å¡žé¿å…ï¼Œæ¯ä¸ªè½®æ¬¡åªå°† cwnd åŠ  1ã€‚å¦‚æžœå‡ºçŽ°äº†è¶…æ—¶ï¼Œåˆ™ä»¤ ssthresh = cwnd/2ï¼Œç„¶åŽé‡æ–°æ‰§è¡Œæ…¢å¼€å§‹ã€‚ å¿«é‡ä¼ ä¸Žå¿«æ¢å¤å¯¹äºŽæŽ¥æ”¶è€…ï¼Œè¦æ±‚æ¯æ¬¡æŽ¥æ”¶åˆ°æŠ¥æ–‡æ®µéƒ½åº”è¯¥å‘é€å¯¹å·²æ”¶åˆ°æœ‰åºæŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼Œä¾‹å¦‚å·²ç»æŽ¥æ”¶åˆ° M1 å’Œ M2ï¼Œæ­¤æ—¶æ”¶åˆ° M4ï¼Œåº”å½“å‘é€å¯¹ M2 çš„ç¡®è®¤ã€‚è€Œå¯¹äºŽå‘é€æ–¹ï¼Œå¦‚æžœæ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼Œé‚£ä¹ˆå¯ä»¥ç¡®å®šä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±ï¼Œä¾‹å¦‚æ”¶åˆ°ä¸‰ä¸ª M2 ï¼Œåˆ™ M3 ä¸¢å¤±ã€‚æ­¤æ—¶æ‰§è¡Œå¿«é‡ä¼ ï¼Œç«‹å³é‡ä¼ ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæ˜¯ä¸¢å¤±ä¸ªåˆ«æŠ¥æ–‡æ®µï¼Œè€Œä¸æ˜¯ç½‘ç»œæ‹¥å¡žï¼Œå› æ­¤æ‰§è¡Œå¿«æ¢å¤ï¼Œä»¤ ssthresh = cwnd/2 ï¼Œcwnd = ssthreshï¼Œæ³¨æ„åˆ°æ­¤æ—¶ç›´æŽ¥è¿›å…¥æ‹¥å¡žé¿å…ã€‚æ…¢å¼€å§‹å’Œå¿«æ¢å¤çš„å¿«æ…¢æŒ‡çš„æ˜¯ cwnd çš„è®¾å®šå€¼ï¼Œè€Œä¸æ˜¯ cwnd çš„å¢žé•¿é€ŸçŽ‡ã€‚æ…¢å¼€å§‹ cwnd è®¾å®šä¸º 1ï¼Œè€Œå¿«æ¢å¤ cwnd è®¾å®šä¸º ssthreshã€‚]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>UDP</tag>
        <tag>TCP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…è´¹æ­å»ºå±žäºŽè‡ªå·±çš„åšå®¢]]></title>
    <url>%2F2018%2F06%2F29%2Fbuild-your-own-blog%2F</url>
    <content type="text"><![CDATA[å¯¹äºŽä¸€ä¸ªæ²¡æœ‰ä¸€ç‚¹ç¼–ç¨‹åŸºç¡€çš„åŒå­¦æ¥è¯´ï¼Œæ­å»ºè¿™æ ·çš„ä¸€ä¸ªåšå®¢ï¼Œéš¾å—ï¼Ÿ ä¸éš¾ï¼Œè¯´çœŸçš„ã€‚ä½†ä¸æ˜¯è¯´å¾ˆç®€å•ï¼Œå®ƒéœ€è¦ä½ åŽ»äº†è§£ä¸€äº›å°çŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚ Git å‘½ä»¤è¡Œçš„ä½¿ç”¨ã€GitHub ä»“åº“çš„åˆ›å»ºã€ä»£ç çš„è¿œç¨‹éƒ¨ç½²ç­‰ç­‰â€¦â€¦å®ƒä¸åƒæˆ‘ä»¬å®‰è£…æŸäº›è½¯ä»¶ä¸€æ ·ï¼Œåªè¦æŠŠå®‰è£…åŒ…ä¸‹è½½ä¸‹æ¥ï¼Œè¿è¡Œå®‰è£…ç¨‹åºï¼Œä¸€è·¯ next åˆ°æœ€åŽå®Œæˆå³å¯ã€‚ è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šå¤§è‡´è¯´ä¸€ä¸‹æ­å»ºçš„æµç¨‹ä»¥åŠç”¨åˆ°çš„æ¯ä¸ªå·¥å…·çš„ä½œç”¨ï¼Œä½†ä¸ä¼šè¯¦ç»†è®²ä¸€æ­¥æ­¥å…·ä½“è¯¥æ€Žä¹ˆæ“ä½œï¼Œå› ä¸ºç½‘ä¸Šæœ‰å¤ªå¤šè¯¦ç»†çš„æ•™ç¨‹äº†ï¼Œåªè¦ä½ ä¼šç”¨æœç´¢å¼•æ“Žã€‚ å®‰è£… GitGit æ˜¯ä¸€ä¸ªç‰ˆæœ¬æŽ§åˆ¶è½¯ä»¶ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç®¡ç†ä»£ç çš„å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆç”¨äºŽå›¢é˜Ÿçš„åä½œå¼€å‘ä¸­ã€‚åœ¨å…¬å¸ï¼Œä¸€èˆ¬æ˜¯å›¢é˜Ÿåä½œå®Œæˆè½¯ä»¶/ç³»ç»Ÿçš„å¼€å‘ï¼ŒåŒäº‹æŠŠä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œä½ å¯ä»¥åœ¨è‡ªå·±ç”µè„‘ä¸Šé€šè¿‡ Git å‘½ä»¤å°†ä»£ç å…‹éš†ä¸‹æ¥ï¼Œåˆ›å»ºåˆ†æ”¯ï¼ŒåŠ è¿›åŽ»ä½ çš„ä»£ç ï¼Œæäº¤çš„æ—¶å€™å¯ä»¥ merge åˆå¹¶åˆ†æ”¯ï¼Œåä½œå®Œæˆå¼€å‘å·¥ä½œã€‚ æˆ‘ä»¬æ­å»ºè‡ªå·±çš„åšå®¢ï¼Œéœ€è¦å°†ä»£ç éƒ¨ç½²åˆ° GitHub ä¸Šï¼Œç”¨çš„å°±æ˜¯ Git çš„ä¸€äº›åŸºæœ¬å‘½ä»¤ï¼Œæ¯”å¦‚ commitã€pushâ€¦ å®‰è£… Node.jsæˆ‘çš„è¿™ä¸ªåšå®¢ç”¨çš„æ˜¯ Hexo æ¡†æž¶ï¼Œå®ƒåŸºäºŽ Node.js å¼€å‘ï¼Œå› æ­¤ï¼Œåœ¨å®‰è£… Hexo ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å®‰è£… Node.jsã€‚è€Œ npm æ˜¯ Node.js çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œå®‰è£…å®Œ Node.js ä¹‹åŽï¼Œå°±æœ‰äº† npmã€‚é€šè¿‡ npm æˆ‘ä»¬å¯ä»¥æŠŠæ­å»ºåšå®¢éœ€è¦çš„ä¸€äº›ä»£ç åŒ…ï¼ˆå¦‚ Hexoï¼‰ä¸‹è½½ä¸‹æ¥å¹¶å®Œæˆå®‰è£…ã€‚ å®‰è£… Hexoé€šè¿‡æ‰§è¡Œ npm å‘½ä»¤å®‰è£…å³å¯ã€‚ åˆå§‹åŒ–åšå®¢å®‰è£…å®Œ Hexoï¼Œåœ¨è‡ªå·±å–œæ¬¢çš„æ–‡ä»¶å¤¹ä¸‹åˆå§‹åŒ– Hexo åšå®¢ï¼Œå¹¶é…ç½®ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚åšå®¢ç½‘ç«™çš„æ ‡é¢˜ã€è¯­è¨€(zh-Hans)ç­‰ç­‰ã€‚ å®‰è£…ä¸»é¢˜è¿™ä¸€æ­¥å¯ä»¥ä¸åšï¼Œä½ å®Œå…¨å¯ä»¥ç”¨ Hexo çš„é»˜è®¤ä¸»é¢˜ï¼Œåªæ˜¯æˆ‘å«Œå¼ƒå®ƒé»˜è®¤çš„ä¸»é¢˜æ ·å¼ä¸å¥½çœ‹ï¼Œå› æ­¤å®‰è£…äº† nexT ä¸»é¢˜æ ·å¼ï¼Œçœ‹èµ·æ¥èˆ’æœå¤šäº†ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥åšä¸€äº›ä¸ªæ€§åŒ–é…ç½®ï¼Œæ¯”å¦‚æ–‡ç« çš„å±•ç¤ºæ–¹å¼â€¦â€¦åªè¦åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹ä¿®æ”¹ _config.yml æ–‡ä»¶çš„é…ç½®ä¿¡æ¯å³å¯ã€‚ åœ¨ GitHub ä¸Šåˆ›å»ºä»“åº“ä»¥ä¸Šæˆ‘ä»¬æ˜¯åœ¨è‡ªå·±ç”µè„‘ä¸Šæ“ä½œçš„ï¼Œå¤–éƒ¨æ— æ³•è®¿é—®åˆ°æˆ‘ä»¬çš„åšå®¢ï¼Œå› æ­¤ï¼Œå¯ä»¥å°†é¡µé¢ä»£ç éƒ¨ç½²åˆ° GitHub ä»“åº“ä¸Šï¼Œç”± GitHub å¸®æˆ‘ä»¬è§£æžé¡µé¢ä¾›å¤–éƒ¨è®¿é—®ã€‚éƒ¨ç½²çš„æ—¶å€™ï¼Œéœ€è¦æœ‰å¯†é’¥ï¼Œä¸€èˆ¬æ˜¯ç”¨ SSHï¼Œä¿è¯åªæœ‰è‡ªå·±èƒ½ä¸Šä¼ ä»£ç åˆ°è‡ªå·±çš„ä»“åº“ä¸Šã€‚éƒ¨ç½²å®Œæˆä¹‹åŽï¼ŒåŸºæœ¬ä¸Šå°±æžå®šäº†ã€‚ æ·»åŠ  GitmentGitment æ˜¯ä¸€æ¬¾åŸºäºŽ GitHub Issues çš„è¯„è®ºç³»ç»Ÿï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬çš„åšå®¢æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼Œå®Œå…¨ä¸éœ€è¦åŽå°æœåŠ¡å™¨ï¼Œç”¨æˆ·çš„æ¯ä¸€æ¡è¯„è®ºä¼šå­˜å‚¨åˆ° GitHub çš„ Issues ä¸Šï¼Œä½ å¯ä»¥åƒæˆ‘ä¸€æ ·ï¼Œå°†è¯„è®ºæ·»åŠ åœ¨è‡ªå·±çš„åšå®¢ä»“åº“ä¸­ï¼Œä¹Ÿå¯ä»¥æ–°åˆ›å»ºä¸€ä¸ªä»“åº“ä¸“é—¨ç”¨äºŽå­˜å‚¨è¯„è®ºã€‚ è¯„è®ºæ—¶éœ€è¦ç”¨æˆ·ç™»å½• GitHub è´¦å·ï¼Œæ²¡æœ‰ GitHub è´¦å·çš„ç”¨æˆ·æ˜¯è¯„è®ºä¸äº†çš„ï¼Œè¿™ä¸Ž Gitment åŸºäºŽ GitHub Issues æœ‰å…³ã€‚ ä¼¼ä¹Žå°±è¿™ä¹ˆå¤šäº†ï¼Œè¯¦ç»†çš„æ­å»ºè¿‡ç¨‹ä»¥åŠå¦‚ä½•å¼€å§‹æ–‡ç« çš„åˆ›ä½œï¼ŒæŸ¥çœ‹ç½‘ä¸Šæ•™ç¨‹å°±å¥½äº†ï¼Œæˆ‘å°±ä¸æŠŠé“¾æŽ¥è´´å‡ºæ¥äº†~]]></content>
      <categories>
        <category>Dev</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†è§ï¼Œå¾·å›½]]></title>
    <url>%2F2018%2F06%2F28%2FGoodbye-Germany%2F</url>
    <content type="text"><![CDATA[ç”Ÿæ´»æ— æ¯”æ®‹é…·ï¼Œå¹¸è¿å¥³ç¥žä¸ä¼šæ°¸è¿œçœ·é¡¾ç€ä½ ï¼Œè¿˜æ˜¯è¦åšå¼ºé¢å¯¹ç”Ÿæ´»ã€‚ å†è§ï¼Œæ—¥è€³æ›¼æˆ˜è½¦ã€‚]]></content>
      <categories>
        <category>Life</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Just Do IT]]></title>
    <url>%2F2018%2F06%2F27%2FJust-Do-IT%2F</url>
    <content type="text"><![CDATA[å¤ä¹ è®¡åˆ’ JVM Java Web Spring MyBatis è®¾è®¡æ¨¡å¼ æ“ä½œç³»ç»Ÿ æ•°æ®åº“ è®¡ç®—æœºç½‘ç»œ æ•°æ®ç»“æž„ä¸Žç®—æ³• Java åŸºç¡€ Java å¹¶å‘ Java å®¹å™¨ Java IO æŸ¥æ¼è¡¥ç¼ºæ•°æ®åº“ç´¢å¼•ã€ä¼˜åŒ–ã€å¼•æ“ŽHashMap åº•å±‚æºç ç½‘ç»œåè®®ï¼ˆTCPä¸ºä»€ä¹ˆ 3 æ¬¡æ¡æ‰‹; HTTPï¼‰è®¾è®¡æ¨¡å¼ï¼ˆ23ç§ï¼éƒ½è¦è¿‡å…³ï¼Œå¾…æ€»ç»“ï¼‰]]></content>
      <categories>
        <category>Dev</category>
      </categories>
      <tags>
        <tag>plan</tag>
      </tags>
  </entry>
</search>
